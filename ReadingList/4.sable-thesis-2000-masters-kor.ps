%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: thesis.dvi
%%Pages: 115
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Helvetica-Bold Times-Bold
%%+ Courier
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips thesis.dvi -o thesis.ps
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2000.10.19:1806
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (thesis.dvi)
@start /Fa 204[29 29 29 49[{TeXBase1Encoding ReEncodeFont}3
58.1154 /Times-Roman rf /Fb 130[40 40 40 40 40 40 40
40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40
40 40 40 40 1[40 1[40 40 40 3[40 40 40 40 40 40 1[40
40 40 40 40 1[40 40 40 40 40 40 40 40 40 40 40 1[40 40
40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40
40 40 40 40 40 1[40 40 40 40 33[{TeXBase1Encoding ReEncodeFont}84
66.4176 /Courier rf /Fc 171[41 3[37 48 1[59 41 2[22 2[37
41 3[48 13[33 33 33 49[{TeXBase1Encoding ReEncodeFont}12
66.4176 /Times-Roman rf /Fd 134[42 1[60 42 42 23 32 28
1[42 42 42 65 23 42 23 23 42 42 28 37 42 37 42 37 11[60
51 46 2[46 2[74 2[32 28 60 4[55 55 60 6[23 10[23 21 1[21
2[28 28 37[46 2[{TeXBase1Encoding ReEncodeFont}41 83.022
/Times-Roman rf /Fe 137[55 55 1[55 3[55 2[55 6[55 1[55
1[55 34[55 55 55 55 55 6[55 55 55 1[55 3[55 1[55 55 40[{
TeXBase1Encoding ReEncodeFont}20 90.9091 /Courier rf
%DVIPSBitmapFont: Ff cmtt12 12 13
/Ff 13 117 df<14FF010313C0010F13F0497F497F497F9038FF81FF3A01FE007F804848
EB3FC049131F4848EB0FE0A24848EB07F0A24848EB03F8A24848EB01FCA348C812FEA400
7E157E00FE157FAE6C15FF6C15FEA46D1301003F15FCA26D1303001F15F8A26C6CEB07F0
A26C6CEB0FE06D131F6C6CEB3FC0A26CB4EBFF806C018113006DB45A6D5B6D5B6D5B0103
13C0010090C7FC283F7BBD33>48 D<EB03FF011F13E0017F13FC48B57E48ECFF804815C0
260FFE0313E03A1FF0007FF049EB1FF84848130F49EB03FC127F90C7EA01FE4814005A6C
15FF167FA3127E123CC9FCA216FF16FEA2150116FC150316F81507ED0FF0ED1FE0153F16
C0ED7F80EDFF004A5AEC07FC4A5A4A5A4A5A4A5A4A5A4990C7FC495AEB07F8EB1FF0495A
495A495A4890C8FC4848143E4848147FEA0FF0485A48B7FCB8FCA37E6C15FE283E7BBD33
>50 D<903801FFC0010F13F8013F13FE90B67E48814881489038807FF03A0FFC000FF801
F06D7E484813036F7EA21500A26C5A6C5AC9FC15015EA215034B5A150F4B5A4B5A913803
FFC00103B55A4991C7FC5D8116C06D8090C76C7EED0FF8ED03FC6F7E6F7E821780163FA2
EE1FC0A3123C127EB4FCA2163F1780167F6C16006D5C6D495A6C6C1303D81FF8EB0FFC3A
0FFF807FF86C90B55A6C5D6C15806C6C91C7FC010F13FC010113C02A3F7CBD33>I<003F
B712F84816FCB8FCA43AFE000FE001A8007CED00F8C71500B3B3A40107B512C049804980
A26D5C6D5C2E3D7EBC33>84 D<EB1FFC90B57E000314E048804814FC48809038F007FFEB
E0016E7F153F6C48806C48131FC87F150FA5EC0FFF49B5FC131F137F48B6FC0007140F48
13C0381FFC00EA3FF0EA7FC05B48C7FC5AA56C141F7E6D137FD83FE0497ED9F807EBFFF0
6CB712F87E6C14F36C14C1C69138003FF0D91FF090C7FC2D2E7BAC33>97
D<ECFFF0010713FE011FEBFF804914C04914E048B612F048EBC01F9038FE000F485A485A
4848EB07E049EB03C0484890C7FC5BA2127F90C9FCA25A5AA97E7EA27F003FEC01F06DEB
03F86C7E6D13076C6C14F06C6C130F01FFEB1FE06CEBE07F6C90B512C06C1580013F1400
6D13FC01075B010013C0252E79AC33>99 D<ECFF80010713F0011F13FC497F90B6FC4815
8048018013C03A07FE003FE001F8EB0FF048481307484814F8491303003F15FC49130112
7F90C7FC16FE15005A5AB7FCA516FC48C9FC7E7EA36C7E167C6C6C14FE7F6C7E6D13016C
6CEB03FC6CB4130F6C9038C03FF86C90B512F06D14E06D14C0010F1400010313FC903800
7FE0272E7BAC33>101 D<14E0EB03F8A2497EA36D5AA2EB00E091C8FCAA383FFFF8487F
A47EEA0001B3AD007FB612C0B712E016F0A216E06C15C0243E78BD33>105
D<EA7FF8487EA4127F1200AC4AB512C04A14E04A14F0A26E14E06E14C09139000FF0004B
5A4B5A4B5A4BC7FC4A5A4A5A4A5A4A5A4A5A4A5A4A5A4A7E01FD7F90B5FC81ECF3F8ECE3
FC14C1EC80FEEC007F5B496D7E6F7E82150F6F7E6F7E8215016F7E3B7FFFF80FFFF0B56C
4813F817FCA217F86C496C13F02E3D7EBC33>107 D<383FFFFC487FB5FCA27E7EC7FCB3
B3AD003FB612F84815FCB712FEA26C15FC6C15F8273D7ABC33>I<4AB4FC263FFC0713C0
267FFE1F13F000FF017F7F91B5FC6CB67E6CEC07FEC6EBF801ECF0004A7F4A7F5CA291C7
FCA35BB3A43B3FFFF80FFFFC486D4813FEB56C4813FFA26C496C13FE6C496C13FC302C7F
AB33>110 D<90381FFE0F90B5EA8F80000314FF120F5A5AEBF007387F800190C7FC00FE
147F5A153FA37E007FEC1F0001C090C7FCEA3FF8EBFFC06C13FF6C14E0000314F8C68001
1F13FF01001480020713C0EC007FED1FE0007C140F00FEEC07F01503A27EA27F15076D14
E06D130F6DEB3FC09038FE01FF90B61280160000FD5C00FC14F8D8F83F13E0D8780790C7
FC242E79AC33>115 D<EB03C0497E130FAA003FB612FC4881B7FCA36C5D26000FE0C8FC
B3A3161FEE3F80A5167F6E140001075C6E5A9138FE07FE6DB55A6D5C6D5C6E5B021F1380
DA07FCC7FC29387EB633>I E
%EndDVIPSBitmapFont
/Fg 173[69 1[64 2[80 58 2[27 2[58 64 3[69 65[{
TeXBase1Encoding ReEncodeFont}8 95.6413 /Helvetica-Bold
rf
%DVIPSBitmapFont: Fh cmsy10 17.28 2
/Fh 2 34 df<007FBC12FCBD12FEA46C1BFC570674A670>0 D<1D1E1D3FA38A1D1FA38A
1D0FA28A1D078A1D038A1D018A777EA21E7F8B1E3F787E787E8B787E787E787E787EF77F
C0797EF71FF8797E79B4FC007FC112E0C212F821FCA221F86C20E0D200071300F70FFC55
5AF73FE0555A55C7FC545A545A545A545A67545A545A1E7F9CC8FC1EFEA2535A661D0366
1D07661D0F66A21D1F66A31D3F9BC9FCA31D1E7E4C78C98F>33 D
E
%EndDVIPSBitmapFont
/Fi 134[55 1[78 55 61 33 55 39 1[61 61 61 89 28 55 1[28
61 61 33 55 61 55 1[55 9[94 2[61 5[72 4[28 4[72 72 67[{
TeXBase1Encoding ReEncodeFont}27 99.6264 /Helvetica-Bold
rf
%DVIPSBitmapFont: Fj cmr12 12 14
/Fj 14 117 df<043014C00478497EA204F81303A24C5CA203011407A24C5CA20303140F
A24C91C7FCA203075CA24C131EA2030F143EA293C7123CA24B147CA2031E1478A2033E14
F8A2033C5CA2037C1301007FBA12F8BB12FCA26C19F8C72801F00007C0C7FC4B5CA30203
140FA24B91C8FCA402075CA24B131EA3020F143E007FBA12F8BB12FCA26C19F8C7003EC7
00F8C8FC023C5CA2027C1301A202785CA202F81303A24A5CA201011407A24A5CA2010314
0FA24A91C9FCA201075CA24A131EA2010F143EA291C7123CA249147CA2011E1478A2010C
143046587BC451>35 D<1438A549B4FC010F13E0013F13F89038FE38FED801F0EB0F80D8
07E0EB03C001C0EB01E0D80F801300D81F001470003E15301638481518A2007815FC00F8
14031507A47EED03F8ED01F06C91C7FC127E127F1380EA3FC013F0EA1FF8EBFFB86C13F8
6CEBFF806C14E06C14F86C6C7F6D13FF010714801300023F13C0023813E0ED3FF0151F15
0FED07F81503150116FC001C1400127FEAFF80167CA413005A00E01578006015F8A20070
15F000301401003815E0003C1403001CEC07C0000FEC0F80D80780EB1F00D803E0137E39
01FC39FC39007FFFF0011F13C0D903FEC7FCEB0038A526517BCA31>I<D91F801618D97F
E0163CD9F078167C2603E01C16FC48486C4B5A260F800F4B5A6E6C1407271F0003E04A5A
6FEC3FC0003ED901BE14FF923ACFC00FCF80007ED900C1B5001FC7FC9238C03FF0007C92
C7123E6F147E00FC0260147C601701604D5A1707604D5A171F95C8FC173E007C02E0137E
4B137C007E5E1601003E01015C4B485A6C13034B485A6C6C48130F020E5C2607C00C49C9
FC2603E01C5B2600F078133ED97FE05BD91F8001FCEB03F090C848EB0FFC4B48EB1E0F03
0391387C03804CEBF801922707C001F013C0030FED00E04C48481360DB1F0015704D4813
30033E1638037E010F1418157C4B5C0201171C4B011F140C4A5A14075D4A5A141F92C7FC
143E147E147C5C0101030F141C4A1718494881A2494802071438010F18304A6E6C137049
C81560496F6C13E0013EEF01C049DB00F8138001FCEE7C034993381E0F0049EE0FFC0160
EE03F046517BCA51>I<EC03F0EC0FF8EC3E1EEC7C0E4A7E49487E130302E07F01071301
A3EB0FC0A4150393CAFC14E05D1506150E5D1518010713386E5A156015E0ECF1C0DAFB80
0107B512C06DB4C7FC5C4A9139007FFC000101EE1FE019806E6FC7FC0100160E497E495E
496C6C1418010E1638496C6C1430011816709026381FE05C01705E496C6C1301D801C06D
5C000301071403D807806D91C8FC000F6D6C5B001F0101140E003F6E130C90C7EB801C48
027F5BEEC0304891383FE070031F5B705AED0FF9923807FB806D6DB4C812C05E6F7E007F
6E6D13016D6E6C14804C6C13036C6C496D1400001F912603CFF85B6C6C90260F07FC130E
6C6C90263E01FE133C3D03FE01F800FF80F8C6B54890383FFFF0013F0180010713C0D907
FCC890C7FC42497CC64C>I<140C141C1438147014E0EB01C01303EB0780EB0F00A2131E
5BA25B13F85B12015B1203A2485AA3485AA348C7FCA35AA2123EA2127EA4127CA312FCB3
A2127CA3127EA4123EA2123FA27EA36C7EA36C7EA36C7EA212017F12007F13787FA27F7F
A2EB0780EB03C01301EB00E014701438141C140C166476CA26>40
D<12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA21378137C133C133E131E131FA2EB0F
80A3EB07C0A3EB03E0A314F0A21301A214F8A41300A314FCB3A214F8A31301A414F0A213
03A214E0A3EB07C0A3EB0F80A3EB1F00A2131E133E133C137C13785BA2485A485AA2485A
48C7FC120E5A5A5A5A5A16647BCA26>I<14FF010713E090381F81F890383E007C01FC13
3F4848EB1F8049130F4848EB07C04848EB03E0A2000F15F0491301001F15F8A2003F15FC
A390C8FC4815FEA54815FFB3A46C15FEA56D1301003F15FCA3001F15F8A26C6CEB03F0A3
6C6CEB07E0000315C06D130F6C6CEB1F806C6CEB3F00013E137C90381F81F8903807FFE0
010090C7FC28447CC131>48 D<121EEA7F80A2EAFFC0A4EA7F80A2EA1E00C7FCB3A5121E
EA7F80A2EAFFC0A4EA7F80A2EA1E000A2B78AA1B>58 D<007FBAFCBB1280A26C1900CEFC
B0007FBAFCBB1280A26C190041187BA44C>61 D<003FB912F8A3903BF0001FF8001F0180
6D481303003EC7150048187C0078183CA20070181CA30060180CA5481806A5C81600B3B3
A54B7EED7FFE49B77EA33F447DC346>84 D<EB01FE903807FFC090381F03F090387E00FC
49137E48487F485A4848EB1F80000F15C049130F121F484814E01507A2007F15F090C7FC
A25AA390B6FCA290C9FCA67EA27FA2123F16306C7E1670000F15606D14E06C6C14C00003
14016C6CEB03806C6CEB0700013E131E90381F80F8903803FFE0010090C7FC242E7DAC2B
>101 D<EA01FC12FFA3120712031201B3B3B3A5487EB512F8A315457DC41C>108
D<90383FE0183901FFFC383907E01F78390F0003F8001E1301481300007C1478127800F8
1438A21518A27EA27E6C6C13006C7E13FC383FFFE06C13FC6C13FF6C14C06C14E0C614F0
011F13F81300EC0FFC140300C0EB01FE1400157E7E153EA27EA36C143C6C147C15786C14
F86CEB01F039F38003E039F1F00F8039E07FFE0038C00FF01F2E7DAC26>115
D<1306A5130EA4131EA3133E137EA213FE12011207001FB512F0B6FCA2C648C7FCB3A415
0CAA017E131C017F1318A26D133890381F8030ECC070903807E0E0903801FFC09038007F
001E3E7EBC26>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmmi12 12 33
/Fk 33 122 df<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A78891B>58
D<121EEA7F8012FF13C0A213E0A3127FEA1E601200A413E013C0A312011380120313005A
1206120E5A5A5A12600B1D78891B>I<F001C0F007E0181FF07FC0943801FF00EF07FCEF
1FF0EF7FC04C48C7FCEE0FFCEE3FF0EEFFC0030390C8FCED0FF8ED3FE0EDFF80DA03FEC9
FCEC1FF8EC7FE0903801FF80D907FECAFCEB1FF0EB7FC04848CBFCEA07FCEA1FF0EA7FC0
48CCFCA2EA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FE903801FF809038007FE0
EC1FF8EC03FE913800FF80ED3FE0ED0FF8ED03FF030013C0EE3FF0EE0FFCEE01FF933800
7FC0EF1FF0EF07FCEF01FF9438007FC0F01FE01807F001C03B3878B44C>I<1618163C16
7CA2167816F8A216F01501A216E01503A216C01507A21680150FA2ED1F00A2151E153EA2
153C157CA2157815F8A25D1401A24A5AA25D1407A25D140FA292C7FC5CA2141E143EA214
3C147CA25CA25C1301A25C1303A25C1307A25C130FA291C8FC5BA2133EA2133C137CA213
7813F8A25B1201A25B1203A2485AA25B120FA290C9FC5AA2121E123EA2123C127CA21278
12F8A25A126026647BCA31>I<127012FCB4FCEA7FC0EA1FF0EA07FCEA01FF38007FC0EB
1FF0EB07FE903801FF809038007FE0EC1FF8EC03FE913800FF80ED3FE0ED0FF8ED03FF03
0013C0EE3FF0EE0FFCEE01FF9338007FC0EF1FF0EF07FCEF01FF9438007FC0F01FE0A2F0
7FC0943801FF00EF07FCEF1FF0EF7FC04C48C7FCEE0FFCEE3FF0EEFFC0030390C8FCED0F
F8ED3FE0EDFF80DA03FEC9FCEC1FF8EC7FE0903801FF80D907FECAFCEB1FF0EB7FC04848
CBFCEA07FCEA1FF0EA7FC048CCFC12FC12703B3878B44C>I<91B87E19F019FC02009039
C00007FF6F489038007FC003FFED1FE0737E93C86C7E737E19014A707E5D1A7FA20203EF
3F805DA21BC014075DA3140F4B17E0A3141F4B17C0A3143F4B167FA3027F18804B16FFA3
02FF180092C95A62A24917034A5F19076201034D5A5C4F5A620107173F4A5F4FC7FC19FE
010F4C5A4A15034E5AF00FE0011F4C5A4A4B5A06FFC8FC013FED01FCEF0FF84AEC3FE001
FF913803FF80B848C9FC17F094CAFC4B447CC351>68 D<027FB512F8A217F09139007FF0
00ED3FC0157FA25EA315FF93C7FCA35C5DA314035DA314075DA3140F5DA3141F5DA3143F
5DA3147F5DA314FF92C8FCA35B5CA313035CA313075CA3130F5CA2131FA25CEB7FF0007F
B512F0B6FCA22D447DC32B>73 D<91B500C0020FB5128082A2DA007F9239007FE00070ED
1F8074C7FCDBEFF8150E15CF03C7160C70151C1401DB83FE1518A2DB81FF153814030300
1630831A704A6D7E02061760163F7114E0140E020C6D6C5CA2706C1301141C021801075D
83190302386D7E023094C8FC1601715B147002606DEB8006A294387FC00E14E04A023F13
0C18E0191C0101ED1FF04A1618170FF0F838130391C83807FC30A2943803FE705B010603
01136018FF19E0010E81010C5F187FA2131C0118705A1338181F137801FC70C9FCEA03FF
B512F884180651447CC34E>78 D<9339FF8001800307EBF003033F13FC9239FF007E07DA
01F8EB0F0FDA07E09038079F004A486DB4FC4AC77E023E804A5D187E5C495A183C495AA2
13074A1538A3130F183080A295C7FC806D7E8014FF6D13E015FC6DEBFFC06D14FC6E13FF
6E14C0020F80020314F8EC003F03077F9238007FFE160F1603707E8283A283A21206A400
0E163EA2120C177E001E167CA25F5F003F15014C5A6D4A5A4C5A486C4AC8FC6D143ED87C
F85CD8787E495A3AF01FC00FE0D8E007B51280010149C9FC39C0003FF039487BC53C>83
D<48BA12C05AA291C7D980001380D807F092C7121F4949150F0180170748C75B1903120E
48020316005E12181238003014074C5C00701806126000E0140F485DA3C8001F92C7FC5E
A3153F5EA3157F5EA315FF93CAFCA35C5DA314035DA314075DA3140F5DA3141F5DA3143F
5DA2147FA214FF01037F001FB612FCA25E42447EC339>I<003FB500F80103B512E0A326
003FF8C8381FF800D91FE0ED07E0013F705A615C96C7FC60017F16065CA2180E01FF160C
91C9FCA2181C4817185BA21838000317305BA21870000717605BA218E0120F495EA21701
121F495EA21703123F4993C8FCA25F127F491506A2170E00FF160C90C9FC171CA2171817
3817304816705F6C5E6C15014C5A4CC9FC6C150E6D141E001F5D6D5C6C6CEB01E06C6C49
5A6C6CEB1F80C6B401FECAFC90387FFFF8011F13E0010190CBFC43467AC342>I<007FB5
6C91381FFFF8B65DA2000101E0C8000313006C0180ED01FCF000F0614E5AA2017F4C5A96
C7FC1806A2606E5DA2013F5E1870186060A24D5A6E4AC8FCA2011F1506170E170C5FA26E
5C5FA2010F5D16015F4CC9FCA26E13065EA201075C5EA25E16E06E5B4B5A13034BCAFC15
06A25D151CECFE185D13015D5DA26E5AA292CBFC5C13005C5CA25CA25C45467BC339>I<
EC0FC0EC7FF0903901F8381C903907E01C7E90380FC00E90393F0007FE496D5A13FE485A
49130100035D485A120F491303001F5DA2485A1507007F5D5BA2150F00FF5D90C7FCA215
1F5E5AA2033F1330EE00701760A24B13E017C015FE007E130102031301003ED9073E1380
003F010E13036C011C14006C6C486C5A3A07C0F00F0E3A01FFC007FC3A007F0001F02C2D
7CAB33>97 D<EC07F8EC3FFF9138FC07C0903903F000E049481370D91F80133049C71270
017EEB03F801FE1307485A4848EB0FF012075B000FEC07C0484890C7FCA2485AA2127F5B
A312FF90C9FCA45AA5161816381670007E15E0ED01C06CEC0380ED07006C6C131E000F14
383907C001F03903F00FC02600FFFEC7FCEB1FF0252D7CAB2A>99
D<EE01FC16FFA3EE03F816011603A217F0A21607A217E0A2160FA217C0A2161FA21780A2
163FA21700EC0FC091387FF07F903801F838903907E01C7E90380FC00E90393F0007FE49
130301FE5C485A491301120348485C120F491303121F5E485A1507127F495CA2150F12FF
90C75BA2151FA2485DA2033F13301770EE0060A24B13E017C015FE007E13010203130100
3ED9073E1380003F010E13036C011C14006C6C486C5A3A07C0F00F0E3A01FFC007FC3A00
7F0001F02E467CC433>I<EC07F8EC3FFE903901FC0780903903F003C090390FC001E090
381F8000017FC7FC01FE1470485A484814F0000715E05B000F1401484814C015034848EB
0780ED1F0015FC007FEB1FF090B5128002F0C7FC0180C8FC12FF90C9FCA55AA41618007E
15381670007F15E06CEC01C0ED03806CEC07006C6C131E6D13383907E001F03901F00FC0
26007FFEC7FCEB1FF0252D7CAB2D>I<EE07E0EE1FF8EE7C1CEEF80E923801F03E923803
E07F17FFED07E116C117FE92380FC0FC177817004B5AA4153F93C7FCA45D157EA491B612
80A3DA00FCC7FCA314015DA414035DA414075DA4140F5DA5141F5DA4143F92C8FCA45C14
7EA45CA45C1301A25CA2EA1C03007F5B12FF5C13075C4848C9FC12F8EA601EEA783CEA1F
F0EA07C0305A7BC530>I<157E913803FF8091390FC1E0E091391F0073F0027E13334A13
3F4948131F010315E04948130F495AA2494814C0133F4A131F137F91C713805B163F5A49
1500A25E120349147EA216FEA2495CA21501A25EA21503150700015D150F0000141F6D13
3F017CEB77E090383E01E790381F078F903807FE0FD901F85B90C7FC151FA25EA2153FA2
93C7FCA2001C147E007F14FE485C4A5A140348495AEC0FC000F8495A007C01FEC8FC381F
FFF8000313C02C407EAB2F>I<14FE137FA3EB01FC13001301A25CA21303A25CA21307A2
5CA2130FA25CA2131FA25CED3FC090393F81FFF0913887C0FC91380E007E023C133ED97F
70133F4A7F4A14805C13FF91C7FC5BA24848143F17005BA200035D167E5BA2000715FE5E
5B1501000F5DA24913035E001F1607030713064914E0150F003FEDC00E170C90C7141CEE
80184816381730007E167017E000FE91380781C0EEC38048913801FF000038EC007C3046
7BC438>I<141E143F5C5CA3147E143891C7FCAE133EEBFF803801C3C0380781E0380601
F0120E121CEA180312381230A2EA700700605BA2EAE00F00C05BEA001F5CA2133F91C7FC
A25B137E13FE5BA212015BEC03800003140013F01207495A1406140E140CEBC01C141814
385C00035BEBE1C0C6B45A013EC7FC19437DC121>I<163C16FEA21501A316FCED007016
00AE15FCEC03FF91380F0780021C13C091383803E0147014E014C01301EC800713031400
5B0106130F130E010C14C090C7FC151FA21680A2153FA21600A25DA2157EA215FEA25DA2
1401A25DA21403A25DA21407A25DA2140FA25DA2141F5DA2143F001C91C7FC127F48137E
5CA248485AEB03E038F807C038781F80D83FFEC8FCEA07F0275681C128>I<14FE137FA3
EB01FC13001301A25CA21303A25CA21307A25CA2130FA25CA2131FA25C163F013FECFFC0
923803C0E09138000703ED1E0F491338ED701F017E13E0EC01C001FE018013C00203EB07
004948C8FC140E00015B5C495A5C3803FBC001FFC9FC8014F83807F1FE9038F03F809038
E00FE06E7E000F130381EBC001A2001FED01C017801380A2003F15031700010013F05E48
1506160E007E150C161C00FE01005BED787048EC3FE00038EC0F802B467BC433>I<EB03
F8EA01FFA3380007F013031307A214E0A2130FA214C0A2131FA21480A2133FA21400A25B
A2137EA213FEA25BA21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2123F
A290C7FCA248136014E0007E13C0A2130100FE138012FCA21303007C13005B1306EA3E0E
EA1E1CEA0FF8EA03E015467CC41D>I<01F8D903FCEC7F80D803FED91FFF903803FFE0D8
071F903B7C0FC00F81F83E0E0F80E007E01C00FC001C9026C3C0030178137C271807C700
D9F0E0137E02CE902601F1C0133E003801DCDAFB80133F003001D892C7FCD90FF814FF00
70495C0060495CA200E04949485CD8C01F187E4A5C1200040715FE013F6091C75BA2040F
14014960017E5D1903041F5D13FE494B130762043F160E0001060F130C4992C713C0191F
4CED801C00031A1849027E1638F2003004FE167000071A60494A16E0F201C0030192380F
0380000FF18700494AEC03FED80380D90070EC00F84F2D7DAB55>I<01F8EB03FCD803FE
EB1FFFD8071F90387C0FC03B0E0F80E007E03A0C07C3C003001CD9C7007F001801CE1301
003801DC80003013D8EB0FF800705B00605BA200E0491303D8C01F5D5C12001607013F5D
91C7FCA2160F495D137E161F5F13FE49143F94C7FC187000014B136049147E16FE4C13E0
000317C049150104F81380170300071700495D170EEE781C000FED7C3849EC1FF0D80380
EC07C0342D7DAB3A>I<EC03FCEC3FFF9138FE07C0903903F003F049486C7E90391FC000
FC49C7127C49147E01FE147F484880485A000716805B120F485AA2485A167F127F5BA216
FF00FF160090C8FCA25D5E5A4B5AA25E15075E4B5A151F007E5D4B5A6C4AC7FC15FE391F
8001F86C6C485A3907E00FC03901F03F802600FFFCC8FCEB1FE0292D7CAB2F>I<D903E0
EB3F80D90FF8EBFFE0903A1C7C03C0F8903A383E07007C9026703F1E137E9026601F387F
5D01E00160EB1F8001C013E04A5A00014A14C0018090C7FCA200035B1300147EC7FC02FE
143FA25CA20101157F18805CA2010315FF18005C5F010714015F4A13035F010F14075F4C
5A5F496C495A4CC7FC02B8137E02985B90393F9C01F891388F07E0913803FF80DA00FCC8
FC4990C9FCA2137EA213FEA25BA21201A25BA21203A21207B512F0A25C323F83AB31>I<
01F8EB0FC0D803FEEB7FF0D8070FEBF038000E903883C07C3A0C07C701FC001C13CE0018
EBDC03003813D8003013F8D90FF013F800709038E000E0006015005C12E0EAC01F5C1200
A2133F91C8FCA35B137EA313FE5BA312015BA312035BA312075BA3120F5BEA0380262D7D
AB2C>114 D<EC0FF0EC7FFE903901F00F809039078001C049C712E0011E14605BED01F0
491307A201F8EB0FE05B7FED03806D90C7FC7F7F14F86DB47E15E06D13F86D7F01077F13
00EC07FF140081ED3F80151F120E003FEC0F00487EA25D48C7121EA200FC5C12605D0070
5C6C495A6CEB07C0260F803FC7FC3803FFFC38007FE0242D7BAB2E>I<141C147EA314FE
5CA313015CA313035CA313075CA2007FB512FCB6FC15F839000FC000A2131F5CA3133F91
C7FCA35B137EA313FE5BA312015BA312035BA21570000714605B15E015C0000F130101C0
13801403EC070000071306140E5C6C6C5A000113F03800FFC0013FC7FC1E3F7EBD23>I<
133ED9FF8014E02603C3C0EB03F0380703E0380601F0000E1507121CD818035D12380030
150FA2D870075D00605B161FEAE00F00C0495CEA001F4A133FA2013F92C7FC91C7FC5E5B
017E147EA216FE13FE495CA20301EB01801703484802F81300A25F0303130616F0000014
07030F130E6D010D130C017C011D131C033913186D9038F0F838903A1F03C07870903A07
FF803FE0903A01FC000F80312D7DAB38>I<013E140ED9FF80EB3F802603C3C0137F3807
03E0380601F0120E121CD81803143F0038151F0030150FA2D87007140700605BA2D8E00F
150000C0497FEA001F4A5B1606133F91C7FC160E49140C137EA2161C01FE14185B163816
3016704848146016E05E150100005D15036D49C7FC1506017C130E017E5B6D137890380F
81E06DB45AD900FEC8FC292D7DAB2F>I<133ED9FF8014E02603C3C0EB03F0380703E038
0601F0000E1507001C16E0EA180312380030150F007016C0EA60075C161FD8E00F158000
C05BEA001F4A133F1700133F91C7FC5E49147E137EA216FE01FE5C5BA215015E485AA215
035EA200001407150F6D5C017C131F153F6D13FF90391F03CFC0903807FF8F903801FC0F
90C7121F5EA2153F93C7FCD807C05BD81FE0137E5DA24848485A4A5A01805B39380007C0
0018495A001C49C8FC6C137C380781F83803FFE0C66CC9FC2C407DAB30>121
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fl cmmi8 8 3
/Fl 3 111 df<131FEA03FFA2EA003FA2133EA2137EA2137CA213FCA25BA21201143F90
38F1FFC09038F3C1F03803FF0001FC7F5BA2485A5BA25B000F13015D1380A2001F13035D
1300140748ECC04016C0003E130F1580007E148191381F0180007C1403ED070000FCEB0F
06151E48EB07F80070EB01E0222F7DAD29>104 D<137CEA0FFCA21200A213F8A21201A2
13F0A21203A213E0A21207A213C0A2120FA21380A2121FA21300A25AA2123EA2127EA212
7CA2EAFC08131812F8A21338133012F01370EAF860EA78E0EA3FC0EA0F000E2F7DAD15>
108 D<3907C007E0391FE03FF83918F8783E393879E01E39307B801F38707F00126013FE
EAE0FC12C05B00815C0001143E5BA20003147E157C5B15FC0007ECF8081618EBC00115F0
000F1538913803E0300180147016E0001F010113C015E390C7EAFF00000E143E251F7E9D
2B>110 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmr8 8 5
/Fm 5 85 df<130C133C137CEA03FC12FFEAFC7C1200B3B113FE387FFFFEA2172C7AAB23
>49 D<EB7F803801FFF0380780FC380E003F48EB1F8048EB0FC05A0060EB07E012F000FC
14F07E1403A3007C1307C7FCA215E0140F15C0141F1580EC3F00147E147C5C495A495A49
5A495A011EC7FC5B5B4913305B485A4848136048C7FC000E14E0001FB5FC5A4814C0B6FC
A21C2C7DAB23>I<EB3FC03801FFF03807C0FC380E007E487FEC1F80003F14C0A2EB800F
1300A2000C131FC7FC1580A2EC3F00143E5C5CEB03F0EBFFC014F0EB00FC143FEC1F8015
C0140F15E0A2EC07F0A21238127C12FEA3EC0FE012F8006014C00070131F6C1480001EEB
3F00380780FC3801FFF038007FC01C2D7DAB23>I<D8FFF8923807FFC06D5D0003EFF000
00015F01BE151BA2019F1533A3D98F801463A2D987C014C3A2D983E0EB0183A3D981F0EB
0303A2D980F81306A3027C130CA26E1318A36E1330A291380F8060A2913807C0C0A39138
03E180A2913801F300A3EC00FEA2157C487ED80FF04B7EB5D93801B512C0A23A2D7DAC41
>77 D<007FB712F8A29039000FC003007C150000701638A200601618A200E0161CA24816
0CA5C71500B3A94A7E011FB512E0A22E2D7EAC33>84 D E
%EndDVIPSBitmapFont
/Fn 171[70 1[83 1[77 89 1[96 70 2[32 2[70 77 3[83 65[{
TeXBase1Encoding ReEncodeFont}10 114.77 /Helvetica-Bold
rf /Fo 130[50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 1[50 1[50
50 50 5[50 50 50 50 1[50 50 1[50 50 2[50 50 50 50 50
1[50 50 50 50 1[50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 3[50 50 50 50 33[{
TeXBase1Encoding ReEncodeFont}77 83.022 /Courier rf /Fp
133[60 66 66 93 66 73 40 66 47 73 73 73 73 106 33 66
1[33 73 73 40 66 73 66 73 66 9[113 80 86 73 80 86 93
80 1[86 100 73 1[66 33 1[93 73 80 86 86 86 86 6[40 66
66 66 66 66 66 66 66 66 66 33 33 40 42[73 2[{
TeXBase1Encoding ReEncodeFont}60 119.552 /Helvetica-Bold
rf /Fq 133[60 60 60 60 60 60 60 60 60 1[60 60 60 60 60
60 60 60 60 60 60 60 60 60 60 60 1[60 1[60 1[60 2[60
60 60 60 60 60 60 1[60 60 60 60 60 1[60 60 60 60 60 60
60 60 60 60 60 1[60 60 60 60 60 60 2[60 60 1[60 60 60
60 60 60 60 60 60 60 60 60 60 2[60 60 60 34[{
TeXBase1Encoding ReEncodeFont}75 99.6264 /Courier rf
/Fr 133[72 80 80 112 80 88 48 80 56 1[88 88 88 128 40
80 1[40 88 88 48 80 88 80 88 80 9[135 1[104 88 96 104
1[96 112 104 120 2[80 40 1[112 88 1[104 104 104 104 10[80
80 80 80 80 80 2[40 48 3[48 48 40[{TeXBase1Encoding ReEncodeFont}51
143.462 /Helvetica-Bold rf /Fs 75[33 57[44 50 50 72 50
55 33 39 44 1[55 50 55 83 28 55 1[28 55 50 33 44 55 44
55 50 9[100 1[72 66 55 72 1[61 78 4[50 39 1[78 61 66
1[72 66 72 6[33 50 50 50 50 50 50 50 50 50 50 28 25 43[55
2[{TeXBase1Encoding ReEncodeFont}54 99.6264 /Times-Bold
rf /Ft 171[49 1[53 1[44 58 1[71 49 2[27 2[44 49 3[58
65[{TeXBase1Encoding ReEncodeFont}10 79.701 /Times-Roman
rf /Fu 75[69 58[115 115 161 1[126 69 115 80 1[126 126
126 184 57 115 1[57 126 126 69 115 126 115 126 115 9[195
2[126 1[149 1[138 6[57 2[126 138 1[149 149 149 9[115
115 115 115 115 115 115 49[{TeXBase1Encoding ReEncodeFont}40
206.559 /Helvetica-Bold rf
%DVIPSBitmapFont: Fv cmsy10 12 15
/Fv 15 111 df<007FB912E0BA12F0A26C18E03C04789A4D>0 D<147014F8A814700078
15F0007C1401B4EC07F8D87F80EB0FF0D83FE0EB3FE0D80FF0EB7F80D803F8EBFE003900
FE73F890383F77E090380FFF80D903FEC7FCEB00F8EB03FE90380FFF8090383F77E09038
FE73F83903F870FED80FF0EB7F80D83FE0EB3FE0D87F80EB0FF0D8FF00EB07F8007CEC01
F000781400C7140014F8A81470252B7AAD32>3 D<933803FFE0047F13FF0303B612E003
0F15F8923A7FFE003FFFDBFFC001017FDA03FEC8EA3FE0DA0FF8ED0FF8DA1FC0ED01FC4A
486F7E02FECAEA3F804948717ED903F0EF07E04948717E4948717E4948717E49CC127E01
7E85017C8549737E0001874919074848737EA24848737E000F8749190090CE1278481B7C
A2003E87A2003C1B1EA2007C1B1FA2007887A200F81C80A2481B07AC6C1B0FA200781C00
A2007C63A2003C1B1EA2003E1B3EA26C63A26C1B786D1AF86D19010007636C6C4F5AA26C
6C4F5A6D190F000063017C4FC7FC017E616D197E6D6C606D6C4D5A6D6C4D5A6D6C4D5AD9
01FCEF1FC06D6C4D5ADA3F8004FEC8FC6E6C4B5ADA0FF8ED0FF8DA03FEED3FE0912600FF
C0903801FF80DB7FFE013F90C9FC030FB612F8030315E0DB007F91CAFC040313E0595C7B
C664>13 D<49B4FC010F13E0013F13F8497F48B6FC4815804815C04815E04815F0A24815
F8A24815FCA3B712FEA96C15FCA36C15F8A26C15F0A26C15E06C15C06C15806C15006C6C
13FC6D5B010F13E0010190C7FC27277BAB32>15 D<19E0F003F0180FF03FE0F0FF809438
03FE00EF0FF8EF3FE0EFFF80DC03FEC7FCEE0FF8EE3FE0EEFF80DB03FEC8FCED1FF8ED7F
E0913801FF80DA07FEC9FCEC1FF0EC7FC04948CAFCEB07FCEB1FF0EB7FC04848CBFCEA07
FCEA1FF0EA7FC048CCFCA2EA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF
9038007FC0EC1FF0EC07FC913801FF809138007FE0ED1FF8ED07FE923800FF80EE3FE0EE
0FF8EE03FE933800FF80EF3FE0EF0FF8EF03FE943800FF80F03FE0F00FF01803F000E019
00B0007FB912E0BA12F0A26C18E03C4E78BE4D>20 D<127012FCB4FCEA7FC0EA1FF0EA07
FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007FC0EC1FF0EC07FC913801FF80913800
7FE0ED1FF8ED07FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FE0EF0FF8EF03FE
943800FF80F03FE0F00FF0A2F03FE0F0FF80943803FE00EF0FF8EF3FE0EFFF80DC03FEC7
FCEE0FF8EE3FE0EEFF80DB03FEC8FCED1FF8ED7FE0913801FF80DA07FEC9FCEC1FF0EC7F
C04948CAFCEB07FCEB1FF0EB7FC04848CBFCEA07FCEA1FF0EA7FC048CCFC12FC1270CDFC
B0007FB912E0BA12F0A26C18E03C4E78BE4D>I<EC0780A3140F92CEFCA25C141EA2143E
143C147C5CA2495A495A1307495A495A49CFFC137E5BEA03F8EA0FE0003FBDFCBE1280A2
003F1C00D80FE0CFFCEA03F8C67E137E7F6D7E6D7E6D7E13036D7E6D7EA2147C143C143E
141EA2141F80A2811407A359347BB264>32 D<1AF0A3861A78A21A7C1A3CA21A3E1A1E1A
1F747EA2747E747E87747E747E1B7E87757EF30FE0F303F8007FBC12FEBE1280A26CF3FE
00CEEA03F8F30FE0F31F8051C7FC1B7E63505A505A63505A505AA250C8FC1A1E1A3E1A3C
A21A7C1A78A21AF862A359347BB264>I<1706170F171FA2173EA2177CA217F8A2EE01F0
A2EE03E0A2EE07C0A2EE0F80A2EE1F00A2163EA25EA25EA24B5AA24B5AA24B5AA24B5AA2
4BC7FCA2153EA25DA25DA24A5AA24A5AA24A5AA24A5AA24AC8FCA2143EA25CA25CA2495A
A2495AA2495AA2495AA249C9FCA2133EA25BA25BA2485AA2485AA2485AA2485AA248CAFC
A2123EA25AA25AA25A1260305C72C600>54 D<0060170C00F0171EB3B3A66C173EA20078
173C007C177C007E17FC003E17F86CEE01F06D15036C6CED07E06C6CED0FC0D803F8ED3F
80D801FEEDFF0026007FC0EB07FCD93FFCEB7FF8010FB612E001031580D9007F01FCC7FC
020713C0373D7BBA42>91 D<913807FFC0027F13FC0103B67E010F15E0903A3FFC007FF8
D97FC0EB07FCD801FEC8B4FCD803F8ED3F80D807E0ED0FC04848ED07E04848ED03F090C9
1201003EEE00F8007E17FC007C177C0078173C00F8173EA248171EB3B3A60060170C373D
7BBA42>I<ED0FE015FF913803FC00EC0FE0EC3FC04A5A4AC7FC5C495AA2495AB3AD495A
A2495A131F495A495A01FEC8FCEA07F8EAFFE0A2EA07F8EA00FEEB7F806D7E6D7E130F6D
7EA26D7EB3AD6D7EA26D7E806E7E6E7EEC0FE0EC03FC913800FFE0150F236479CA32>
102 D<12FEEAFFE0EA07F8EA00FEEB7F806D7E6D7E130F6D7EA26D7EB3AD6D7EA26D7E80
6E7E6E7EEC0FE0EC03FC913800FFE0A2913803FC00EC0FE0EC3FC04A5A4AC7FC5C495AA2
495AB3AD495AA2495A131F495A495A01FEC8FCEA07F8EAFFE048C9FC236479CA32>I<12
6012F0B3B3B3B3B3A81260046474CA1C>106 D<126012F07EA21278127CA2123C123EA2
121E121FA26C7EA212077FA212037FA212017FA26C7EA21378137CA2133C133EA2131E13
1FA26D7EA2130780A2130380A2130180A26D7EA21478147CA2143C143EA280A28081A214
0781A2140381A26E7EA2140081A21578157CA2153C153EA281A2811680A2150716C0A215
0316E0A2ED01F0A2150016F8A21678167CA2163C163EA2161E160C27647BCA32>110
D E
%EndDVIPSBitmapFont
/Fw 136[66 45 45 25 35 30 1[45 45 45 71 25 45 25 25 45
45 30 40 45 40 45 40 13[51 61 4[81 2[35 2[66 51 2[61
8[25 10[25 23 30 45[{TeXBase1Encoding ReEncodeFont}33
90.9091 /Times-Roman rf /Fx 166[53 3[53 44 40 49 53 40
53 53 65 44 2[24 53 53 40 44 53 49 49 53 65[{
TeXBase1Encoding ReEncodeFont}20 72.7272 /Times-Roman
rf /Fy 75[33 29[50 1[44 11[33 13[44 50 50 72 50 50 28
39 33 50 50 50 50 78 28 50 28 28 50 50 33 44 50 44 50
44 3[33 1[33 61 72 72 94 72 72 61 55 66 72 55 72 72 89
61 72 39 33 72 72 55 61 72 66 66 72 92 44 1[56 1[28 28
50 50 50 50 50 50 50 50 50 50 28 25 33 25 56 50 33 33
33 1[83 50 50 1[33 2[33 20[33 5[55 55 2[{TeXBase1Encoding ReEncodeFont}
90 99.6264 /Times-Roman rf /Fz 75[33 28[89 28[39 44 44
66 44 50 28 39 39 50 50 50 50 72 28 44 28 28 50 50 28
44 50 44 50 50 8[61 1[61 72 55 50 61 1[61 72 66 83 55
1[44 33 1[72 1[61 72 66 61 61 6[33 50 50 1[50 50 1[50
50 50 50 1[25 33 25 4[33 36[50 2[{TeXBase1Encoding ReEncodeFont}61
99.6264 /Times-Italic rf /FA 165[73 86 1[113 86 1[73
66 80 1[66 86 86 106 1[86 47 40 2[66 73 86 80 80 86 6[33
58[{TeXBase1Encoding ReEncodeFont}21 119.552 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
letter
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 550 1539 a FA(SOO)-5 b(T)f(:)31 b(A)f(J)-7 b(A)-16
b(V)g(A)30 b(BYTECODE)h(OPTIMIZA)-13 b(TION)31 b(FRAMEW)o(ORK)2049
1804 y Fz(by)1782 1936 y(Raja)24 b(V)-11 b(all)2156 1937
y(\264)2151 1936 y(ee-Rai)1525 2201 y Fy(School)25 b(of)f(Computer)h
(Science)1527 2333 y(McGill)f(Uni)n(v)o(ersity)-6 b(,)22
b(Montreal)1824 2598 y(October)j(2000)545 4041 y Fx(A)i(T)t(H)t(E)t(S)t
(I)t(S)k(S)t(U)t(B)t(M)t(I)t(T)t(T)t(E)t(D)g(T)s(O)c(T)t(H)t(E)i
Fw(F)n Fx(A)q(C)t(U)t(L)m(T)t(Y)g(O)t(F)f Fw(G)t Fx(R)t(A)t(D)t(U)q(A)l
(T)t(E)g Fw(S)t Fx(T)t(U)t(D)t(I)t(E)t(S)j(A)t(N)t(D)26
b Fw(R)t Fx(E)t(S)t(E)t(A)t(R)t(C)t(H)724 4166 y(I)t(N)h(P)m(A)t(RT)t
(I)t(A)t(L)k(F)t(U)t(L)t(FI)t(L)t(L)t(M)t(E)t(N)t(T)i(O)t(F)28
b(T)t(H)t(E)g(R)t(E)t(Q)s(U)t(I)t(R)t(E)t(M)t(E)t(N)t(T)t(S)33
b(F)t(O)t(R)27 b(T)t(H)t(E)i(D)t(E)t(G)t(R)t(E)t(E)g(O)t(F)1687
4290 y Fw(M)t Fx(A)t(S)t(T)t(E)t(R)h(O)t(F)d Fw(S)t Fx(C)t(I)t(E)t(N)t
(C)t(E)1335 5130 y Fy(Cop)o(yright)1791 5127 y(c)1763
5130 y Fv(\015)e Fy(2000)f(by)h(Raja)g(V)-11 b(all)6
b(\264)-39 b(ee-Rai)p eop
%%Page: 2 2
2 1 bop 300 1238 a Fu(Abstract)300 1752 y Fy(Ja)n(v)n(a)35
b(pro)o(vides)g(man)o(y)g(attracti)n(v)o(e)f(features)j(such)e(as)h
(platform)f(independence,)j(e)o(x)o(ecution)d(safety)-6
b(,)300 1885 y(garbage)20 b(collection)g(and)g(object)g(orientation.)28
b(These)21 b(features)g(f)o(acilitate)f(application)f(de)n(v)o
(elopment)300 2017 y(b)n(ut)26 b(are)i(e)o(xpensi)n(v)o(e)d(to)h
(support;)g(applications)g(written)g(in)g(Ja)n(v)n(a)h(are)g(often)g
(much)f(slo)n(wer)g(than)g(their)300 2150 y(counterparts)37
b(written)h(in)f(C)h(or)g(C++.)71 b(T)-8 b(o)37 b(use)h(these)g
(features)g(without)e(ha)n(ving)i(to)f(pay)h(a)g(great)300
2282 y(performance)25 b(penalty)-6 b(,)24 b(sophisticated)f
(optimizations)f(and)j(runtime)f(systems)f(are)j(required.)446
2464 y(W)-8 b(e)23 b(present)h(S)t Ft(O)t(O)q(T)r Fy(,)i(a)c(frame)n(w)
o(ork)g(for)h(optimizing)d(Ja)n(v)n(a)i(bytecode.)30
b(The)22 b(frame)n(w)o(ork)g(is)g(imple-)300 2597 y(mented)k(in)f(Ja)n
(v)n(a)h(and)g(supports)f(three)i(intermediate)e(representations)g(for)
i(representing)e(Ja)n(v)n(a)h(byte-)300 2729 y(code:)39
b(B)q Ft(A)t(F)r Fy(,)32 b(a)d(streamlined)e(representation)g(of)i
(bytecode)e(which)h(is)g(simple)f(to)h(manipulate;)i(J)t
Ft(I)t(M)t Fy(-)302 2862 y Ft(P)t(L)t(E)r Fy(,)35 b(a)c(typed)g
(3-address)g(intermediate)f(representation)g(suitable)h(for)g
(optimization;)g(and)i(G)t Ft(R)t(I)t(M)t(P)300 2994
y Fy(an)d(aggre)o(gated)e(v)o(ersion)h(of)j(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(suitable)28 b(for)i(decompilation.)45 b(S)t Ft(O)t(O)q(T)35
b Fy(also)29 b(contains)g(a)h(set)f(of)300 3126 y(transformations)i
(between)h(these)g(intermediate)f(representations,)j(and)e(an)g
(application)f(program-)300 3259 y(ming)e(interf)o(ace)h(\(API\))g(is)f
(pro)o(vided)g(to)g(write)h(optimizations)d(and)i(analyses)h(on)f(Ja)n
(v)n(a)g(bytecode)g(in)300 3391 y(these)c(forms.)446
3574 y(In)39 b(order)f(to)g(demonstrate)g(the)g(usefulness)f(of)i(the)f
(frame)n(w)o(ork,)j(we)e(ha)n(v)o(e)f(implemented)e(in-)300
3706 y(traprocedural)f(and)g(whole)f(program)h(optimizations.)58
b(T)-8 b(o)35 b(sho)n(w)f(that)g(whole)h(program)f(bytecode)300
3838 y(optimization)26 b(can)i(gi)n(v)o(e)f(performance)h(impro)o(v)o
(ements,)e(we)i(pro)o(vide)f(e)o(xperimental)g(results)g(for)h(10)300
3971 y(lar)n(ge)23 b(benchmarks,)f(including)f(8)i(SPECjvm98)f
(benchmarks)g(running)f(on)i(JDK)f(1.2.)29 b(These)23
b(results)300 4103 y(sho)n(w)h(a)h(speedup)f(of)h(up)g(to)f(38\045.)
2072 5509 y(ii)p eop
%%Page: 3 3
3 2 bop 300 1238 a Fu(R)472 1235 y(\264)449 1238 y(esum)1012
1235 y(\264)989 1238 y(e)300 1752 y Fy(Ja)n(v)n(a)29
b(poss)6 b(\036)-39 b(ede)29 b(beaucoup)g(de)g(propri)6
b(\264)-39 b(et)6 b(\264)-39 b(es)29 b(attrayantes)g(telles)f(que)h
(l'ind)6 b(\264)-39 b(ependance)29 b(de)h(plateforme,)300
1885 y(la)25 b(s)8 b(\210)-41 b(uret)6 b(\264)-39 b(e)25
b(d'e)o(x)6 b(\264)-39 b(ecution,)25 b(le)g(ramasse-miettes)f(et)h
(l'orientation)f(d'objets.)31 b(Ces)26 b(dispositifs)d(f)o(acilitent)
300 2017 y(le)36 b(d)6 b(\264)-39 b(ev)o(eloppement)33
b(d'applications)i(mais)f(sont)h(chers)41 b(\036)-38
b(a)36 b(supporter;)k(les)35 b(applications)40 b(\264)-39
b(ecrites)36 b(en)300 2150 y(Ja)n(v)n(a)26 b(sont)f(souv)o(ent)g
(beaucoup)h(plus)f(lentes)h(que)g(leurs)f(contre-parties)32
b(\264)-39 b(ecrites)27 b(en)f(C)g(ou)g(C++.)36 b(Pour)300
2282 y(utiliser)21 b(ces)i(dispositifs)e(sans)h(de)n(v)n(oir)g(payer)g
(une)h(grande)g(p)6 b(\264)-39 b(enalit)6 b(\264)-39
b(e)22 b(d'e)o(x)6 b(\264)-39 b(ecution,)22 b(des)g(optimisations)300
2415 y(sophistiqu)6 b(\264)-39 b(ees)23 b(et)i(des)f(syst)6
b(\036)-39 b(emes)24 b(d'e)o(x)6 b(\264)-39 b(ecution)24
b(sont)g(e)o(xig)6 b(\264)-39 b(es.)446 2597 y(Nous)38
b(pr)6 b(\264)-39 b(esentons)39 b(S)t Ft(O)t(O)q(T)r
Fy(,)k(un)38 b(cadre)g(pour)g(optimiser)e(le)i(bytecode)g(de)f(Ja)n(v)n
(a.)70 b(Le)38 b(cadre)g(est)300 2729 y(programm)6 b(\264)-39
b(e)36 b(en)g(Ja)n(v)n(a)g(et)g(supporte)g(trois)g(repr)6
b(\264)-39 b(esentations)35 b(interm)6 b(\264)-39 b(ediaires)35
b(pour)i(le)f(bytecode)g(de)300 2862 y(Ja)n(v)n(a:)f(B)q
Ft(A)t(F)r Fy(,)29 b(une)d(repr)6 b(\264)-39 b(esentation)26
b(simpli\002)6 b(\264)-39 b(ee)25 b(du)h(bytecode)g(qui)f(est)h(simple)
k(\036)-38 b(a)26 b(manipuler;)i(J)t Ft(I)t(M)t(P)t(L)t(E)r
Fy(,)300 2994 y(une)f(repr)6 b(\264)-39 b(esentation)26
b(interm)6 b(\264)-39 b(ediaire)31 b(\036)-38 b(a)27
b(3)f(addresses)h(appropri)6 b(\264)-39 b(ee)32 b(\036)-38
b(a)27 b(l'optimisation;)d(et)29 b(G)t Ft(R)t(I)t(M)t(P)r
Fy(,)i(une)300 3126 y(v)o(ersion)i(agr)6 b(\264)-39 b(eg)6
b(\264)-39 b(ee)34 b(de)i(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(appropri)6 b(\264)-39 b(ee)39 b(\036)-38 b(a)34 b(la)f(d)6
b(\264)-39 b(ecompilation.)58 b(S)t Ft(O)t(O)q(T)38 b
Fy(contient)g(\264)-38 b(egalement)32 b(un)300 3259 y(ensemble)f(de)h
(transformations)f(entre)h(ces)g(repr)6 b(\264)-39 b(esentations)32
b(interm)6 b(\264)-39 b(ediaires,)32 b(et)g(une)g(interf)o(ace)h(de)300
3391 y(programmation)21 b(d'application)h(\(api\))h(est)f(fournie)h
(pour)28 b(\264)-38 b(ecrire)23 b(des)g(optimisations)d(et)j(des)f
(analyses)300 3524 y(sur)j(le)f(bytecode)h(de)g(Ja)n(v)n(a)f(sous)g
(ces)i(formes.)446 3706 y(A\002n)c(de)f(d)6 b(\264)-39
b(emontrer)21 b(l'utilit)6 b(\264)-39 b(e)19 b(du)i(cadre,)i(nous)d(a)n
(v)n(ons)h(impl)6 b(\264)-39 b(ement)6 b(\264)-39 b(e)19
b(des)i(optimisations)d(intrapro-)300 3838 y(cedurales)26
b(et)g(globales)f(de)i(programme.)33 b(Pour)26 b(prouv)o(er)g(que)g
(l'optimisation)d(globale)i(de)h(bytecode)300 3971 y(de)32
b(programme)e(peut)i(donner)f(des)g(am)6 b(\264)-39 b(eliorations)30
b(d'e)o(x)6 b(\264)-39 b(ecution,)32 b(nous)f(fournissons)f(des)h(r)6
b(\264)-39 b(esultats)300 4103 y(e)o(xp)6 b(\264)-39
b(erimentaux)32 b(pour)h(10)g(applications,)h(y)f(compris)f(8)h
(programmes)f(de)i(SPECjvm98)f(e)o(x)6 b(\264)-39 b(ecutant)300
4236 y(sur)25 b(JDK)f(1.2.)30 b(Les)25 b(r)6 b(\264)-39
b(esultats)24 b(produisent)g(une)h(am)6 b(\264)-39 b(elioration)23
b(allant)h(jusqu')6 b(\036)-39 b(a)24 b(38\045.)2058
5509 y(iii)p eop
%%Page: 4 4
4 3 bop 300 1238 a Fu(Ac)l(kno)m(wledgments)300 1752
y Fy(The)27 b(S)t Ft(O)t(O)q(T)i Fy(frame)n(w)o(ork)c(w)o(as)g(really)g
(a)g(monumental)e(team)h(ef)n(fort.)446 1935 y(I)31 b(w)o(ould)e(lik)o
(e)g(to)h(thank)g(my)f(advisor)l(,)i(Laurie)f(Hendren,)h(who)f(played)g
(a)g(huge)g(role)g(in)g(leading)300 2067 y(the)24 b(project)g(and)g(k)o
(eeping)f(the)h(mood)f(of)i(the)e(de)n(v)o(elopment)f(team)i
(optimistic)e(e)n(v)o(en)h(when)h(the)g(going)300 2200
y(got)g(tough.)30 b(I)25 b(can)g(not)f(thank)h(her)g(enough)f(for)h
(her)g(support)f(and)h(constant)f(encouragement.)446
2382 y(The)31 b(co-de)n(v)o(elopers)e(of)k(S)t Ft(O)t(O)q(T)i
Fy(were)d(k)o(e)o(y)e(in)g(making)h(S)t Ft(O)t(O)q(T)36
b Fy(a)31 b(reality)-6 b(.)47 b(Lar)n(ge)31 b(scale)g(projects)300
2514 y(need)d(man)o(y)f(de)n(v)o(elopers;)h(thanks)f(to)g(all)h(those)f
(people)g(who)h(contrib)n(uted)e(to)k(S)t Ft(O)t(O)q(T)r
Fy(.)42 b(In)28 b(particular)l(,)300 2647 y(I)d(w)o(ould)g(lik)o(e)f
(to)h(thank)g(\(1\))g(P)o(atrick)g(Lam)g(for)g(his)g(superb)f(help)h
(with)g(the)g(maintainence)f(and)h(de)n(v)o(el-)300 2779
y(opment)e(of)h(the)g(later)g(phases)f(of)h(the)g(frame)n(w)o(ork,)g
(\(2\))g(Etienne)f(Gagnon)h(for)g(his)f(e)o(xcellent)h(w)o(ork)f(on)300
2911 y(de)n(v)o(eloping)k(a)i(rob)n(ust)f(typing)g(algorithm)g(for)j(J)
t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)j(and)29 b(\(3\))h(P)o(atrice)f(Pomin)l
(ville)e(for)i(his)g(great)302 3044 y(B)q Ft(A)t(F)h
Fy(bytecode)24 b(optimizer)-5 b(.)446 3226 y(What)31
b(is)f(a)h(frame)n(w)o(ork)g(without)e(users?)49 b(I)31
b(w)o(ould)f(lik)o(e)g(to)h(thank)f(all)g(the)j(S)t Ft(O)t(O)q(T)j
Fy(users)30 b(for)h(the)300 3359 y(feedback)37 b(that)g(the)o(y)f(ga)n
(v)o(e.)65 b(In)37 b(particular)l(,)j(I)d(w)o(ould)f(lik)o(e)g(to)h(gi)
n(v)o(e)e(a)i(special)g(thanks)f(to)g(the)h(tw)o(o)300
3491 y(super)31 b(users,)i(V)-6 b(ijay)30 b(Sundaresan)i(and)f
(Chrislain)g(Raza\002mahef)o(a,)k(who)30 b(ga)n(v)o(e)h(me)g(a)h(great)
f(amount)300 3623 y(of)24 b(support)e(in)i(the)f(early)h(days)f(of)j(S)
t Ft(O)t(O)q(T)j Fy(and)23 b(who)h(tolerated)f(the)g(constant)g
(changes)h(that)f(I)h(made)f(to)300 3756 y(the)i(API.)446
3938 y(Special)39 b(thanks)e(goes)h(to)g(my)f(good)h(friends)f(P)o(aul)
h(Catanu)h(and)f(Karima)g(Kanji-T)-8 b(ajdin)36 b(who)300
4070 y(encouraged)h(me)g(and)g(helped)f(me)h(out)f(both)g(in)g(V)-6
b(ictoria)37 b(and)g(in)f(Montreal.)66 b(I)37 b(w)o(ould)f(also)h(lik)o
(e)300 4203 y(to)f(thank)g(Derek)h(Rayside)f(for)h(his)e(encouragement)
h(and)h(advice)f(as)h(I)f(re-established)g(myself)f(in)300
4335 y(Montr)6 b(\264)-39 b(eal)24 b(in)h(Spring)f(of)h(2000.)446
4518 y(And)36 b(last,)i(b)n(ut)e(not)g(least,)i(I)e(w)o(ould)g(lik)o(e)
f(to)h(thank)g(my)f(f)o(amily)h(members.)64 b(The)o(y)35
b(ha)n(v)o(e)h(been)300 4650 y(e)o(xtremely)19 b(supporti)n(v)o(e)e
(despite)i(the)h(troubled)f(times)g(that)g(we)h(ha)n(v)o(e)g(gone)f
(through)g(recently)-6 b(.)29 b(Thanks)300 4782 y(Mom,)24
b(Dad,)g(Anne-Sita)h(and)g(Manuel!)446 4965 y(This)h(w)o(ork)h(w)o(as)g
(supported)f(by)g(the)h(F)o(onds)f(pour)h(la)f(F)o(ormation)g(de)h
(Chercheurs)h(et)e(l'Aide)32 b(\036)-38 b(a)27 b(la)300
5097 y(Recherche)f(as)f(well)g(as)g(IBM')-5 b(s)24 b(Centre)i(for)f
(Adv)n(anced)f(Studies.)2062 5509 y(i)n(v)p eop
%%Page: 5 5
5 4 bop 300 1238 a Fu(Contents)300 1852 y Fs(Abstract)3175
b(ii)300 2134 y(R)378 2133 y(\264)372 2134 y(esum)599
2133 y(\264)593 2134 y(e)3180 b(iii)300 2416 y(Ackno)o(wledgments)2745
b(i)o(v)300 2698 y(1)99 b(Intr)n(oduction)2862 b(1)449
2880 y Fy(1.1)105 b(Moti)n(v)n(ation)27 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138 b(1)449
3062 y(1.2)105 b(Contrib)n(utions)23 b(of)h(Thesis)52
b(.)e(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138 b(3)679
3244 y(1.2.1)118 b(Design)91 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)138 b(3)679 3427 y(1.2.2)118 b(Implementation)40
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138 b(4)679
3609 y(1.2.3)118 b(Experimental)24 b(V)-11 b(alidation)73
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)138 b(4)449 3791 y(1.3)105 b(Related)25
b(W)-8 b(ork)69 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)138 b(5)449 3973 y(1.4)105 b(Thesis)24 b(Or)n(ganization)37
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138
b(6)300 4255 y Fs(2)99 b(Intermediate)27 b(Repr)n(esentations)2139
b(7)449 4437 y Fy(2.1)105 b(Ja)n(v)n(a)24 b(Bytecode)h(as)g(an)g
(Intermediate)f(Representation)86 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)138 b(8)679 4620 y(2.1.1)118 b(Bene\002ts)26
b(of)f(stack-based)f(representations)91 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138 b(8)679 4802 y(2.1.2)118
b(Problems)25 b(of)g(optimizing)d(stack-based)j(code)75
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)138
b(9)449 4984 y(2.2)107 b(B)q Ft(A)t(F)69 b Fy(.)49 b(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(12)679 5166 y(2.2.1)118 b(Moti)n(v)n(ation)82 b(.)50
b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(12)2075
5509 y(v)p eop
%%Page: 6 6
6 5 bop 679 499 a Fy(2.2.2)118 b(Description)57 b(.)50
b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(12)679
679 y(2.2.3)118 b(Design)25 b(feature:)31 b(Quantity)23
b(and)i(quality)f(of)h(bytecodes)99 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)88 b(14)679 858 y(2.2.4)118 b(Design)25 b(feature:)31
b(No)24 b(JSR-equi)n(v)n(alent)g(instruction)97 b(.)50
b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(14)679 1037
y(2.2.5)118 b(Design)25 b(feature:)31 b(No)24 b(constant)g(pool)96
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)88 b(14)679 1216 y(2.2.6)118 b(Design)25 b(feature:)31
b(Explicit)23 b(local)i(v)n(ariables)84 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(15)679 1396 y(2.2.7)118
b(Design)25 b(feature:)31 b(T)-8 b(yped)24 b(instructions)39
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)88 b(16)679 1575 y(2.2.8)118 b(Design)25 b(feature:)31
b(Stack)25 b(of)g(v)n(alues)95 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(17)679 1754
y(2.2.9)118 b(Design)25 b(feature:)31 b(Explicit)23 b(e)o(xception)h
(ranges)65 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
88 b(17)679 1933 y(2.2.10)68 b(W)-8 b(alkthrough)24 b(of)h(e)o(xample)
58 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(19)449 2113 y(2.3)107
b(J)t Ft(I)t(M)t(P)t(L)t(E)92 b Fy(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(19)679 2292
y(2.3.1)118 b(Moti)n(v)n(ation)82 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)88 b(19)679 2471 y(2.3.2)118 b(Description)57
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(22)679 2650 y(2.3.3)118 b(Design)25 b(feature:)31 b(Stackless)24
b(3-address)h(code)86 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)88 b(23)679 2830 y(2.3.4)118 b(Design)25 b(feature:)31
b(Compact)43 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(26)679 3009
y(2.3.5)118 b(Design)25 b(feature:)31 b(T)-8 b(yped)24
b(and)h(named)f(local)h(v)n(ariables)68 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)88 b(26)679 3188 y(2.3.6)118 b(W)-8 b(alkthrough)24
b(of)h(e)o(xample)58 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(27)449
3367 y(2.4)107 b(G)t Ft(R)t(I)t(M)t(P)33 b Fy(.)50 b(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(29)679 3547 y(2.4.1)118 b(Moti)n(v)n(ation)82 b(.)50
b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(29)679
3726 y(2.4.2)118 b(Description)57 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)88 b(29)679 3905 y(2.4.3)118 b(Design)25
b(feature:)31 b(Expression)23 b(trees)47 b(.)j(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(29)679
4084 y(2.4.4)118 b(Design)25 b(feature:)31 b(Ne)n(win)l(v)n(ok)o(e)23
b(e)o(xpression)j(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)88 b(32)679 4264 y(2.4.5)118 b(W)-8 b(alkthrough)24
b(of)h(e)o(xample)58 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(33)679
4443 y(2.4.6)118 b(Summary)61 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)88 b(33)300 4722 y Fs(3)99 b(T)-7 b(ransf)n(ormations)
2641 b(35)449 4901 y Fy(3.1)105 b(Bytecode)25 b Fv(\000)-16
b(!)24 b Fy(Analyzable)j(J)t Ft(I)t(M)t(P)t(L)t(E)73
b Fy(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)88 b(35)679 5080 y(3.1.1)118 b(Direct)25
b(translation)f(to)i(B)q Ft(A)t(F)k Fy(with)24 b(stack)h
(interpretation)96 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(35)679 5260 y(3.1.2)118 b(Direct)25 b(translation)f(to)i(J)t
Ft(I)t(M)t(P)t(L)t(E)32 b Fy(with)24 b(stack)g(height)107
b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(39)2061
5509 y(vi)p eop
%%Page: 7 7
7 6 bop 679 499 a Fy(3.1.3)118 b(Split)25 b(locals)76
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(39)679 681 y(3.1.4)118 b(T)-8 b(ype)25 b(locals)68
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(44)679 864 y(3.1.5)118 b(Clean)26 b(up)g(J)t Ft(I)t(M)t(P)t(L)t(E)65
b Fy(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(46)449
1046 y(3.2)105 b(Analyzable)26 b(J)t Ft(I)t(M)t(P)t(L)t(E)32
b Fv(\000)-17 b(!)25 b Fy(Bytecode)g(\(via)i(G)t Ft(R)t(I)t(M)t(P)r
Fy(\))65 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)88 b(46)679 1228 y(3.2.1)118 b(Aggre)o(gate)24 b(e)o(xpressions)69
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(48)679 1410 y(3.2.2)118
b(T)m(ra)n(v)o(erse)27 b(G)t Ft(R)t(I)t(M)t(P)k Fy(code)25
b(and)g(generate)g(bytecode)81 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)88 b(55)449 1593 y(3.3)105 b(Analyzable)26
b(J)t Ft(I)t(M)t(P)t(L)t(E)32 b Fy(to)24 b(Bytecode)h(\(via)i(B)q
Ft(A)t(F)r Fy(\))109 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)88 b(56)679 1775 y(3.3.1)118 b(Direct)25
b(translation)f(to)i(B)q Ft(A)t(F)124 b Fy(.)50 b(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(56)679 1957 y(3.3.2)118 b(Eliminate)24 b(redundant)g(store/loads)76
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)88 b(58)679 2139 y(3.3.3)118 b(P)o(ack)25 b(local)g(v)n
(ariables)103 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(58)679
2322 y(3.3.4)118 b(Direct)25 b(translation)f(and)h(calculate)g(maximum)
e(height)71 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(60)449 2504 y(3.4)105 b(Summary)80 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(62)300 2786
y Fs(4)99 b(Experimental)26 b(Results)2435 b(63)449 2968
y Fy(4.1)105 b(Methodology)78 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)88 b(63)449 3150 y(4.2)105 b(Benchmarks)25
b(and)f(Baseline)h(T)m(imes)58 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(64)449 3332 y(4.3)105 b(Straight)24 b(through)i(S)t
Ft(O)t(O)q(T)85 b Fy(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(65)449 3515 y(4.4)105 b(Optimization)22 b(via)j(Inlining)52
b(.)d(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(65)300 3796
y Fs(5)99 b(The)26 b(API)2988 b(69)449 3979 y Fy(5.1)105
b(Moti)n(v)n(ation)27 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)88 b(69)449 4161 y(5.2)105 b(Fundamentals)57
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(70)679 4343 y(5.2.1)118 b(V)-11 b(alue)25 b(f)o(actories)79
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(70)679
4525 y(5.2.2)118 b(Chain)61 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)88 b(70)449 4708 y(5.3)105 b(API)25
b(Ov)o(ervie)n(w)42 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)88 b(71)679 4890 y(5.3.1)118 b(Scene)62
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(72)679 5072 y(5.3.2)118 b(SootClass)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)88 b(73)679 5254 y(5.3.3)118
b(SootField)61 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
88 b(75)2047 5509 y(vii)p eop
%%Page: 8 8
8 7 bop 679 499 a Fy(5.3.4)118 b(SootMethod)29 b(.)50
b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(75)679
681 y(5.3.5)118 b(Intermediate)25 b(representations)63
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)88 b(76)679 864 y(5.3.6)118 b(Body)83
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(76)679 1046 y(5.3.7)118 b(Local)72 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(77)679 1228 y(5.3.8)118
b(T)m(rap)40 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)88 b(77)679 1410 y(5.3.9)118 b(Unit)47 b(.)i(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(79)679
1593 y(5.3.10)68 b(T)-8 b(ype)102 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(80)679 1775 y(5.3.11)68
b(Modi\002er)100 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)88 b(81)679 1957 y(5.3.12)68 b(V)-11 b(alue)72 b(.)50
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(82)679 2139 y(5.3.13)68 b(Constants)55 b(.)49 b(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(83)679 2322 y(5.3.14)68
b(Box)59 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)88 b(83)679 2504 y(5.3.15)68 b(P)o(atching)24
b(Chains)99 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(84)679 2686 y(5.3.16)68 b(P)o(ackages)26 b(and)e(T)-8
b(oolkits)83 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(85)679
2868 y(5.3.17)68 b(Analyses)25 b(and)f(T)m(ransformations)55
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)88 b(86)679 3051 y(5.3.18)68 b(Graph)25 b(representation)g
(of)f(Body)84 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(86)449 3233 y(5.4)105
b(Usage)24 b(e)o(xamples)43 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)88 b(87)679 3415 y(5.4.1)118 b(Creating)25
b(a)h(hello)e(w)o(orld)g(program)89 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(87)679
3597 y(5.4.2)118 b(Implementing)23 b(li)n(v)o(e)h(v)n(ariables)g
(analysis)36 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)88 b(90)679 3779 y(5.4.3)118 b(Implementing)23
b(constant)h(propagation)77 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(93)679 3962 y(5.4.4)118
b(Instrumenting)23 b(a)i(class\002le)72 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88
b(95)679 4144 y(5.4.5)118 b(Ev)n(aluating)23 b(a)j(Scene)61
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)88 b(99)679 4326
y(5.4.6)118 b(Summary)61 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)39 b(100)300 4608 y Fs(6)99 b(Experiences)2789
b(101)449 4790 y Fy(6.1)105 b(The)24 b(Curse)i(of)f(Non-Determinism)92
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)39 b(101)449 4972 y(6.2)105 b(Sentinel)24
b(T)-7 b(est)25 b(Suite)95 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)39 b(102)300 5254 y Fs(7)99 b(Conclusions)25
b(and)h(Futur)n(e)g(W)-7 b(ork)2018 b(103)2034 5509 y
Fy(viii)p eop
%%Page: 1 9
1 8 bop 300 1238 a Fu(Chapter)58 b(1)300 1728 y(Intr)l(oduction)300
2311 y Fr(1.1)143 b(Motiv)m(ation)300 2596 y Fy(Ja)n(v)n(a)35
b(pro)o(vides)g(man)o(y)g(attracti)n(v)o(e)f(features)j(such)e(as)h
(platform)f(independence,)j(e)o(x)o(ecution)d(safety)-6
b(,)300 2729 y(garbage)20 b(collection)g(and)g(object)g(orientation.)28
b(These)21 b(features)g(f)o(acilitate)f(application)f(de)n(v)o
(elopment)300 2861 y(b)n(ut)26 b(are)i(e)o(xpensi)n(v)o(e)d(to)h
(support;)g(applications)g(written)g(in)g(Ja)n(v)n(a)h(are)g(often)g
(much)f(slo)n(wer)g(than)g(their)300 2993 y(counterparts)g(written)h
(in)f(C)i(or)f(C++.)38 b(T)-8 b(o)26 b(use)h(these)g(features)g
(without)f(ha)n(ving)g(to)g(pay)h(a)g(great)h(per)n(-)300
3126 y(formance)i(penalty)-6 b(,)31 b(sophisticated)d(optimizations)g
(and)i(runtime)f(systems)f(are)j(required.)47 b(Using)29
b(a)300 3258 y(Just-In-T)m(ime)22 b(compiler[1)o(],)i(or)g(a)g(W)-8
b(ay-Ahead-Of-T)m(ime)24 b(Ja)n(v)n(a)f(compiler[19)o(])h([18],)g(to)f
(con)l(v)o(ert)g(the)300 3391 y(bytecodes)h(to)g(nati)n(v)o(e)f
(instructions)f(is)i(the)g(most)f(often)i(used)f(method)f(for)i(impro)o
(ving)d(performance.)300 3523 y(There)32 b(are)g(other)g(types)f(of)h
(optimizations,)e(ho)n(we)n(v)o(er)l(,)i(which)f(can)h(ha)n(v)o(e)g(a)g
(substantial)d(impact)i(on)300 3656 y(performance:)300
3946 y Fs(Optimizing)24 b(the)i(bytecode)g(dir)n(ectly:)50
b Fy(Some)23 b(bytecode)f(instructions)e(are)k(much)e(more)g(e)o
(xpensi)n(v)o(e)544 4078 y(than)38 b(others.)70 b(F)o(or)38
b(e)o(xample,)j(loading)c(a)h(local)g(v)n(ariable)g(onto)f(the)h(stack)
g(is)g(ine)o(xpensi)n(v)o(e;)544 4211 y(b)n(ut)26 b(virtual)f(methods)g
(calls,)h(interf)o(ace)h(calls,)f(object)g(allocations,)f(and)i
(catching)e(e)o(xceptions)544 4343 y(are)31 b(all)e(e)o(xpensi)n(v)o
(e.)44 b(T)m(raditional)29 b(C-lik)o(e)h(optimizations,)e(such)i(as)g
(cop)o(y)g(propagation,)f(ha)n(v)o(e)544 4475 y(little)24
b(ef)n(fect)h(because)h(the)o(y)e(do)h(not)f(tar)n(get)h(the)g(e)o
(xpensi)n(v)o(e)e(bytecodes.)31 b(T)-8 b(o)25 b(perform)g(ef)n(fecti)n
(v)o(e)544 4608 y(optimizations)h(at)k(this)e(le)n(v)o(el,)g(one)h
(must)f(consider)h(more)g(adv)n(anced)g(optimizations)d(such)j(as)544
4740 y(method)e(inlining,)f(and)i(static)f(virtual)f(method)h(call)h
(resolution,)f(which)g(directly)g(reduce)h(the)544 4873
y(use)d(of)f(these)h(e)o(xpensi)n(v)o(e)e(bytecodes.)300
5088 y Fs(Annotating)i(the)h(bytecode:)50 b Fy(Ja)n(v)n(a')-5
b(s)34 b(e)o(x)o(ecution)e(safety)i(feature)h(guarantees)f(that)f(all)h
(potentially)544 5220 y(ille)o(gal)17 b(memory)i(accesses)h(are)g
(check)o(ed)g(for)g(safety)f(before)h(e)o(x)o(ecution.)28
b(In)19 b(some)g(situations)f(it)2075 5509 y(1)p eop
%%Page: 2 10
2 9 bop 544 499 a Fy(can)23 b(be)g(determined)f(at)h(compile-time)e
(that)h(particular)h(checks)g(are)g(unnecessary)-6 b(.)30
b(F)o(or)23 b(e)o(xam-)544 632 y(ple,)j(man)o(y)g(array)h(bound)f
(checks)g(can)h(be)g(determined)e(to)h(be)h(completely)e
(unnecessary[12].)544 764 y(Unfortunately)-6 b(,)22 b(after)h(ha)n
(ving)f(determined)h(the)f(safety)h(of)g(some)g(array)g(accesses,)h(we)
f(can)h(not)544 897 y(eliminate)g(the)h(bounds)g(checks)g(directly)g
(from)g(the)g(bytecode,)h(because)f(the)o(y)g(are)h(implicit)d(in)544
1029 y(the)h(array)h(access)g(bytecodes)f(and)g(can)h(not)f(be)g
(separated)h(out.)30 b(But)24 b(if)h(we)f(can)h(communicate)544
1161 y(the)20 b(safety)h(of)f(these)h(instructions)d(to)i(the)h(Ja)n(v)
n(a)f(V)-6 b(irtual)20 b(Machine)g(by)g(some)g(annotation)f(mech-)544
1294 y(anism,)i(then)f(the)h(Ja)n(v)n(a)f(V)-6 b(irtual)21
b(Machine)f(could)g(speed)h(up)g(the)g(e)o(x)o(ecution)e(by)h(not)h
(performing)544 1426 y(these)k(redundant)f(checks.)554
4493 y @beginspecial 0 @llx 0 @lly 371 @urx 328 @ury
3710 @rwi @setspecial
%%BeginDocument: sootOverview.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: sootOverview.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Fri Oct  6 16:54:18 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 371 328
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-44.0 341.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Helvetica-Bold /Helvetica-Bold-iso isovec ReEncode
/Helvetica-Narrow-Bold /Helvetica-Narrow-Bold-iso isovec ReEncode
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 6412 m -1000 -1000 l 7582 -1000 l 7582 6412 l cp clip
 0.06299 0.06299 sc
/Helvetica-Bold-iso ff 180.00 scf sf
900 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
990 450 m
gs 1 -1 sc (Java) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2340 720 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2430 467 m
gs 1 -1 sc (SML) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3960 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3915 450 m
gs 1 -1 sc (Scheme) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
5445 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
5490 450 m
gs 1 -1 sc (Eiffel) col0 sh gr
% Polyline
7.500 slw
n 2655 4230 m 4725 4230 l 4725 4635 l 2655 4635 l cp gs col0 s gr 
% Polyline
gs  clippath
2501 4963 m 2377 4963 l 2486 4905 l 2355 4938 l 2370 4996 l cp
clip
n 3637 4648 m 2377 4963 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 2501 4963 m 2377 4963 l 2486 4905 l 2493 4934 l 2501 4963 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 2160 4995 m 2610 4995 l 2610 5265 l 2160 5265 l cp gs col0 s gr 
% Polyline
n 2925 4995 m 4500 4995 l 4500 5265 l 2925 5265 l cp gs col0 s gr 
% Polyline
gs  clippath
3720 4920 m 3690 5040 l 3660 4920 l 3660 5055 l 3720 5055 l cp
clip
n 3690 4680 m 3690 5040 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3720 4920 m 3690 5040 l 3660 4920 l 3690 4920 l 3720 4920 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
5465 4815 m 5580 4860 l 5457 4875 l 5591 4892 l 5599 4832 l cp
clip
n 4096 4672 m 5580 4860 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 5465 4815 m 5580 4860 l 5457 4875 l 5461 4845 l 5465 4815 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 5040 4905 m 6570 4905 l 6570 5400 l 5040 5400 l cp gs col0 s gr 
% Polyline
n 720 4995 m 1845 4995 l 1845 5265 l 720 5265 l cp gs col0 s gr 
% Polyline
gs  clippath
1113 5008 m 990 4995 l 1105 4948 l 971 4967 l 979 5027 l cp
clip
n 3151 4685 m 990 4995 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 1113 5008 m 990 4995 l 1105 4948 l 1109 4978 l 1113 5008 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3720 4110 m 3690 4230 l 3660 4110 l 3660 4245 l 3720 4245 l cp
clip
n 3690 3870 m 3690 4230 l gs col0 s gr gr

% arrowhead
n 3720 4110 m 3690 4230 l 3660 4110 l  col0 s
/Helvetica-Bold-iso ff 180.00 scf sf
2790 4500 m
gs 1 -1 sc (Optimized class files) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
2250 5220 m
gs 1 -1 sc (JIT) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
3015 5220 m
gs 1 -1 sc (Adaptive Engine) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5085 5085 m
gs 1 -1 sc (Ahead-of-Time) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5130 5265 m
gs 1 -1 sc (    Compiler) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
765 5175 m
gs 1 -1 sc (Interpreter) col0 sh gr
% Polyline
gs  clippath
4307 1597 m 4185 1620 l 4282 1543 l 4159 1599 l 4184 1654 l cp
clip
n 5760 900 m 4185 1620 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 4307 1597 m 4185 1620 l 4282 1543 l 4294 1570 l 4307 1597 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3443 1471 m 3510 1575 l 3402 1514 l 3500 1607 l 3542 1563 l cp
clip
n 2700 810 m 3510 1575 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3443 1471 m 3510 1575 l 3402 1514 l 3423 1493 l 3443 1471 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3139 1548 m 3240 1620 l 3117 1604 l 3243 1653 l 3265 1598 l cp
clip
n 1132 792 m 3240 1620 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3139 1548 m 3240 1620 l 3117 1604 l 3128 1576 l 3139 1548 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 810 270 m 1575 270 l 1575 765 l 810 765 l cp gs col0 s gr 
% Polyline
n 2250 225 m 3015 225 l 3015 810 l 2250 810 l cp gs col0 s gr 
% Polyline
gs  clippath
3953 1393 m 3870 1485 l 3900 1365 l 3836 1484 l 3889 1512 l cp
clip
n 4230 810 m 3870 1485 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3953 1393 m 3870 1485 l 3900 1365 l 3926 1379 l 3953 1393 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 3870 225 m 4725 225 l 4725 765 l 3870 765 l cp gs col0 s gr 
% Polyline
n 5400 270 m 6165 270 l 6165 765 l 5400 765 l cp gs col0 s gr 
% Polyline
n 3105 1620 m 4185 1620 l 4185 1935 l 3105 1935 l cp gs col0 s gr 
% Polyline
gs  clippath
3630 2220 m 3600 2340 l 3570 2220 l 3570 2355 l 3630 2355 l cp
clip
n 3600 1980 m 3600 2340 l gs col0 s gr gr

% arrowhead
n 3630 2220 m 3600 2340 l 3570 2220 l  col0 s
% Polyline
 [15 45] 45 sd
n 2610 2385 m 4680 2385 l 4680 3870 l 2610 3870 l cp gs 0.50 setgray ef gr gs col0 s gr  [] 0 sd
/Helvetica-Bold-iso ff 180.00 scf sf
3240 1845 m
gs 1 -1 sc (class files) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
3105 1080 m
gs 1 -1 sc (MLJ) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
1800 1350 m
gs 1 -1 sc (javac) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
4185 1125 m
gs 1 -1 sc (KAWA) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5130 1395 m
gs 1 -1 sc (SmallEiffel) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 240.00 scf sf
3330 3195 m
gs 1 -1 sc (Soot) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 1170 4804 a(Figure)h(1.1:)30 b(An)25 b(o)o(v)o(ervie)n(w)e
(of)i(Soot)f(and)h(its)f(usage.)446 5073 y(The)29 b(goal)g(of)g(this)g
(w)o(ork)f(is)h(to)g(pro)o(vide)f(a)h(frame)n(w)o(ork)g(which)g
(simpli\002es)f(the)g(task)h(of)g(optimiz-)300 5206 y(ing)g(Ja)n(v)n(a)
h(bytecode,)h(and)e(to)h(demonstrate)f(that)g(signi\002cant)g
(optimization)f(can)i(be)g(achie)n(v)o(ed.)45 b(The)2075
5509 y(2)p eop
%%Page: 3 11
3 10 bop 302 499 a Fy(S)t Ft(O)t(O)q(T)r Fy([22)s(])25
b(frame)n(w)o(ork)g(pro)o(vides)f(a)i(set)f(of)g(intermediate)g
(representations)f(and)i(a)f(set)g(of)h(Ja)n(v)n(a)f(APIs)300
632 y(for)c(optimizing)f(Ja)n(v)n(a)g(bytecode)h(directly)-6
b(.)29 b(The)23 b(S)t Ft(O)t(O)q(T)j Fy(frame)n(w)o(ork)21
b(is)g(used)g(as)g(follo)n(ws:)27 b(\(\002gure)22 b(1.1\))420
922 y(1.)49 b(Bytecode)25 b(is)f(produced)h(from)g(a)g(v)n(ariety)f(of)
h(sources,)f(such)h(as)g(the)f Fq(javac)g Fy(compiler)-5
b(.)420 1137 y(2.)49 b(This)23 b(bytecode)g(is)g(fed)h(into)h(S)t
Ft(O)t(O)q(T)r Fy(,)i(and)e(S)t Ft(O)t(O)q(T)k Fy(transforms)22
b(and/or)i(optimizes)e(the)h(code)h(and)544 1270 y(produces)g(ne)n(w)h
(class\002les.)420 1485 y(3.)49 b(This)33 b(ne)n(w)g(bytecode)h(can)g
(then)g(be)g(e)o(x)o(ecuted)f(using)g(an)o(y)g(standard)h(Ja)n(v)n(a)f
(V)-6 b(irtual)33 b(Machine)544 1618 y(\(JVM\))24 b(implementation,)f
(or)i(it)f(can)h(be)g(used)f(as)h(the)g(input)f(to)g(a)h(bytecode)p
Fv(!)p Fy(C)g(or)544 1750 y(bytecode)p Fv(!)p Fy(nati)n(v)o(e-code)e
(compiler)h(or)h(other)f(optimizers.)446 2040 y(Based)34
b(on)f(the)h(S)t Ft(O)t(O)q(T)k Fy(frame)n(w)o(ork)33
b(we)g(ha)n(v)o(e)g(implemented)e(both)h(intraprocedural)h(optimiza-)
300 2173 y(tions)24 b(and)h(whole)g(program)g(optimizations.)k(The)d
(frame)n(w)o(ork)e(has)i(also)e(been)i(designed)e(so)h(that)g(we)300
2305 y(will)j(be)g(able)h(to)f(add)g(support)g(for)g(the)h(annotation)e
(of)h(Ja)n(v)n(a)g(bytecode.)42 b(W)-8 b(e)29 b(ha)n(v)o(e)f(applied)g
(our)g(tool)300 2437 y(to)34 b(a)g(substantial)e(number)i(of)g(lar)n
(ge)g(benchmarks,)i(and)e(the)g(best)f(combination)f(of)j
(optimizations)300 2570 y(implemented)23 b(so)i(f)o(ar)g(can)g(yield)f
(a)i(speed)e(up)h(reaching)g(38\045.)300 2977 y Fr(1.2)143
b(Contrib)m(utions)36 b(of)k(Thesis)300 3263 y Fy(The)23
b(contrib)n(utions)e(of)i(this)f(thesis)g(are)i(the)f(design,)g
(implementation)d(and)j(e)o(xperimental)f(v)n(alidation)300
3395 y(of)j(the)i(S)t Ft(O)t(O)q(T)i Fy(frame)n(w)o(ork.)300
3755 y Fp(1.2.1)121 b(Design)300 4005 y Fy(The)33 b(S)t
Ft(O)t(O)q(T)i Fy(frame)n(w)o(ork)c(w)o(as)g(designed)f(to)g(simplify)f
(the)i(process)f(of)h(de)n(v)o(eloping)e(ne)n(w)h(optimiza-)300
4137 y(tions)d(for)h(Ja)n(v)n(a)g(bytecode.)39 b(The)28
b(design)f(can)i(be)f(split)f(into)g(tw)o(o)g(parts.)40
b(The)28 b(\002rst)g(part)g(is)f(the)h(actual)300 4269
y(design)c(of)h(the)g(three)g(intermediate)f(representations)g(for)h
(Ja)n(v)n(a)f(bytecode:)445 4560 y Fv(\017)51 b Fy(B)q
Ft(A)t(F)r Fy(,)28 b(a)d(streamlined)f(representation)g(of)h(bytecode)f
(which)h(is)f(simple)g(to)g(manipulate;)445 4775 y Fv(\017)51
b Fy(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)29 b(a)c(typed)g(3-address)f
(intermediate)g(representation)g(suitable)g(for)h(optimization;)445
4991 y Fv(\017)51 b Fy(G)t Ft(R)t(I)t(M)t(P)r Fy(,)29
b(an)c(aggre)o(gated)f(v)o(ersion)g(of)j(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(suitable)24 b(for)h(decompilation.)2075 5509 y(3)p
eop
%%Page: 4 12
4 11 bop 448 499 a Fy(G)t Ft(R)t(I)t(M)t(P)29 b Fy(w)o(as)22
b(designed)f(with)h(P)o(atrick)f(Lam,)i(and)f(the)f(de)n(v)o(elopment)f
(of)k(J)t Ft(I)t(M)t(P)t(L)t(E)29 b Fy(w)o(as)22 b(b)n(uilt)f(upon)300
632 y(a)29 b(prototype)f(designed)g(by)h(Clark)g(V)-11
b(erbrugge.)43 b(Optimizing)26 b(Ja)n(v)n(a)j(bytecode)g(in)h(S)t
Ft(O)t(O)q(T)k Fy(consists)27 b(of)300 764 y(transforming)j(bytecode)g
(to)h(the)h(J)t Ft(I)t(M)t(P)t(L)t(E)38 b Fy(representation)30
b(and)h(then)f(back.)51 b(B)q Ft(A)t(F)36 b Fy(and)d(G)t
Ft(R)t(I)t(M)t(P)k Fy(are)300 897 y(used)25 b(in)f(the)h
(transformation)e(process.)300 1256 y Fp(1.2.2)121 b(Implementation)302
1506 y Fy(S)t Ft(O)t(O)q(T)33 b Fy(w)o(as)28 b(a)g(team)f(ef)n(fort.)40
b(Ho)n(we)n(v)o(er)l(,)27 b(I)h(w)o(as)g(the)g(main)f(designer)h(and)f
(implementator)-5 b(.)38 b(In)28 b(partic-)300 1638 y(ular)l(,)d(I)g
(implemented)e(lar)n(ge)i(portions)e(of)i(the)f(frame)n(w)o(ork)h(and)f
(then)h(coordinated)f(the)g(implementa-)300 1771 y(tion)g(of)h(man)o(y)
f(aspects)g(of)h(the)g(frame)n(w)o(ork.)30 b(In)25 b(particular)l(,)g
(I)g(implemented)e(the)h(follo)n(wing:)445 2061 y Fv(\017)49
b Fy(implementation)22 b(of)j(the)g(base)g(frame)n(w)o(ork,)f
(consisting)f(of)i(the)g(main)f(classes)g(such)h(as)544
2193 y Fq(Scene)p Fy(,)f Fq(SootClass)p Fy(,)e Fq(SootMethod)p
Fy(,)h Fq(SootField)g Fy(and)i(all)f(the)h(miscellaneous)544
2326 y(classes,)445 2541 y Fv(\017)49 b Fy(the)32 b(bytecode)h(to)f(v)o
(erbose)i(J)t Ft(I)t(M)t(P)t(L)t(E)40 b Fy(transformation)31
b(\(used)i(Clark)g(V)-11 b(erbrugge')-5 b(s)32 b(code)h(as)g(a)544
2674 y(prototype\),)445 2889 y Fv(\017)49 b Fy(compacting)24
b(the)g(v)o(erbose)j(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(code)25
b(by)f(cop)o(y)h(and)g(constant)f(propagation,)445 3104
y Fv(\017)49 b Fy(implementation)32 b(of)j(the)g(\003o)n(w)f(analysis)g
(frame)n(w)o(ork)h(and)g(v)n(arious)e(\003o)n(w)i(analyses)f(such)h(as)
544 3237 y(li)n(v)o(e)23 b(v)n(ariable)i(analysis,)e(reaching)i(defs)g
(and)g(using)f(defs,)445 3452 y Fv(\017)49 b Fy(implementation)30
b(of)j(a)g(simple)e(re)o(gister)h(colorer)l(,)j(of)e(local)f(v)n
(ariable)h(splitting)d(and)j(of)f(local)544 3585 y(v)n(ariable)24
b(packing,)445 3800 y Fv(\017)49 b Fy(implementation)22
b(of)j(unreachable)g(code)g(elimination)e(and)i(dead)g(assignment)e
(elimination.)300 4160 y Fp(1.2.3)121 b(Experimental)35
b(V)-7 b(alidation)300 4410 y Fy(A)36 b(lar)n(ge)g(amount)f(of)h(ef)n
(fort)f(has)h(been)g(placed)g(in)f(v)n(alidating)f(our)i(frame)n(w)o
(ork)g(on)f(a)h(lar)n(ge)g(set)g(of)300 4542 y(benchmarks)d(on)f(a)i(v)
n(ariety)e(of)h(virtual)g(machines.)55 b(In)33 b(particular)l(,)i(we)e
(tested)g(our)g(frame)n(w)o(ork)f(on)300 4674 y(\002)n(v)o(e)23
b(dif)n(ferent)g(virtual)g(machines)f(\(three)i(under)g(Linux)e(and)h
(tw)o(o)g(under)h(NT\),)f(and)g(report)h(results)e(on)300
4807 y(ten)j(lar)n(ge)g(programs,)f(se)n(v)o(en)g(of)h(which)f
(originate)g(from)h(the)f(standard)h(specSuite)g(set.)2075
5509 y(4)p eop
%%Page: 5 13
5 12 bop 300 502 a Fr(1.3)143 b(Related)38 b(W)-9 b(ork)300
788 y Fy(Related)25 b(w)o(ork)g(f)o(alls)f(into)g(\002)n(v)o(e)h(dif)n
(ferent)f(cate)o(gories:)300 1078 y Fs(Bytecode)i(optimizers:)49
b Fy(The)28 b(only)f(other)h(Ja)n(v)n(a)f(tool)g(that)h(we)g(are)g(a)o
(w)o(are)h(of)f(which)f(performs)h(sig-)544 1210 y(ni\002cant)23
b(optimizations)d(on)j(bytecode)g(and)g(produces)g(ne)n(w)f(class)h
(\002les)g(is)g(Jax[26)o(].)31 b(The)23 b(main)544 1343
y(goal)18 b(of)i(Jax)e(is)h(application)f(compression)f(where,)k(for)e
(e)o(xample,)g(unused)g(methods)e(and)i(\002elds)544
1475 y(are)j(remo)o(v)o(ed,)f(and)g(the)h(class)f(hierarchy)h(is)f
(compressed.)29 b(The)o(y)21 b(also)g(are)h(interested)f(in)g(speed)544
1608 y(optimizations,)j(b)n(ut)h(at)h(this)f(time)g(their)h(current)g
(published)f(speed)h(up)f(results)g(are)i(more)f(lim-)544
1740 y(ited)39 b(than)g(those)f(presented)h(in)g(this)f(paper)-5
b(.)74 b(It)40 b(w)o(ould)e(be)h(interesting,)j(in)d(the)g(future,)j
(to)544 1872 y(compare)25 b(the)f(results)g(of)h(the)g(tw)o(o)f
(systems)g(on)g(the)h(same)g(set)f(of)h(benchmarks.)300
2088 y Fs(Bytecode)h(manipulation)f(tools:)49 b Fy(there)19
b(are)h(a)g(number)e(of)i(Ja)n(v)n(a)f(tools)f(which)g(pro)o(vide)h
(frame)n(w)o(orks)544 2220 y(for)38 b(manipulating)e(bytecode:)56
b(JT)m(rek[14],)41 b(Joie[3)o(],)h(Bit[15)o(])d(and)f(Ja)n(v)n
(aClass[13)o(].)70 b(These)544 2353 y(tools)26 b(are)i(constrained)f
(to)f(manipulating)g(Ja)n(v)n(a)g(bytecode)h(in)g(their)g(original)g
(form,)g(ho)n(we)n(v)o(er)-5 b(.)544 2485 y(The)o(y)30
b(do)h(not)f(pro)o(vide)g(con)l(v)o(enient)g(intermediate)g
(representations)g(such)h(as)i(B)q Ft(A)t(F)r Fy(,)38
b(J)t Ft(I)t(M)t(P)t(L)t(E)544 2618 y Fy(or)27 b(G)t
Ft(R)t(I)t(M)t(P)k Fy(for)25 b(performing)f(analyses)h(or)g
(transformations.)300 2833 y Fs(J)o(a)n(v)o(a)e(application)i
(packagers:)50 b Fy(There)34 b(are)g(a)g(number)g(of)f(tools)g(to)g
(package)h(Ja)n(v)n(a)g(applications,)544 2965 y(such)e(as)h(Jax[26)o
(],)i(DashO-Pro[5])e(and)g(SourceGuard[23].)55 b(Application)31
b(packaging)h(con-)544 3098 y(sists)19 b(of)i(code)g(compression)e
(and/or)i(code)f(obfuscation.)29 b(Although)19 b(we)i(ha)n(v)o(e)f(not)
g(yet)h(applied)546 3230 y(S)t Ft(O)t(O)q(T)29 b Fy(to)24
b(this)f(application)h(area,)h(we)g(ha)n(v)o(e)f(plans)f(to)h
(implement)f(this)g(functionality)g(as)i(well.)300 3446
y Fs(J)o(a)n(v)o(a)e(nati)o(v)o(e)i(compilers:)49 b Fy(The)21
b(tools)e(in)h(this)g(cate)o(gory)g(tak)o(e)g(Ja)n(v)n(a)h
(applications)e(and)h(compile)g(them)544 3578 y(to)i(nati)n(v)o(e)f(e)o
(x)o(ecutables.)28 b(These)23 b(are)g(related)f(because)h(the)o(y)e
(all)h(are)h(forced)g(to)f(b)n(uild)f(3-address)544 3710
y(code)27 b(intermediate)g(representations,)f(and)i(some)e(perform)h
(signi\002cant)g(optimizations.)35 b(The)544 3843 y(simplest)20
b(of)i(these)g(is)g(T)-8 b(oba[19)o(])22 b(which)g(produces)g
(unoptimized)e(C)i(code)h(and)f(relies)f(on)h(GCC)544
3975 y(to)31 b(produce)g(the)g(nati)n(v)o(e)f(code.)50
b(Slightly)30 b(more)h(sophisticated,)g(Harissa[18)o(])h(also)e
(produces)544 4108 y(C)h(code)f(b)n(ut)g(performs)g(some)f(method)g(de)
n(virtualization)g(and)h(inlining)e(\002rst.)47 b(The)30
b(most)f(so-)544 4240 y(phisticated)34 b(systems)g(are)j(V)-13
b(orte)o(x[6)o(])36 b(and)f(Marmot[8)o(].)64 b(V)-13
b(orte)o(x)35 b(is)g(a)h(nati)n(v)o(e)e(compiler)h(for)544
4373 y(Cecil,)c(C++)g(and)f(Ja)n(v)n(a,)g(and)g(contains)f(a)h
(complete)f(set)g(of)h(optimizations.)43 b(Marmot)29
b(is)h(also)544 4505 y(a)d(complete)f(Ja)n(v)n(a)g(optimization)f
(compiler)h(and)h(is)f(SSA)h(based.)37 b(Each)27 b(of)f(these)h
(systems)e(in-)544 4637 y(clude)j(their)h(customized)e(intermediate)h
(representations)g(for)h(dealing)f(with)g(Ja)n(v)n(a)g(bytecode,)544
4770 y(and)i(produce)g(nati)n(v)o(e)f(code)i(directly)-6
b(.)46 b(There)31 b(are)g(also)f(numerous)f(commercial)h(Ja)n(v)n(a)f
(nati)n(v)o(e)544 4902 y(compilers,)g(such)g(as)g(the)g(IBM)g(High)g
(Performance)h(for)g(Ja)n(v)n(a)e(Compiler[20)o(],)j(T)-8
b(o)n(wer)29 b(T)-7 b(ech-)544 5035 y(nology')i(s)29
b(T)-8 b(o)n(werJ[27)o(],)32 b(and)f(SuperCede[25)q(],)h(b)n(ut)f(the)o
(y)f(ha)n(v)o(e)g(v)o(ery)g(little)g(published)f(infor)n(-)544
5167 y(mation.)38 b(The)28 b(intention)e(of)h(our)h(w)o(ork)f(is)g(to)h
(pro)o(vide)e(a)i(publically)e(a)n(v)n(ailable)h(infrastructure)2075
5509 y(5)p eop
%%Page: 6 14
6 13 bop 544 499 a Fy(for)26 b(bytecode)g(optimization.)33
b(The)26 b(optimized)f(bytecode)h(could)f(be)h(used)g(as)h(input)e(to)g
(an)o(y)h(of)544 632 y(these)f(other)f(tools.)300 847
y Fs(J)o(a)n(v)o(a)f(compiler)i(infrastructur)n(es:)51
b Fy(There)32 b(are)g(at)f(least)g(tw)o(o)g(other)g(compiler)f
(infrastructures)h(for)544 980 y(Ja)n(v)n(a)26 b(bytecode.)36
b(Fle)o(x)27 b(is)f(a)h(Ja)n(v)n(a)g(compiler)f(infrastructure)g(for)h
(embedded)f(parallel)h(and)g(dis-)544 1112 y(trib)n(uted)f(systems.)37
b(It)27 b(uses)g(a)h(form)f(of)g(SSA)h(intermediate)f(representation)f
(for)i(its)e(bytecode)544 1244 y(called)21 b(QuadSSA.)g(Optimizations)e
(and)i(analyses)g(can)g(be)g(written)g(on)f(this)g(intermediate)h(rep-)
544 1377 y(resentation,)j(b)n(ut)g(ne)n(w)g(bytecodes)h(can)g(not)f(be)
h(produced.[9])544 1551 y(The)34 b(other)f(well)g(kno)n(wn)g(compiler)g
(infrastructure)g(is)g(the)h(Suif)f(compiler)g(system)g([24].)57
b(It)544 1683 y(possesses)35 b(a)i(front-end)f(which)g(translates)g(Ja)
n(v)n(a)g(bytecode)h(to)f Fq(OSUIF)f Fy(code)i(which)f(is)g(an)544
1816 y(object)25 b(oriented)f(v)o(ersion)g(of)i(Suif)f(code)g(which)g
(can)h(e)o(xpress)e(object)h(orientation)f(primiti)n(v)o(es.)544
1948 y(Analyses)h(and)g(transformations)f(can)j(be)e(written)g(on)h
(this)e(intermediate)h(representation)g(and)544 2080
y(numerous)37 b(back-ends)g(enable)h(the)g(compilation)e(of)i(the)f
(code)h(to)g(nati)n(v)o(e)e(code.)70 b(It)37 b(is)h(not)544
2213 y(possible)23 b(to)i(produce)g(ne)n(w)f(bytecode,)g(ho)n(we)n(v)o
(er)-5 b(.)300 2620 y Fr(1.4)143 b(Thesis)38 b(Or)n(ganization)300
2906 y Fy(The)31 b(rest)g(of)g(the)g(thesis)f(is)g(or)n(ganized)h(as)g
(follo)n(ws.)48 b(Chapter)31 b(2)g(describes)g(the)g(three)g
(intermediate)300 3038 y(representations)f(contained)g(in)i(S)t
Ft(O)t(O)q(T)r Fy(.)52 b(Chapter)31 b(3)g(presents)f(the)g
(transformations)g(which)g(are)h(re-)300 3171 y(quired)g(to)h
(transform)f(code)h(between)g(these)f(intermediate)g(representations.)
51 b(Chapter)32 b(4)g(presents)300 3303 y(the)27 b(e)o(xperimental)e
(results)h(which)h(v)n(alidate)f(the)g(frame)n(w)o(ork.)37
b(Chapter)27 b(5)g(presents)g(the)f(application)300 3436
y(programming)d(interf)o(ace)i(\(API\))g(which)f(we)h(de)n(v)o(eloped)e
(to)h(enable)h(the)f(use)g(of)h(the)f(frame)n(w)o(ork,)g(and)300
3568 y(chapter)h(6)f(presents)g(some)g(e)o(xperiences)g(that)g(we)h
(had)f(while)g(de)n(v)o(eloping)f(the)h(frame)n(w)o(ork.)30
b(Finally)-6 b(,)300 3700 y(chapter)25 b(7)g(gi)n(v)o(es)e(our)i
(conclusions)e(and)i(future)g(w)o(ork.)2075 5509 y(6)p
eop
%%Page: 7 15
7 14 bop 300 1238 a Fu(Chapter)58 b(2)300 1728 y(Intermediate)g
(Representations)302 2242 y Fy(S)t Ft(O)t(O)q(T)42 b
Fy(pro)o(vides)35 b(the)i(three)f(intermediate)g(representations)i(B)q
Ft(A)t(F)r Fy(,)45 b(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)f(and)39
b(G)t Ft(R)t(I)t(M)t(P)r Fy(.)71 b(Each)300 2375 y(representation)35
b(is)f(discussed)h(in)f(more)i(detail)e(belo)n(w)-6 b(,)37
b(and)e(\002gures)g(2.7,)j(2.12)c(and)h(2.16)g(pro)o(vide)300
2507 y(an)c(e)o(xample)g(program)g(in)g(each)h(form.)49
b(Figure)32 b(2.1)f(gi)n(v)o(es)f(the)h(e)o(xample)f(program)h(in)g
(the)g(original)300 2640 y(Ja)n(v)n(a)k(form.)62 b(As)36
b(a)f(starting)g(point,)i(the)e(follo)n(wing)e(section)i(discusses)f
(some)h(general)h(aspects)f(of)300 2772 y(stack-based)25
b(representations.)499 3073 y Fo(int)50 b(a;)499 3154
y(int)g(b;)499 3236 y(public)f(int)g(stepPoly\(int)f(x\))499
3318 y({)699 3400 y(int[])g(array)h(=)h(new)f(int[10];)699
3563 y(if\(x)g(>)g(10\))699 3645 y({)898 3726 y(array[0])f(=)i(a;)898
3808 y(System.out.println\("foo"\);)699 3890 y(})699
3971 y(else)f(if\(x)g(>)g(5\))898 4053 y(x)g(=)h(x)g(+)f(10)h(*)f(b;)
699 4216 y(x)g(=)h(array[0];)699 4380 y(return)e(x;)499
4462 y(})1128 4768 y Fy(Figure)25 b(2.1:)30 b Fq(stepPoly)23
b Fy(in)i(its)f(original)g(Ja)n(v)n(a)g(form.)2075 5509
y(7)p eop
%%Page: 8 16
8 15 bop 300 504 a Fr(2.1)143 b(Ja)n(v)m(a)57 b(Bytecode)e(as)i(an)g
(Intermediate)e(Representa-)643 705 y(tion)300 991 y
Fy(In)21 b(this)f(section)g(we)h(discuss)f(the)g(bene\002ts)h(of)g
(stack-based)g(code)g(in)f(general)h(\(subsection)f(2.1.1\),)h(and)300
1123 y(then)32 b(e)o(xamine)f(some)h(disadv)n(antages)e(of)j(analyzing)
e(and)h(optimizing)e(stack-based)i(code)h(directly)300
1255 y(\(subsection)24 b(2.1.2\).)300 1615 y Fp(2.1.1)121
b(Bene\002ts)35 b(of)e(stac)n(k-based)j(representations)300
1865 y Fy(The)d(stack)f(machine)g(model)g(for)h(the)f(Ja)n(v)n(a)g(V)-6
b(irtual)32 b(Machine)g(w)o(as)h(perhaps)f(a)h(reasonable)g(choice)300
1997 y(for)j(a)g(fe)n(w)g(reasons.)63 b(Stack)36 b(machine)g
(interpreters)f(are)i(relati)n(v)o(ely)d(easy)i(to)f(implement)f(and)i
(this)300 2130 y(w)o(as)30 b(originally)e(important)g(because)i(the)f
(goal)h(w)o(as)f(to)h(implement)d(the)j(Ja)n(v)n(a)f(V)-6
b(irtual)29 b(Machine)g(on)300 2262 y(as)37 b(man)o(y)f(dif)n(ferent)h
(platforms)e(as)i(possible.)66 b(More)37 b(rele)n(v)n(antly)-6
b(,)38 b(stack-based)f(code)g(tends)f(to)h(be)300 2394
y(compact)22 b(and)h(this)e(is)i(essential)e(to)h(allo)n(w)g(class)g
(\002les)h(to)f(be)h(rapidly)f(do)n(wnloaded)f(o)o(v)o(er)h(the)g
(Internet.)300 2527 y(A)31 b(third)f(justi\002cation)f(for)i(this)f
(model)g(is)g(that)h(it)f(simpli\002es)g(the)g(task)h(of)f(code)h
(generation.)49 b(Since)300 2659 y(the)27 b(operand)g(stack)g(can)g(be)
g(used)g(to)g(store)f(intermediate)h(results,)f(simple)g(tra)n(v)o
(ersals)g(of)i(the)e(code')-5 b(s)300 2792 y(abstract)25
b(syntax)f(tree\(AST\))i(suf)n(\002ce)f(to)f(generate)h(Ja)n(v)n(a)g
(bytecode.)446 2974 y(There)h(are)f(tw)o(o)f(good)h(reasons)f(for)h
(manipulating)e(Ja)n(v)n(a)i(bytecode)f(directly:)300
3264 y Fs(The)i(stack)f(code)h(is)e(immediately)h(a)n(v)o(ailable:)47
b Fy(No)25 b(transformations)e(are)j(required)f(to)f(get)h(the)544
3397 y(stack)38 b(code)h(in)f(this)f(form,)42 b(as)c(it)g(is)g(the)g
(nati)n(v)o(e)f(form)i(found)e(in)h(Ja)n(v)n(a)h(class\002les.)71
b(This)38 b(is)544 3529 y(important)23 b(if)i(e)o(x)o(ecution)e(speed)i
(is)f(critical)h(\(such)g(as)g(for)g(JIT)f(compilers\).)300
3744 y Fs(The)i(r)n(esultant)g(stack)f(code)h(is)e(\002nal:)49
b Fy(Since)33 b(the)f(code)h(does)f(not)f(need)i(to)f(be)g(transformed)
g(to)g(be)544 3877 y(stored)38 b(in)g(the)h(class\002les,)j(we)c(ha)n
(v)o(e)h(complete)f(control)g(o)o(v)o(er)f(what)i(gets)f(stored.)72
b(This)38 b(is)544 4009 y(important)24 b(for)i(obfuscation)f(since)g
(man)o(y)g(of)h(the)f(obfuscation)g(techniques)g(mak)o(e)g(hea)n(vy)h
(use)544 4142 y(of)32 b(the)h(stack)f(to)g(confuse)h(decompilers,)g
(and)g(a)f(3-address)h(code)f(representation)g(hides)g(the)544
4274 y(stack.)446 4564 y(In)22 b(speci\002c)h(cases,)g(such)e(as)i
(those)e(mentioned)g(abo)o(v)o(e,)g(a)i(stack-based)f(representation)f
(is)h(useful.)300 4697 y(Ho)n(we)n(v)o(er)l(,)h(in)h(the)g(general)h
(case)g(where)f(we)h(optimize)e(class\002les)h(of)n(\003ine,)g(these)h
(adv)n(antages)e(pale)h(in)300 4829 y(comparison)g(to)g(the)h(follo)n
(wing)e(disadv)n(antages.)2075 5509 y(8)p eop
%%Page: 9 17
9 16 bop 300 499 a Fp(2.1.2)121 b(Pr)n(ob)o(lems)34 b(of)f(optimizing)h
(stac)n(k-based)i(code)300 749 y Fy(Ev)o(en)28 b(though)f(there)i(are)h
(adv)n(antages)d(for)i(choosing)f(a)h(stack-based)f(intermediate)g
(representation,)300 881 y(there)35 b(are)g(potential)e(disadv)n
(antages)g(with)g(respect)i(to)f(program)g(analysis)f(and)h
(optimization.)57 b(T)-8 b(o)300 1014 y(analyze)30 b(and)f(transform)g
(Ja)n(v)n(a)g(bytecode)h(directly)-6 b(,)29 b(one)h(is)f(forced)h(to)f
(add)g(an)h(e)o(xtra)f(layer)h(of)f(com-)300 1146 y(ple)o(xity)f(to)h
(deal)h(with)f(the)g(comple)o(xities)e(of)j(the)g(stack-based)f(model.)
44 b(Gi)n(v)o(en)28 b(that)h(it)h(is)f(of)g(critical)300
1278 y(importance)35 b(to)g(optimize)g(Ja)n(v)n(a)g(this)f(dra)o(wback)
i(is)f(v)o(ery)g(important)f(and)i(must)e(be)i(eliminated)e(to)300
1411 y(allo)n(w)24 b(the)g(clearest)i(and)e(most)g(ef)n(\002cient)h(de)
n(v)o(elopment)e(of)h(optimizations)f(on)h(Ja)n(v)n(a.)446
1593 y(Belo)n(w)-6 b(,)23 b(we)h(enumerate)g(some)f(w)o(ays)g(in)g
(which)g(stack-based)g(Ja)n(v)n(a)h(bytecode)f(is)g(complicated)f(to)
300 1725 y(optimize.)300 2016 y Fs(Expr)n(essions)j(ar)n(e)h(not)f
(explicit:)49 b Fy(In)36 b(3-address)g(code,)k(e)o(xpressions)34
b(are)j(e)o(xplicit.)64 b(Usually)35 b(the)o(y)544 2148
y(only)30 b(occur)g(in)h(assignment)d(statements)i(\(such)g(as)h
Fq(x)59 b(=)h(a)f(+)h(b)p Fy(\))30 b(and)h(branch)f(statements)544
2280 y(\(such)23 b(as)g(a)h Fq(if)59 b(a<b)g(goto)g(L1)p
Fy(\).)30 b(There)24 b(is)e(a)i(\002x)o(ed)f(set)g(of)g(possible)f(e)o
(xpressions,)g(simpli-)544 2413 y(fying)f(analyses)g(by)g(restricting)g
(the)g(number)g(of)h(cases)g(to)f(consider)-5 b(.)29
b(F)o(or)21 b(the)h(purposes)e(of)i(this)544 2545 y(section,)33
b(we)f(shall)f(distinguish)e(tw)o(o)i(classes)h(of)g(Ja)n(v)n(a)f
(bytecode)g(instructions:)43 b(the)31 b Fz(e)n(xpr)l(es-)544
2678 y(sion)i Fy(instructions,)h(and)g Fz(action)g Fy(instructions.)56
b(Expression)33 b(instructions)f(are)j(those)f(which)544
2810 y(only)d(produce)h(an)f(ef)n(fect)h(on)g(the)f(operand)h(stack.)51
b(Examples)31 b(of)h(this)f(class)g(are:)45 b Fq(iload,)544
2943 y(iadd,)59 b(imul,)f(pop)p Fy(.)63 b(Action)35 b(instructions,)i
(on)e(the)h(other)g(hand,)i(produce)e(a)g(side)f(ef-)544
3075 y(fect,)e(such)d(as)h(modifying)e(a)i(\002eld)g(\()p
Fq(putfield)p Fy(\),)g(calling)f(a)i(method)d(\()p Fq(invokestatic)p
Fy(\))544 3207 y(or)f(storing)f(into)g(a)i(local)e(v)n(ariable)h(\()p
Fq(istore)p Fy(\).)40 b(These)28 b(instructions)e(ha)n(v)o(e)h
(concrete)i(ef)n(fects,)544 3340 y(whereas)c(the)f(e)o(xpression)f
(instructions)f(are)j(merely)f(used)g(to)g(b)n(uild)g(ar)n(guments)f
(on)h(the)g(stack.)544 3514 y(Thus)g(in)h(order)g(to)g(determine)g(the)
g(e)o(xpression)f(being)g(acted)i(upon)e(by)h(an)g(action)g
(instruction,)544 3646 y(you)37 b(need)g(to)g(parse)h(the)f(e)o
(xpression)f(instructions)g(and)h(reconstruct)g(the)h(e)o(xpression)e
(tree,)544 3779 y(whereas)27 b(in)h(J)t Ft(I)t(M)t(P)t(L)t(E)33
b Fy(these)26 b(are)h(readily)f(a)n(v)n(ailable.)35 b(And)26
b(as)h(the)f(ne)o(xt)f(points)h(illustrate,)f(this)544
3911 y(reconstruction)f(process)g(is)h(not)f(a)h(tri)n(vial)f(problem.)
300 4127 y Fs(Expr)n(essions)h(can)h(be)f(arbitrarily)g(lar)o(ge:)49
b Fy(In)36 b(order)g(to)f(determine)h(the)f(e)o(xpression)g(being)g
(com-)544 4259 y(puted)25 b(by)h(e)o(xpression)f(instructions,)g(the)h
(analysis)f(must)g(e)o(xamine)g(the)h(instructions)e(preced-)544
4391 y(ing)g(the)h(action)f(instruction)f(and)i(b)n(uild)f(an)h(e)o
(xpression)e(tree.)31 b(F)o(or)25 b(a)g(simple)f(case)h(such)g(as:)544
4622 y Fo(iconst)49 b(5)544 4704 y(iload)g(0)544 4786
y(iadd)544 4868 y(istore)g(1)544 5133 y Fy(it)34 b(is)h(easy)g(to)f
(determine)h(that)f(the)h(e)o(xpression)e(being)i(stored)f(in)h(v)n
(ar1)f(is)h Fq(5)59 b(+)h(var0)p Fy(.)g(In)544 5248 y(some)24
b(cases,)h(such)g(as:)2075 5509 y(9)p eop
%%Page: 10 18
10 17 bop 544 499 a Fo(iload)49 b(3)544 581 y(iconst)g(5)544
663 y(iload)g(6)544 744 y(iload)g(3)544 826 y(iadd)544
908 y(imul)544 989 y(idiv)544 1071 y(istore)g(0)544 1336
y Fy(the)31 b(e)o(xpression)f(tree)i(is)f(more)h(comple)o(x.)49
b(In)32 b(this)e(case)i(it)f(is)g Fq(\(var3)59 b(+)g(5\))h(*)f(var6)g
(/)544 1452 y(var0)p Fy(.)29 b(V)-11 b(ariable)24 b(e)o(xpression)f
(length)f(is)i(a)g(complication,)e(some)h(analyses)g(such)h(as)f
(common)544 1567 y(sube)o(xpression)31 b(elimination)g(require)j(ha)n
(ving)e(simple)g(3-address)i(code)f(e)o(xpressions)f(a)n(v)n(ail-)544
1683 y(able)i(to)g(be)g(implemented)f(ef)n(\002ciently)-6
b(.)57 b(T)-8 b(o)34 b(use)g(e)o(xpression)f(trees)h(in)g(such)g
(analyses,)i(the)o(y)544 1798 y(w)o(ould)d(need)i(to)f(\002rst)h(be)f
(simpli\002ed)f(to)h(use)h(temporary)f(locals,)i(which)e(the)i(J)t
Ft(I)t(M)t(P)t(L)t(E)41 b Fy(form)544 1914 y(pro)o(vides)23
b(directly)-6 b(.)349 2113 y Fs(Concr)n(ete)26 b(expr)n(essions)g(can)g
(not)f(always)f(be)i(constructed:)34 b Fy(Due)25 b(to)g(the)g(nature)g
(of)g(the)g(operand)544 2228 y(stack,)39 b(the)e(associated)g(e)o
(xpression)e(instructions)g(for)i(a)g(gi)n(v)o(en)f(action)g
(instruction)f(are)j(not)544 2344 y(necessarily)d(immediately)e(ne)o
(xt)i(to)g(it.)61 b(The)36 b(follo)n(wing)d(store)i(still)f(stores)h
Fq(var0)59 b(+)g(5)35 b Fy(in)544 2459 y(v)n(ar1,)27
b(despite)g(the)g(intermingled)e(bytecode)i(instructions)f(which)h
(store)g Fq(var2)58 b(*)i(var3)26 b Fy(in)544 2575 y(v)n(ar4.)544
2806 y Fo(iconst)49 b(5)544 2888 y(iload)g(0)544 2969
y(iadd)544 3051 y(iload)g(2)544 3133 y(iload)g(3)544
3214 y(imull)544 3296 y(istore)g(4)544 3378 y(istore)g(1)544
3643 y Fy(If)39 b(a)g(complete)e(sequence)i(of)g(e)o(xpression)e
(instructions)f(reside)j(in)f(a)h(basic)f(block,)j(then)e(it)544
3758 y(is)g(al)o(w)o(ays)g(possible)f(to)h(reco)o(v)o(er)g(the)g
(computed)f(e)o(xpression.)73 b(Ho)n(we)n(v)o(er)l(,)42
b(since)d(the)g(Ja)n(v)n(a)544 3874 y(V)-6 b(irtual)23
b(Machine)g(does)g(not)g(require)h(a)g(zero)g(stack)f(depth)g(across)h
(control)f(\003o)n(w)g(junctions,)f(an)544 3990 y(e)o(xpression)g(used)
h(in)g(a)h(basic)g(block)f(can)g(be)h(partially)f(computed)f(in)h(a)h
(dif)n(ferent)f(basic)h(block.)544 4105 y(Consider)h(the)f(follo)n
(wing)f(e)o(xample:)544 4336 y Fo(iload)49 b(0)544 4418
y(iload)g(2)544 4500 y(if_icmpeq)f(label1)544 4581 y(goto)h(label2)544
4745 y(label1:)544 4826 y(ineg)544 4990 y(label2:)544
5071 y(istore)g(1)2050 5509 y Fy(10)p eop
%%Page: 11 19
11 18 bop 544 499 a Fy(When)26 b(computing)e(the)i(possible)f
(de\002nitions)g(for)i(a)f(v)n(ariable)g(in)g(a)g(3-address)g(code)g
(interme-)544 615 y(diate)31 b(representation,)i(the)e(number)g(of)h
(possible)e(de\002nitions)h(can)h(not)f(e)o(xceed)g(the)h(number)544
730 y(of)25 b(assignments)e(to)i(that)f(v)n(ariable.)31
b(This)24 b(e)o(xample)g(illustrates)g(that)g(this)h(is)f(not)g(the)h
(case)h(with)544 846 y(stack)h(code,)h(for)f(a)g(single)g(assignment)e
(\()p Fq(istore)59 b(0)p Fy(\))27 b(can)g(yield)g(tw)o(o)g(dif)n
(ferent)f(de\002nitions)544 962 y(\(-v)n(ar0)34 b(or)h(v)n(ar0\).)58
b(By)35 b(allo)n(wing)e(the)h(control)f(\003o)n(w)h(to)g(produce)h
(such)f(conditional)e(e)o(xpres-)544 1077 y(sions)k(ob)o(viously)f
(increases)j(the)g(comple)o(xity)d(of)j(analyses)f(such)g(as)h
(reaching)f(de\002nitions)544 1193 y(and)g(optimizations)d(such)j(as)g
(cop)o(y)f(and)h(constant)f(propagation.)66 b(Instead)36
b(of)h(considering)544 1308 y(just)e(assignments,)i(the)o(y)e(must)g
(consider)h(the)g(origins)f(of)h(e)o(xpressions)f(and)h(their)f
(possible)544 1424 y(multiplicity)-6 b(.)300 1622 y Fs(Simple)25
b(transf)n(ormations)g(become)h(complicated:)49 b Fy(The)24
b(main)f(reason)h(why)f(stack)g(code)h(compli-)544 1738
y(cates)e(analyses)f(and)g(transformations)f(is)i(its)e(piecemeal)i
(form.)29 b(The)22 b(f)o(act)g(that)f(the)g(e)o(xpression)544
1854 y(is)k(split)g(into)g(se)n(v)o(eral)g(pieces)h(and)g(is)g
(separated)g(from)g(the)f(action)h(instruction)e(causes)i(almost)544
1969 y(all)f(the)g(complications,)f(for)i(as)f(a)h(result,)f(you)g(can)
h(interlea)n(v)o(e)f(these)g(instructions)f(with)g(other)544
2085 y(instructions,)29 b(and)h(spread)f(them)h(o)o(v)o(er)f(control)g
(\003o)n(w)g(boundaries.)45 b(T)m(ransforming)28 b(the)i(code)544
2200 y(in)g(this)g(form)h(is)f(dif)n(\002cult)g(because)h(all)f(the)h
(separate)g(pieces)g(need)g(to)f(be)h(k)o(ept)f(track)h(of)g(and)544
2316 y(maintained.)d(T)-8 b(o)21 b(illustrate)f(this)g(point,)g(this)h
(subsection)e(considers)i(the)g(problems)f(associated)544
2431 y(with)k(performing)g(dead)h(code)g(elimination.)544
2588 y(In)h(3-address)g(code,)g(eliminating)e(a)j(statement)e(is)g
(often)h(accomplished)f(by)h(simply)e(deleting)544 2704
y(it)d(from)h(a)h(graph)f(or)g(list)f(of)h(statements.)28
b(In)22 b(Ja)n(v)n(a)g(bytecode,)g(remo)o(ving)f(an)h(action)g
(instruction)544 2820 y(is)d(similar)l(,)h(e)o(xcept)f(that)g(you)h
(must)e(also)i(remo)o(v)o(e)e(all)i(the)f(associated)h(e)o(xpression)e
(instructions,)544 2935 y(in)j(order)g(to)g(a)n(v)n(oid)g(accumulating)
f(unused)g(ar)n(guments)h(on)g(the)g(stack.)29 b(This)21
b(sounds)f(relati)n(v)o(ely)544 3051 y(simple,)27 b(b)n(ut)f(there)i
(is)f(a)g(catch:)36 b(if)28 b(the)f(set)g(of)g(e)o(xpression)f
(instructions)g(cross)h(a)h(control)e(\003o)n(w)544 3166
y(boundary)-6 b(,)36 b(then)e(this)g(may)g(not)g(be)h(possible,)h
(because)f(other)g(paths)f(depend)g(on)h(the)f(stack)544
3282 y(depth)24 b(to)h(be)g(a)g(certain)g(height.)k(F)o(or)c(e)o
(xample:)843 3513 y Fo(iload)49 b(0)843 3595 y(iload)g(1)793
3676 y(/)398 b(\\)594 3758 y(iadd)f(imul)594 3840 y(istore)48
b(5)199 b(istore)49 b(5)594 3921 y(...)447 b(use\(5\))1191
4003 y(...)544 4268 y Fy(Despite)26 b(the)h(f)o(act)g(that)f(on)g(the)h
(left)g(hand)f(side)g(the)h(local)f(v)n(ariable)h(5)f(is)g(dead,)i(the)
e Fq(iadd)g Fy(and)544 4384 y Fq(istore)58 b(5)22 b Fy(cannot)g(be)g
(simply)f(deleted,)h(because)g(we)h(must)d(ensure)j(the)e(tw)o(o)h(ar)n
(guments)f(on)544 4499 y(the)k(stack)h(are)g(still)e(consumed.)33
b(The)25 b(best)h(we)g(can)g(do)f(is)g(replace)i(the)e(tw)o(o)g
(instructions)f(with)544 4615 y(tw)o(o)g Fq(pop)p Fy(s.)446
4905 y(F)o(or)33 b(de)n(v)o(eloping)e(analyses)h(and)h
(transformations,)g(it)g(should)e(be)i(clear)h(that)e(w)o(orking)g
(with)g(3-)300 5037 y(address)25 b(code)g(is)f(much)g(simpler)g(and)h
(more)f(ef)n(\002cient)h(than)g(dealing)f(with)g(stack)h(code.)2050
5509 y(11)p eop
%%Page: 12 20
12 19 bop 300 502 a Fr(2.2)147 b(B)t Fn(A)8 b(F)302 788
y Fy(B)q Ft(A)t(F)32 b Fy(is)27 b(a)g(bytecode)g(representation)f
(which)h(is)f(stack-based,)i(b)n(ut)e(without)g(the)g(complications)g
(that)300 920 y(are)g(present)f(in)g(Ja)n(v)n(a)g(bytecode.)32
b(Although)24 b(the)h(primary)g(goal)g(of)g(the)h(Soot)f(frame)n(w)o
(ork)g(is)g(to)g(a)n(v)n(oid)300 1053 y(ha)n(ving)32
b(to)h(deal)g(with)g(bytecode)g(as)g(stack)g(code,)i(it)e(is)f(still)g
(sometimes)f(necessary)j(to)f(analyze)g(or)300 1185 y(optimize)e
(bytecode)i(in)f(this)f(form.)54 b(The)33 b(follo)n(wing)d(subsections)
h(gi)n(v)o(e)i(B)q Ft(A)t(F)r Fy(')-5 b(s)36 b(moti)n(v)n(ation,)31
b(a)i(de-)300 1317 y(scription)24 b(of)i(B)q Ft(A)t(F)r
Fy(,)i(its)c(design)g(features,)i(and)e(then)h(a)g(w)o(alkthrough)e(of)
i(some)g(sample)f(code.)300 1677 y Fp(2.2.1)121 b(Motiv)n(ation)300
1927 y Fy(The)30 b(main)e(moti)n(v)n(ation)f(for)32 b(B)q
Ft(A)t(F)i Fy(is)29 b(to)h(simplify)d(the)j(de)n(v)o(elopment)d(of)j
(analyses)f(and)g(transforma-)300 2059 y(tions)g(which)g(absolutely)g
(must)g(be)h(performed)g(on)g(stack)g(code.)46 b(In)30
b(our)g(case,)i(there)e(are)h(tw)o(o)e(such)300 2192
y(occurances.)49 b(First,)32 b(in)e(order)h(to)f(produce)j(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(code,)32 b(it)e(is)h(necessary)g(to)f
(calculate)h(the)f(stack)300 2324 y(height)f(before)i(e)n(v)o(ery)e
(instruction.)45 b(Second,)31 b(before)g(producing)e(ne)n(w)g
(bytecode,)i(it)f(is)f(con)l(v)o(enient)300 2456 y(to)j(perform)h(some)
g(peephole)f(optimizations)e(and)j(stack)g(manipulations)d(to)j
(eliminate)f(redundant)300 2589 y(load/stores.)40 b(These)28
b(analyses)g(and)h(transformations)d(could)i(be)h(performed)f(on)g(Ja)n
(v)n(a)g(bytecode)g(di-)300 2721 y(rectly)-6 b(,)36 b(b)n(ut)d(it)h(is)
f(much)h(more)g(con)l(v)o(enient)f(to)g(implement)g(them)g(on)j(B)q
Ft(A)t(F)j Fy(because)34 b(of)h(its)e(design)300 2854
y(features,)25 b(which)g(are)g(described)g(belo)n(w)-6
b(.)300 3214 y Fp(2.2.2)121 b(Description)302 3463 y
Fy(B)q Ft(A)t(F)26 b Fy(is)19 b(a)i(stack-based)f(intermediate)g
(representation)g(of)g(Ja)n(v)n(a)g(bytecode)h(which)f(consists)f(of)h
(a)h(set)f(of)300 3596 y(orthogonal)j(instructions.)28
b(See)e(\002gure)e(2.2)g(for)g(the)g(list)f(of)k(B)q
Ft(A)t(F)i Fy(instructions.)f(The)d(w)o(ords)e(in)h(italics)300
3728 y(represent)g(attrib)n(utes)f(for)h(the)g(instructions.)k(F)o(or)c
(e)o(xample,)f Fz(t)h Fy(means)f(a)i(type,)e(so)h(actual)g(instances)f
(of)300 3860 y(add.)p Fz(t)k Fy(can)h(be)g Fq(add.i)p
Fy(,)f Fq(add.l)p Fy(,)g Fq(add.f)p Fy(,)g Fq(add.d)f
Fy(depending)h(on)g(whether)g(the)h(type)f(of)g(the)h
Fq(add)300 3993 y Fy(instruction)h(is)g(an)i(inte)o(ger)l(,)g(long,)g
(\003oat)f(or)h(double.)46 b(F)o(or)30 b(instructions)f(such)h(as)g
Fq(load)g Fy(or)g Fq(store)p Fy(,)300 4125 y(there)d(are)g(tw)o(o)f
(attrib)n(utes,)g(the)g(local)h(v)n(ariable)f(and)g(the)h(type)f(of)h
(the)f(instruction.)34 b(F)o(or)27 b Fq(dup2)p Fy(,)f(there)300
4258 y(are)c(tw)o(o)e(types)g(as)h(well,)g(the)g(tw)o(o)f(types)g(to)h
(be)g(duplicated)f(on)g(the)h(stack.)29 b(Most)20 b(of)g(these)h
(instructions)300 4390 y(follo)n(w)29 b(the)h(Ja)n(v)n(a)g(V)-6
b(irtual)29 b(Machine)h(speci\002cation[16)o(],)i(e)o(xcept)e(that)f
(the)h(instruction)f(names)g(ha)n(v)o(e)300 4522 y(been)23
b(made)g(more)f(consistent)g(by)g(requiring)h(that)f(the)h(more)f
(speci\002c)i(portion)d(of)i(the)g(v)n(ariable)f(name)300
4655 y(be)j(on)f(the)h(left.)31 b(Hence)25 b(the)g(name)f(interf)o
(acein)l(v)n(ok)o(e)h(as)g(opposed)f(to)g(in)l(v)n(ok)o(einterf)o(ace.)
2050 5509 y(12)p eop
%%Page: 13 21
13 20 bop 630 1295 2940 4 v 628 1415 4 121 v 680 1379
a Fz(local)24 b Fy(:=)h(@this)p 1963 1415 V 764 w(interf)o(acein)l(v)n
(ok)o(e)g Fz(method)f(n)p 3067 1415 V 100 w Fy(add.)p
Fz(t)p 3568 1415 V 628 1535 V 680 1499 a(local)g Fy(:=)h(@parameter)p
Fz(n)p 1963 1535 V 461 w Fy(specialin)l(v)n(ok)o(e)f
Fz(method)p 3067 1535 V 245 w Fy(and.)p Fz(t)p 3568 1535
V 628 1656 V 680 1620 a(local)g Fy(:=)h(@e)o(xception)p
1963 1656 V 522 w(staticin)l(v)n(ok)o(e)f Fz(method)p
3067 1656 V 311 w Fy(cmpg.)p Fz(t)p 3568 1656 V 630 1659
1335 4 v 628 1776 4 121 v 680 1740 a Fy(dup1.)p Fz(t)p
1963 1776 V 1081 w Fy(virtualin)l(v)n(ok)o(e)g Fz(method)p
3067 1776 V 261 w Fy(cmp.)p Fz(t)p 3568 1776 V 1965 1779
1105 4 v 628 1897 4 121 v 680 1860 a Fy(dup1)p Fq(_)p
Fy(x1.)p Fz(t)p Fq(_)p Fz(t)p 1963 1897 V 833 w Fy(\002eldget)h
Fz(\002eld)p 3067 1897 V 609 w Fy(cmpl.)p Fz(t)p 3568
1897 V 628 2017 V 680 1981 a Fy(dup1)p Fq(_)p Fy(x2.)p
Fz(t)p Fq(_)p Fz(tt)p 1963 2017 V 805 w Fy(\002eldput)g
Fz(\002eld)p 3067 2017 V 603 w Fy(di)n(v)-6 b(.)p Fz(t)p
3568 2017 V 628 2137 V 680 2101 a Fy(dup2.)p Fz(tt)p
1963 2137 V 1053 w Fy(staticget)24 b Fz(\002eld)p 3067
2137 V 576 w Fy(mul.)p Fz(t)p 3568 2137 V 628 2258 V
680 2222 a Fy(dup2)p Fq(_)p Fy(x1.)p Fz(tt)p Fq(_)p Fz(t)p
1963 2258 V 805 w Fy(staticput)g Fz(\002eld)p 3067 2258
V 570 w Fy(ne)o(g.)p Fz(t)p 3568 2258 V 1965 2261 1105
4 v 628 2378 4 121 v 680 2342 a Fy(dup2)p Fq(_)p Fy(x2.)p
Fz(tt)p Fq(_)p Fz(tt)p 1963 2378 V 777 w Fy(load.)p Fz(t)g(local)p
3067 2378 V 656 w Fy(or)-5 b(.)p Fz(t)p 3568 2378 V 630
2381 1335 4 v 628 2498 4 121 v 680 2462 a(t)p Fy(2)p
Fz(t)p 1963 2498 V 1228 w Fy(store.)p Fz(t)25 b(local)p
3067 2498 V 633 w Fy(rem.)p Fz(t)p 3568 2498 V 628 2619
V 680 2583 a Fy(checkcast)g Fz(r)l(efT)-7 b(ype)p 1963
2619 V 629 w Fy(inc.i)25 b Fz(local)f(constant)p 3067
2619 V 342 w Fy(shl.)p Fz(t)p 3568 2619 V 1965 2622 1105
4 v 628 2739 4 121 v 680 2703 a Fy(instanceof)g Fz(type)p
1963 2739 V 734 w Fy(ne)n(w)h Fz(r)l(efT)-7 b(ype)p 3067
2739 V 623 w Fy(shr)i(.)p Fz(t)p 3568 2739 V 630 2743
1335 4 v 628 2860 4 121 v 680 2823 a Fy(lookupswitch)p
1963 2860 V 795 w(ne)n(w)o(array)25 b Fz(type)p 3067
2860 V 547 w Fy(ushr)-5 b(.)p Fz(t)p 3568 2860 V 628
2980 V 825 2944 a Fv(f)p Fy(case)25 b Fz(value)1287 2959
y Fm(1)1326 2944 y Fy(:)31 b(goto)24 b Fz(label)1787
2959 y Fm(1)p 1963 2980 V 2014 2944 a Fy(ne)n(wmultiarray)g
Fz(type)h(n)p 3067 2980 V 260 w Fy(xor)-5 b(.)p Fz(t)p
3568 2980 V 3069 2983 501 4 v 628 3100 4 121 v 825 3064
a Fy(...)p 1963 3100 V 1114 w(arraylength)p 3067 3100
V 651 w(ifne)24 b Fz(label)p 3568 3100 V 1965 3104 1105
4 v 628 3221 4 121 v 825 3185 a Fy(case)h Fz(value)1237
3200 y Fl(n)1284 3185 y Fy(:)31 b(goto)24 b Fz(label)1745
3200 y Fl(n)p 1963 3221 V 2014 3185 a Fy(ifcmpne.)p Fz(t)g(label)p
3067 3221 V 501 w Fy(ifeq)g Fz(label)p 3568 3221 V 628
3341 V 825 3305 a Fy(def)o(ault:)30 b(goto)24 b Fz(defaultLabel)p
Fv(g)p 1963 3341 V 98 w Fy(ifcmpeq.)p Fz(t)g(label)p
3067 3341 V 501 w Fy(ifge)g Fz(label)p 3568 3341 V 628
3462 V 680 3425 a Fy(tableswitch)p 1963 3462 V 879 w(ifcmpge.)p
Fz(t)g(label)p 3067 3462 V 501 w Fy(i\003e)h Fz(label)p
3568 3462 V 628 3582 V 825 3546 a Fv(f)p Fy(case)g Fz(low)p
Fy(:)31 b(goto)24 b Fz(lowLabel)p 1963 3582 V 167 w Fy(ifcmple.)p
Fz(t)g(label)p 3067 3582 V 523 w Fy(ifgt)g Fz(label)p
3568 3582 V 628 3702 V 825 3666 a Fy(...)p 1963 3702
V 1114 w(ifcmpgt.)p Fz(t)g(label)p 3067 3702 V 517 w
Fy(i\003t)g Fz(label)p 3568 3702 V 3069 3706 501 4 v
628 3823 4 121 v 825 3787 a Fy(case)h Fz(high)p Fy(:)30
b(goto)24 b Fz(highLabel)p 1963 3823 V 150 w Fy(ifcmplt.)p
Fz(t)g(label)p 3067 3823 V 539 w Fy(goto)g Fz(label)p
3568 3823 V 1965 3826 1105 4 v 628 3943 4 121 v 825 3907
a Fy(def)o(ault:)30 b(goto)24 b Fz(defaultLabel)p Fv(g)p
1963 3943 V 98 w Fy(nop)p 3067 3943 V 955 w(return.)p
Fz(t)p 3568 3943 V 630 3946 1335 4 v 628 4063 4 121 v
680 4027 a Fy(entermonitor)p 1963 4063 V 818 w(breakpoint)p
3067 4063 V 678 w(thro)n(w)-6 b(.r)p 3568 4063 V 1965
4067 1606 4 v 628 4184 4 121 v 680 4148 a(e)o(xitmonitor)p
1963 4184 V 868 w(push)24 b Fz(constant)p 3067 4184 V
553 w Fy(pop.)p Fz(t)p 3568 4184 V 630 4187 2940 4 v
1323 4454 a Fy(Figure)h(2.2:)31 b(The)24 b(list)g(of)j(B)q
Ft(A)t(F)j Fy(statements.)2050 5509 y(13)p eop
%%Page: 14 22
14 21 bop 300 499 a Fp(2.2.3)121 b(Design)35 b(f)o(eature:)42
b(Quantity)34 b(and)f(quality)i(of)e(b)n(ytecodes)300
749 y Fy(One)j(of)g(the)g(headaches)g(in)g(dealing)f(with)g(Ja)n(v)n(a)
h(bytecodes)f(directly)g(is)h(the)g(massi)n(v)o(e)e(number)h(of)300
881 y(dif)n(ferent)30 b(instructions)e(present.)47 b(Upon)30
b(inspection)f(of)h(the)g(Ja)n(v)n(a)g(V)-6 b(irtual)30
b(Machine)f(speci\002cation,)300 1014 y(we)i(can)g(see)f(that)g(there)h
(are)g(o)o(v)o(er)f(201)g(dif)n(ferent)g(bytecodes.)50
b(B)q Ft(A)t(F)r Fy(,)34 b(on)d(the)f(other)g(hand,)i(contains)300
1146 y(only)37 b(about)g(60)g(bytecode)g(instructions.)67
b(This)36 b(compaction)h(has)g(been)h(achie)n(v)o(ed)e(in)i(tw)o(o)f(w)
o(ays:)300 1278 y(\(1\))c(by)f(introducing)g(type)g(attrib)n(utes)g
(such)g(as)h(the)g Fq(.i)f Fy(and)h Fq(.l)f Fy(in)g Fq(add.i)p
Fy(,)i Fq(add.l)p Fy(,)g(and)e(\(2\))h(by)300 1411 y(eliminating)g
(multiple)g(forms)i(of)g(the)g(same)g(instruction)f(such)g(as)i
Fq(iload_0)p Fy(,)g Fq(iload_1)p Fy(.)60 b(This)300 1543
y(can)31 b(be)g(achie)n(v)o(ed)f(because)j(B)q Ft(A)t(F)j
Fy(is)30 b(not)g(concerned)i(with)e(the)g(compactness)g(of)h(the)g
(encoding,)g(as)300 1676 y(were)d(the)g(designers)f(of)h(the)f(Ja)n(v)n
(a)g(V)-6 b(irtual)27 b(Machine)h(speci\002cation,)g(b)n(ut)f(with)g
(the)g(compactness)g(of)300 1808 y(the)d(representation.)31
b(Thus)24 b(we)h(can)g(compact)f(twenty)g(dif)n(ferent)g(v)n(ariants)g
(of)g(the)h Fq(load)f Fy(instruction)300 1941 y(into)g(one)h
Fq(load)f Fy(which)g(has)h(tw)o(o)f(type)h(attrib)n(utes:)k(a)c(type)g
(and)f(a)i(local)e(v)n(ariable)g(name.)300 2300 y Fp(2.2.4)121
b(Design)35 b(f)o(eature:)42 b(No)33 b(JSR-equiv)n(alent)j(instruction)
300 2550 y Fy(The)h(jump)f(subroutine)f(bytecode)i(\()p
Fq(JSR)p Fy(\))g(instruction)e(present)i(in)f(Ja)n(v)n(a)h(bytecode)f
(is)h(often)f(v)o(ery)300 2682 y(complicated)29 b(to)g(deal)h(with,)g
(because)h(it)e(is)g(essentially)g(an)h(interprocedural)f(feature)i
(inserted)e(into)300 2815 y(a)f(traditionally)e(intraprocedural)i
(conte)o(xt.)39 b(Analyses)27 b(and)h(transformations)e(on)k(B)q
Ft(A)t(F)j Fy(can)28 b(be)g(sim-)300 2947 y(pli\002ed)33
b(considerably)g(by)h(requiring)e(that)i(the)h(B)q Ft(A)t(F)k
Fy(instruction)32 b(set)h(not)g(ha)n(v)o(e)g(a)h Fq(JSR)p
Fy(-equi)n(v)n(alent)300 3080 y(instruction.)39 b(One)29
b(might)e(think)g(that)h(this)f(means)h(that)i(B)q Ft(A)t(F)j
Fy(can)c(not)f(represent)g(a)h(lar)n(ge)f(v)n(ariety)g(of)300
3212 y(Ja)n(v)n(a)k(programs)g(which)g(contain)g Fq(JSR)p
Fy(s.)53 b(But)32 b(in)g(f)o(act,)j(most)c Fq(JSR)h Fy(bytecode)h
(instructions)d(can)j(be)300 3344 y(eliminated)21 b(through)h(the)h
(use)g(of)f(subroutine)g(duplication.)28 b(The)23 b(idea)g(is)f(to)h
(transform)f(each)h Fq(jsr)59 b(x)300 3477 y Fy(into)26
b(a)h Fq(goto)59 b(y)27 b Fy(where)h Fq(y)f Fy(is)f(a)h(duplicate)g
(cop)o(y)g(of)g(the)f(subroutine)g Fq(x)h Fy(with)f(the)h(\002nal)g
Fq(ret)g Fy(ha)n(ving)300 3609 y(been)i(transformed)f(into)g(a)i
Fq(goto)e Fy(to)g(the)h(instruction)e(follo)n(wing)g(the)h
Fq(jsr)60 b(x)p Fy(.)42 b(See)30 b(\002gure)f(2.3)g(for)300
3742 y(an)c(e)o(xample)f(of)h(code)g(duplication)e(in)h(action.)446
3924 y(The)36 b(code)g(gro)n(wth)e(in)h(w)o(orst)g(case)h(is)f(e)o
(xponential)f(\(with)h(respect)h(to)f(the)g(number)g(of)g(nested)300
4056 y Fq(JSRs)p Fy(\),)22 b(b)n(ut)f(in)g(practice)i(the)e(technique)h
(produces)f(v)o(ery)h(little)e(code)i(gro)n(wth)f(because)h
Fq(JSR)p Fy(s)f(are)i(not)300 4189 y(used)i(that)f(much,)g(and)h(the)f
(subroutines)g(represent)h(a)g(small)f(fraction)g(of)h(the)g(total)f
(amount)g(of)h(code.)300 4549 y Fp(2.2.5)121 b(Design)35
b(f)o(eature:)42 b(No)33 b(constant)i(pool)300 4798 y
Fy(One)27 b(of)h(the)f(man)o(y)f(encoding)g(issues)h(in)g(Ja)n(v)n(a)g
(bytecode)g(is)f(the)h(constant)g(pool.)37 b(Bytecode)28
b(instruc-)300 4931 y(tions)22 b(must)f(refer)j(to)f(indices)f(in)h
(this)e(pool)h(to)h(access)g(\002elds,)g(methods,)f(classes,)h(and)g
(constants,)f(and)300 5063 y(this)f(constant)f(pool)h(must)f(be)i
(tediously)e(maintained.)31 b(B)q Ft(A)t(F)26 b Fy(abstracts)21
b(a)o(w)o(ay)h(the)f(constant)g(pool,)g(and)300 5195
y(thus)30 b(it)h(is)g(easier)h(to)f(manipulate)h(B)q
Ft(A)t(F)k Fy(code.)50 b(In)32 b(te)o(xtual)g(B)q Ft(A)t(F)k
Fy(\(when)c(it)e(is)h(written)g(out)g(to)f(a)i(te)o(xt)2050
5509 y(14)p eop
%%Page: 15 23
15 22 bop 1069 768 a Fo(...)1069 850 y(istore_2)1069
931 y(jsr)50 b(label1)1069 1095 y(...)1069 1177 y(istore_3)1069
1258 y(jsr)g(label1)870 1422 y(label1:)1069 1503 y(invokestatic)e(f)
1069 1585 y(ret)p 1948 1837 4 1330 v 2329 517 a(...)2329
599 y(istore_2)2329 681 y(goto)h(label1)2130 762 y(label_ret_1:)2329
926 y(...)2329 1007 y(istore_3)2329 1089 y(goto)g(label1)2130
1171 y(label_ret_2:)2130 1334 y(label1:)2329 1416 y(invokestatic)f(f)
2329 1497 y(goto)h(label_ret1)2130 1661 y(label2:)2329
1743 y(invokestatic)f(f)2329 1824 y(goto)h(label_ret2)883
2104 y Fy(Figure)25 b(2.3:)30 b(Example)24 b(of)h(code)g(duplication)e
(to)i(eliminate)e Fq(JSRs)p Fy(.)300 2390 y(\002le\))i(the)g(method)f
(signature)g(or)h(\002eld)g(is)f(written)g(out)h(e)o(xplicitly)-6
b(.)28 b(F)o(or)d(e)o(xample:)300 2627 y Fo(bytecode:invokevirtual)46
b(#10)300 2708 y(Baf:)248 b(virtualinvoke)48 b(<java.io.PrintStream:)
1695 2790 y(void)h(println\(java.lang.String\)>;)446
3060 y Fy(Or)l(,)25 b(another)g(e)o(xample:)300 3297
y Fo(bytecode:)48 b(ldc)h(#1)300 3379 y(Baf:)298 b(push)49
b("foo";)446 3649 y Fy(Internally)-6 b(,)27 b(these)g(references)h(are)
g(represented)f(directly)g(in)f(the)h(code.)38 b(F)o(or)27
b(e)o(xample,)f(the)j(B)q Ft(A)t(F)300 3764 y Fy(instruction)23
b Fq(PushInst)g Fy(has)i(a)g(\002eld)g(modi\002able)f(by)h
(get/setString\(\).)300 4103 y Fp(2.2.6)121 b(Design)35
b(f)o(eature:)42 b(Explicit)34 b(local)h(v)n(ariab)o(les)302
4335 y Fy(B)q Ft(A)t(F)h Fy(also)29 b(has)i(another)f(comestic)g(adv)n
(antage)g(o)o(v)o(er)f(Ja)n(v)n(a)h(bytecode)g(as)h(it)f(has)g(e)o
(xplicit)f(names)h(for)300 4451 y(its)36 b(local)h(v)n(ariables.)66
b(This)36 b(allo)n(ws)g(for)h(more)g(descripti)n(v)o(e)e(names)i(when)g
(the)h(B)q Ft(A)t(F)k Fy(code)c(is)e(pro-)300 4566 y(duced)d(from)i(J)t
Ft(I)t(M)t(P)t(L)t(E)40 b Fy(code)34 b(in)f(which)g(the)g(local)g(v)n
(ariables)f(might)g(already)i(ha)n(v)o(e)f(names.)56
b(There)300 4682 y(are)31 b(tw)o(o)e(local)h(v)n(ariables)f(types)h(in)
i(B)q Ft(A)t(F)r Fy(,)i Fq(word)29 b Fy(and)h Fq(dword)p
Fy(.)46 b(These)30 b(correspond)f(to)h(32-bit)f(and)300
4797 y(64-bit)c(quantities)e(respecti)n(v)o(ely)-6 b(.)31
b(W)-8 b(e)26 b(split)e(the)h(local)h(v)n(ariables)e(into)h(these)g(tw)
o(o)g(cate)o(gories)g(to)g(sim-)300 4913 y(plify)h(code)h(generation,)g
(and)f(local)h(v)n(ariable)f(packing,)h(a)g(technique)f(that)g(we)h
(use)g(to)f(minimize)f(the)300 5028 y(number)31 b(of)h(v)n(ariables)e
(used.)51 b(Note)31 b(that)h(because)g(the)f(local)g(v)n(ariables)g(ha)
n(v)o(e)g(names)h(and)f(not)g(slot)300 5144 y(numbers)36
b(then)f(some)h(sort)g(of)g(equi)n(v)n(alence)g(must)f(be)h
(established)f(between)i(the)f(local)g(v)n(ariables)300
5260 y(which)24 b(contain)h(the)f(initial)g(v)n(alues)g(such)g(as)h
Fq(this)p Fy(,)f(or)h(the)g(\002rst)f(parameter)l(,)i(etc.)2050
5509 y(15)p eop
%%Page: 16 24
16 23 bop 300 499 a Fp(2.2.7)121 b(Design)35 b(f)o(eature:)42
b(T)-7 b(yped)34 b(instructions)300 732 y Fy(A)28 b(lar)n(ge)g
(proportion)f(of)h(the)f(bytecodes)g(are)i(typed,)f(in)f(the)h(sense)g
(that)f(their)h(ef)n(fect)g(on)f(the)h(stack)g(is)300
847 y(b)n(uilt)h(into)g(the)h(name)g(of)g(the)f(instruction.)45
b(F)o(or)30 b(e)o(xample,)g Fq(iload)f Fy(loads)g(an)i(inte)o(ger)e(on)
g(the)h(stack)300 963 y(and)24 b Fq(iadd)f Fy(adds)h(tw)o(o)g(inte)o
(gers)f(from)h(the)f(stack.)31 b(There)24 b(are,)h(ho)n(we)n(v)o(er)l
(,)e(a)h(fe)n(w)g(instructions)e(such)i(as)300 1079 y
Fq(dup,)59 b(dup2,)g(swap)24 b Fy(which)h(are)h(not)f(typed,)g(and)h
(this)e(causes)i(some)f(complications.)30 b(Consider)300
1194 y(the)25 b(follo)n(wing)e(code:)499 1434 y Fo(...)499
1515 y(istore_3)499 1597 y(dup2)446 1870 y Fy(What)34
b(does)g(the)g(dup2)g(instruction)e(do?)59 b(It)35 b(duplicates)e(the)h
(top)f(tw)o(o)h(32-bit)g(elements)f(of)h(the)300 1986
y(stack.)c(Although)22 b(this)h(operation)f(is)h(easy)h(to)f(implement)
f(for)i(a)f(Ja)n(v)n(a)g(virtual)g(machine)g(whose)g(stack)300
2101 y(representation)29 b(is)g(a)h(series)f(of)h(32-bit)e(elements,)i
(if)g(you)f(are)h(performing)f(typed)g(analyses)g(on)g(this)300
2217 y(bytecode)i(you)g(may)h(run)f(into)g(some)g(confusion)f(as)i(to)f
(what)g(e)o(xactly)g(is)g(occuring)h(with)e(the)i(dup2)300
2333 y(instructions.)59 b(In)35 b(particular)l(,)i(if)e(you)f(are)i
(attempting)d(to)h(con)l(v)o(ert)h(this)e(code)i(to)g(typed)f
(3-address)300 2448 y(code,)g(there)f(are)g(tw)o(o)f(possible)f(con)l
(v)o(ersions,)h(based)g(on)g(the)h(types)e(present)h(on)g(the)h(stack.)
53 b(If)32 b(the)300 2564 y(types)25 b(present)g(on)h(the)f(stack)h
(before)g(the)f Fq(dup2)g Fy(is)g(a)h(64-bit)f(quantity)f(then)h(it)g
(should)g(be)h(con)l(v)o(erted)300 2679 y(to)e(a)i(single)d(cop)o(y)i
(such)g(as:)499 2919 y Fo(long)49 b($s1,)g($s0;)499 3082
y(...)499 3164 y($s1)h(=)f($s0)446 3437 y Fy(But)27 b(if)f(the)g(types)
g(present)g(before)g(the)g Fq(dup2)g Fy(are)h Fq(int)p
Fy(s)e(say)-6 b(,)26 b(then)g(you)g(get)g(a)g(con)l(v)o(ersion)f(such)
300 3553 y(as:)499 3792 y Fo(int)50 b($s3,)f($s2,)g($s1,)g($s0;)499
3955 y(...)499 4037 y($s3)h(=)f($s1;)499 4119 y($s2)h(=)f($s0;)446
4392 y Fy(So)23 b(which)g(one)g(do)f(you)h(pick)f(when)h(you)f(perform)
h(a)g(con)l(v)o(ersion)f(to)h(3-address)f(code?)31 b(W)-8
b(ell)23 b(that)300 4508 y(depends)e(on)h(the)f(contents)g(of)h(the)g
(stack.)29 b(Unfortunately)-6 b(,)21 b(the)h(contents)f(of)g(the)h
(stack)g(can)g(not)f(be)h(de-)300 4623 y(termined)h(locally)f(by)h(the)
g(type)g(of)g(the)h(dup2)e(because)i(it)f(is)f(untyped.)30
b(So)23 b(in)g(order)h(to)e(determine)h(the)300 4739
y(e)o(xact)e(ef)n(fect)g(of)h(an)f(instruction)f(such)g(as)i
Fq(dup2)e Fy(on)h(the)g(stack,)h(one)f(must)f(perform)h(an)g(abstract)g
(stack)300 4854 y(simulation.)41 b(This)29 b(means)g(that)f(the)h
(cumulati)n(v)o(e)e(ef)n(fect)j(of)f(each)h(bytecode)f(preceeding)g
(the)g Fq(dup2)300 4970 y Fy(must)k(be)i(considered)f(to)g(determine)g
(the)h(e)o(xact)f(contents)g(of)g(the)h(stack)f(preceeding)h(the)f
Fq(iload)p Fy(.)300 5086 y(This)22 b(is)h(easy)g(to)f(implement)g(b)n
(ut)g(non-tri)n(vial)f(because)j(this)e(is)g(a)i(\002x)o(ed)e(point)g
(iteration)g(problem)h(that)300 5201 y(spans)h(basic)h(blocks.)2050
5509 y(16)p eop
%%Page: 17 25
17 24 bop 446 499 a Fy(W)-8 b(e)24 b(a)n(v)n(oid)e(ha)n(ving)h(to)g
(perform)g(abstract)g(stack)g(simulations)d(on)25 b(B)q
Ft(A)t(F)j Fy(by)23 b(imposing)e(the)i(follo)n(w-)300
615 y(ing)29 b(constraint)f(on)j(B)q Ft(A)t(F)r Fy(:)42
b(each)32 b(B)q Ft(A)t(F)i Fy(instruction)28 b(is)g(fully)h(typed;)h
(its)f(ef)n(fect)g(on)g(the)g(stack)g(is)g(fully)300
730 y(speci\002ed)i(by)g(the)g(type)g(attrib)n(ute,)g(as)g(in)g
Fq(iload.i)f Fy(which)g(means)h(load)g(an)g(inte)o(ger)f(and)h
Fq(dup.f)300 846 y Fy(means)24 b(duplicate)h(a)g(\003oat.)446
1011 y(This)32 b(constraint)f(simpli\002es)f(analyses)i(on)h(B)q
Ft(A)t(F)38 b Fy(considerably)-6 b(.)50 b(Note)32 b(that)g(in)f(order)i
(to)e(create)302 1127 y(B)q Ft(A)t(F)c Fy(instructions)20
b(from)h(Ja)n(v)n(a)g(bytecode)h(some)f(abstract)h(stack)f
(interpretation)g(must)f(be)i(performed.)300 1242 y(But)e(at)f(least)h
(this)e(is)i(performed)f(by)h(the)h(S)t Ft(O)t(O)q(T)k
Fy(frame)n(w)o(ork,)20 b(and)f(not)g(by)h(analysis)f(writers)g(who)g(w)
o(ork)300 1358 y(with)24 b(the)j(B)q Ft(A)t(F)j Fy(code)25
b(directly)-6 b(.)29 b(More)c(on)g(this)e(topic)i(in)f(chapter)h(3.)300
1697 y Fp(2.2.8)121 b(Design)35 b(f)o(eature:)42 b(Stac)n(k)33
b(of)g(v)n(alues)300 1930 y Fy(The)24 b(B)q Ft(A)t(F)j
Fy(stack)22 b(is)g(a)g(stack)g(of)g(v)n(alues,)f(as)h(opposed)g(to)f(a)
i(stack)e(of)i(w)o(ords.)29 b(Ef)n(fecti)n(v)o(ely)-6
b(,)20 b(all)i(elements)300 2045 y(on)j(the)f(stack)h(ha)n(v)o(e)f
(size)h(1.)31 b(See)26 b(\002gure)f(2.4)f(for)h(an)g(illustration.)p
840 2294 916 4 v 838 2415 4 121 v 1187 2379 a(long)1365
2394 y Fl(h)p 1754 2415 V 840 2418 916 4 v 838 2538 4
121 v 1196 2502 a Fy(long)1374 2517 y Fl(l)p 1754 2538
V 840 2542 916 4 v 838 2662 4 121 v 1245 2626 a Fy(int)p
1754 2662 V 840 2665 916 4 v 838 2786 4 121 v 1140 2750
a(double)1412 2765 y Fl(h)p 1754 2786 V 840 2789 916
4 v 838 2909 4 121 v 1149 2873 a Fy(double)1421 2888
y Fl(l)p 1754 2909 V 840 2913 916 4 v 2158 2913 4 622
v 2460 2418 872 4 v 2458 2538 4 121 v 2807 2502 a Fy(long)p
3330 2538 V 2460 2542 872 4 v 2458 2662 4 121 v 2843
2626 a(int)p 3330 2662 V 2460 2665 872 4 v 2458 2786
4 121 v 2760 2750 a(double)p 3330 2786 V 2460 2789 872
4 v 1055 2997 a(bytecode)g(stack)p 2158 3033 4 121 v
1062 w(B)q Ft(A)t(F)30 b Fy(stack)669 3300 y(Figure)25
b(2.4:)30 b(The)25 b(bytecode)g(stack)f(has)h(size)g(5,)g(and)f(the)j
(B)q Ft(A)t(F)j Fy(stack)25 b(has)f(size)h(3.)446 3532
y(This)36 b(means)g(that)g(a)h Fq(dup)f Fy(instruction)f(is)h
(interpreted)g(to)g(duplicate)g(the)h(top)f(element)g(of)g(the)300
3648 y(stack,)k(no)d(matter)f(what)h(the)g(implementation)e(size)i(of)g
(that)g(element)f(is.)67 b(Similarly)-6 b(,)39 b Fq(dup2)d
Fy(du-)300 3763 y(plicates)d(tw)o(o)g(elements.)57 b(This)33
b(allo)n(ws)h(B)q Ft(A)t(F)39 b Fy(to)34 b(be)f(some)n(what)g(more)g(e)
o(xpressi)n(v)o(e)f(than)h(bytecode)300 3879 y(because)28
b Fq(dup2.dl)e Fy(means)h(duplicate)f(the)h(double)g(and)g(long)g
(which)g(are)h(on)f(the)g(stack,)h(a)f(total)g(of)300
3994 y(128-bit)d(elements.)446 4160 y(The)h(goal)g(of)g(this)e(design)h
(feature)i(is)e(also)h(to)f(simplify)f(analyses.)300
4499 y Fp(2.2.9)121 b(Design)35 b(f)o(eature:)42 b(Explicit)34
b(e)n(xception)i(rang)q(es)300 4731 y Fy(Exceptions)27
b(in)g(Baf)i(are)f(represented)g(as)g(e)o(xplicit)e(e)o(xceptions)h
(ranges)h(using)f(labels.)39 b(This)27 b(mirrors)300
4847 y(the)32 b(Ja)n(v)n(a)g(bytecode)g(representation)g(as)g(opposed)g
(to)g(the)g(Ja)n(v)n(a)g(representation)f(which)h(uses)g(struc-)300
4963 y(tured)25 b(try-catch)g(pairs.)30 b(See)c(\002gure)f(2.5)g(for)g
(an)g(illustration)d(of)j(this.)2050 5509 y(17)p eop
%%Page: 18 26
18 25 bop 390 2313 a Fo(try)49 b({)589 2395 y(System.out.)739
2476 y(println\("try-block"\);)390 2558 y(})390 2640
y(catch\(Exception)e(e\))390 2721 y({)589 2803 y(System.out.)739
2885 y(println\("exception"\);)390 2967 y(})p 1948 3548
4 1859 v 2209 1742 a(word)i(r0;)2209 1905 y(r0)h(:=)f(@this;)2060
2069 y(label0:)2209 2150 y(staticget)f(java.lang.System.out;)2209
2232 y(push)h("try-block";)2209 2314 y(virtualinvoke)f(println;)2060
2477 y(label1:)2209 2559 y(goto)h(label3;)2060 2722 y(label2:)2209
2804 y(store.r)g(r0;)2209 2886 y(staticget)f(java.lang.System.out;)2209
2967 y(push)h("exception";)2209 3049 y(virtualinvoke)f(println;)2060
3212 y(label3:)2209 3294 y(return;)2209 3457 y(catch)h
(java.lang.Exception)d(from)2309 3539 y(label0)j(to)g(label1)g(with)g
(label2;)p 1948 3669 4 121 v 780 3753 a Fy(original)24
b(Ja)n(v)n(a)g(code)p 1948 3789 V 1215 w(B)q Ft(A)t(F)30
b Fy(code)870 4056 y(Figure)25 b(2.5:)30 b(Example)24
b(demonstrating)f(e)o(xplicit)g(e)o(xception)h(ranges.)2050
5509 y(18)p eop
%%Page: 19 27
19 26 bop 300 499 a Fp(2.2.10)122 b(W)-5 b(alkthr)n(ough)34
b(of)f(e)n(xample)300 732 y Fy(This)f(subsection)g(highlights)f(the)h
(dif)n(ferences)h(e)o(xplicitly)e(between)i(\002gures)h(2.6)e(and)h
(2.7.)55 b(Figure)300 847 y(2.6)33 b(consists)e(of)i(dissassembled)e
(Ja)n(v)n(a)i(bytecode)f(as)h(produced)g(by)f Fq(javap)p
Fy(,)i(and)f(2.7)g(consists)e(of)302 963 y(B)q Ft(A)t(F)f
Fy(code.)h(Notice:)420 1236 y(1.)49 b(there)25 b(are)g(local)g(v)n
(ariables)f(in)g(the)i(B)q Ft(A)t(F)k Fy(e)o(xample)24
b(which)g(are)i(named)e Fq(this)p Fy(,)g Fq(x)p Fy(,)g(and)h
Fq(array)544 1352 y Fy(and)g(gi)n(v)o(en)e(the)i(type)f
Fq(word)p Fy(.)420 1550 y(2.)49 b(the)22 b(instructions)f(with)g(the)i
Fq(:=)p Fy(.)29 b(These)23 b(are)g(the)f(identity)f(instructions)g
(which)h(identify)g(which)544 1666 y(local)31 b(v)n(ariables)f(are)i
(pre-loaded)g(with)e(meaning,)i(such)f(as)g Fq(this)g
Fy(or)g(the)g(contents)f(of)i Fq(pa-)544 1782 y(rameters)p
Fy(.)420 1980 y(3.)49 b(the)22 b(pushing)f(of)h(constants)g(in)g(the)g
(ja)n(v)n(ap)g(code)g(come)g(in)g(tw)o(o)g(dif)n(ferent)g(forms:)29
b Fq(bipush)21 b Fy(and)544 2096 y Fq(iconst_0)p Fy(.)29
b(But)c(in)h(B)q Ft(A)t(F)r Fy(,)i(there)d(is)f(a)i(single)d
(instruction)h(which)g(does)g(the)h(job:)30 b Fq(push)p
Fy(.)420 2294 y(4.)49 b(The)30 b(code)h(layout)e(is)h(also)g
(interesting)f(because)h(in)g(the)g(ja)n(v)n(ap)g(code)h(all)f(code)g
(is)g(referred)h(to)544 2410 y(by)d(inde)o(x,)g(b)n(ut)f(in)j(B)q
Ft(A)t(F)j Fy(labels)28 b(are)h(used)f(which)f(mak)o(e)h(it)g(much)g
(easier)g(to)g(read,)h(and)f(mak)o(es)544 2525 y(the)d(basic)f(blocks)g
(in)h(the)f(code)h(more)g(e)n(vident.)420 2724 y(5.)49
b(the)24 b(constant)f(pool)h(has)g(been)g(eliminated)f(in)j(B)q
Ft(A)t(F)r Fy(,)h(and)d(that)g(all)g(references)h(to)f(methods)f(and)
544 2840 y(\002elds)i(are)g(directly)f(inlined)g(into)g(the)h
(instructions)e(such)h(as)h(in)544 2955 y Fq(fieldget)58
b(<Main:)g(int)h(a>)420 3154 y Fy(6.)49 b(the)28 b(clearer)g(names)g
(in)h(B)q Ft(A)t(F)r Fy(.)43 b(F)o(or)28 b(e)o(xample,)f(an)h(array)h
(read)f(is)g Fq(iaload)e Fy(in)h(ja)n(v)n(ap)h(code)g(b)n(ut)544
3269 y(in)e(B)q Ft(A)t(F)k Fy(is)25 b Fq(arrayread.i)p
Fy(.)300 3759 y Fr(2.3)147 b(J)8 b Fn(I)g(M)g(P)g(L)g(E)300
4028 y Fy(This)28 b(section)h(describes)i(J)t Ft(I)t(M)t(P)t(L)t(E)r
Fy(.)48 b(The)29 b(moti)n(v)n(ation)d(for)31 b(J)t Ft(I)t(M)t(P)t(L)t
(E)k Fy(is)29 b(gi)n(v)o(en,)g(its)f(description,)h(a)g(list)300
4143 y(of)c(its)f(design)g(features,)h(and)g(then)f(\002nally)h(a)g(w)o
(alkthrough)f(of)g(the)h(e)o(xample)f(piece)h(of)g(code.)300
4482 y Fp(2.3.1)121 b(Motiv)n(ation)300 4715 y Fy(Optimizing)31
b(stack)j(code)f(directly)g(is)g(a)o(wkw)o(ard)g(for)h(multiple)e
(reasons,)j(e)n(v)o(en)e(if)g(the)g(code)h(is)f(in)g(a)300
4831 y(streamlined)21 b(form)g(such)g(as)j(B)q Ft(A)t(F)r
Fy(.)33 b(First,)22 b(the)f(stack)h(implicitly)d(participates)i(in)g(e)
n(v)o(ery)g(computation;)300 4946 y(there)31 b(are)h(ef)n(fecti)n(v)o
(ely)e(tw)o(o)h(types)f(of)h(v)n(ariables,)h(the)f(implicit)e(stack)i
(v)n(ariables)g(and)g(e)o(xplicit)e(local)300 5062 y(v)n(ariables.)g
(Second,)24 b(the)e(e)o(xpressions)f(are)j(not)e(e)o(xplicit,)g(and)g
(must)g(be)h(located)f(on)h(the)f(stack.)30 b(These)300
5177 y(disadv)n(antages)23 b(were)j(discussed)e(in)g(detail)g(in)h
(section)f(2.1.2.)2050 5509 y(19)p eop
%%Page: 20 28
20 27 bop 300 1489 a Fo(Method)49 b(int)g(stepPoly\(int\))449
1571 y(0)h(bipush)f(10)449 1653 y(2)h(newarray)e(int)449
1734 y(4)i(astore_2)449 1816 y(5)g(iload_1)449 1898 y(6)g(bipush)f(10)
449 1979 y(8)h(if_icmple)e(29)400 2061 y(11)h(aload_2)400
2143 y(12)g(iconst_0)400 2224 y(13)g(aload_0)400 2306
y(14)g(getfield)f(#7)i(<Field)f(int)g(a>)400 2388 y(17)g(iastore)400
2470 y(18)g(getstatic)f(#9)i(<Field)e(java.io.PrintStream)f(out>)400
2551 y(21)i(ldc)g(#1)h(<String)e("foo">)400 2633 y(23)h(invokevirtual)e
(#10)j(<Method)e(void)h(println\(java.lang.String\)>)400
2715 y(26)g(goto)g(44)400 2796 y(29)g(iload_1)400 2878
y(30)g(iconst_5)400 2960 y(31)g(if_icmple)f(44)400 3041
y(34)h(iload_1)400 3123 y(35)g(bipush)g(10)400 3205 y(37)g(aload_0)400
3287 y(38)g(getfield)f(#8)i(<Field)f(int)g(b>)400 3368
y(41)g(imul)400 3450 y(42)g(iadd)400 3532 y(43)g(istore_1)400
3613 y(44)g(aload_2)400 3695 y(45)g(iconst_0)400 3777
y(46)g(iaload)400 3858 y(47)g(istore_1)400 3940 y(48)g(iload_1)400
4022 y(49)g(ireturn)731 4311 y Fy(Figure)25 b(2.6:)30
b Fq(stepPoly)23 b Fy(in)i(disassembled)e(form,)i(as)f(produced)h(by)g
(ja)n(v)n(ap.)2050 5509 y(20)p eop
%%Page: 21 29
21 28 bop 499 1195 a Fo(word)49 b(this,)g(x,)h(array;)499
1358 y(this)f(:=)h(@this:)e(Test;)499 1440 y(x)i(:=)f(@parameter0:)f
(int;)499 1522 y(push)h(10;)499 1603 y(newarray.i;)499
1685 y(store.r)g(array;)499 1767 y(load.i)g(x;)499 1848
y(push)g(10;)499 1930 y(ifcmple.i)f(label0;)499 2094
y(load.r)h(array;)499 2175 y(push)g(0;)499 2257 y(load.r)g(this;)499
2339 y(fieldget)g(<Test:)f(int)i(a>;)499 2420 y(arraywrite.i;)499
2502 y(staticget)e(<java.lang.System:)f(java.io.PrintStream)f(out>;)499
2584 y(push)j("foo";)499 2665 y(virtualinvoke)f(<java.io.PrintStream:)e
(void)j(println\(java.lang.String\)>;)499 2747 y(goto)g(label1;)350
2910 y(label0:)499 2992 y(load.i)g(x;)499 3074 y(push)g(5;)499
3156 y(ifcmple.i)f(label1;)499 3319 y(load.i)h(x;)499
3401 y(push)g(10;)499 3482 y(load.r)g(this;)499 3564
y(fieldget)g(<Test:)f(int)i(b>;)499 3646 y(mul.i;)499
3727 y(add.i;)499 3809 y(store.i)f(x;)350 3972 y(label1:)499
4054 y(load.r)g(array;)499 4136 y(push)g(0;)499 4218
y(arrayread.i;)499 4299 y(return.i;)1351 4606 y Fy(Figure)25
b(2.7:)31 b Fq(stepPoly)23 b Fy(in)j(B)q Ft(A)t(F)k Fy(form.)2050
5509 y(21)p eop
%%Page: 22 30
22 29 bop 660 563 a Fo(public)49 b(void)g(example\(\))660
644 y({)859 726 y(int)h(x;)859 889 y(if\(a\))859 971
y({)1009 1053 y(String)e(s)i(=)g("hello";)1009 1134 y(s.toString\(\);)
859 1216 y(})859 1298 y(else)859 1380 y({)1059 1461 y(int)f(sum)g(=)h
(5;)1059 1543 y(x)f(=)h(sum;)859 1625 y(})660 1706 y(})p
2278 1715 4 1208 v 2630 606 a(0)f(aload_0)2630 688 y(1)g(getfield)g(#6)
2630 770 y(4)g(ifeq)h(18)2630 851 y(7)f(ldc)h(#1)2630
933 y(9)f(astore_2)2580 1015 y(10)g(aload_2)2580 1096
y(11)g(invokevirtual)f(#7)2580 1178 y(14)h(pop)2580 1260
y(15)g(goto)h(22)2580 1341 y(18)f(iconst_5)2580 1423
y(19)g(istore_2)2580 1505 y(20)g(iload_2)2580 1587 y(21)g(istore_1)2580
1668 y(22)g(return)p 2278 1836 4 121 v 881 1920 a Fy(\(a\))25
b(Original)f(Ja)n(v)n(a)h(code)p 2278 1956 V 1051 w(\(b\))g(bytecode)
1275 2223 y(Figure)g(2.8:)30 b(Example)25 b(of)f(type)h(o)o(v)o
(erloading.)446 2511 y(A)36 b(third)e(dif)n(\002culty)g(is)h(the)g
(untyped)f(nature)h(of)h(the)f(stack)g(and)g(of)g(the)g(local)g(v)n
(ariables)f(in)h(the)300 2626 y(bytecode.)30 b(F)o(or)25
b(e)o(xample,)f(in)g(the)h(bytecode)g(in)f(\002gure)h(2.8.)446
2792 y(The)f(local)g(v)n(ariable)g(in)g(slot)f(2)h(is)g(used)g(in)f
(one)i(case)f(as)g(an)h Fq(java.lang.String)20 b Fy(at)25
b(instruc-)300 2907 y(tions)32 b(9)h(and)g(10,)i(b)n(ut)d(then)h
(another)g(situation)f(at)h(instructions)e(19)i(and)g(20)f(as)i(a)f
Fq(int)p Fy(.)55 b(This)32 b(type)300 3023 y(o)o(v)o(erloading)23
b(can)i(confuse)g(analyses)f(which)h(e)o(xpect)f(e)o(xplicitly)f(typed)
h(v)n(ariables.)300 3362 y Fp(2.3.2)121 b(Description)302
3594 y Fy(J)t Ft(I)t(M)t(P)t(L)t(E)36 b Fy(is)28 b(a)i(typed)e(and)h
(compact)g(3-address)g(code)g(representation)g(of)g(bytecode.)44
b(It)29 b(is)f(our)h(ideal)300 3710 y(form)39 b(for)h(performing)e
(optimizations)f(and)j(analyses,)i(both)d(traditional)f(optimizations)f
(such)i(as)300 3825 y(cop)o(y)26 b(propagation)g(and)g(more)h(adv)n
(anced)f(optimizations)f(such)h(as)h(virtual)f(method)f(resolution)h
(that)300 3941 y(object-oriented)i(languages)h(such)f(as)h(Ja)n(v)n(a)g
(require.)44 b(See)29 b(\002gures)h(2.9)e(and)h(2.10)g(for)g(the)g
(complete)302 4057 y(J)t Ft(I)t(M)t(P)t(L)t(E)i Fy(grammar)-5
b(.)30 b(There)c(are)f(essentially)f(11)g(dif)n(ferent)h(types)f(of)j
(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(statements:)445 4330 y
Fv(\017)49 b Fy(The)35 b Fz(assignStmt)d Fy(statement)i(is)g(the)h
(most)f(used)i(J)t Ft(I)t(M)t(P)t(L)t(E)42 b Fy(instruction.)59
b(It)34 b(has)h(four)g(forms:)544 4445 y(assigning)25
b(a)h Fz(rvalue)h Fy(to)f(a)g(local,)h(or)f(an)h Fz(immediate)e
Fy(\(a)i(local)f(or)h(a)g(constant\))e(to)h(a)h(static)f(\002eld,)544
4561 y(to)i(an)h(instance)g(\002eld)g(or)g(to)g(an)g(array)g
(reference.)45 b(Note)29 b(that)f(a)i Fz(rvalue)e Fy(is)h(a)g(\002eld)g
(access,)h(ar)n(-)544 4677 y(ray)k(reference,)j(an)d(immediate)f(or)h
(an)g(e)o(xpression.)56 b(W)-8 b(e)34 b(can)g(see)g(that)g(with)f(this)
f(grammar)544 4792 y(an)o(y)26 b(signi\002cant)g(computation)g(must)f
(be)i(brok)o(en)g(do)n(wn)f(into)g(multiple)f(statements,)h(with)g
Fz(lo-)544 4908 y(cals)32 b Fy(being)g(used)h(as)f(temporary)h(storage)
f(locations.)53 b(F)o(or)33 b(e)o(xample,)g(a)g(\002eld)g(cop)o(y)g
(such)f(as)544 5023 y Fq(this.x)58 b(=)i(this.y)32 b
Fy(must)g(be)h(represented)h(as)f(tw)o(o)i(J)t Ft(I)t(M)t(P)t(L)t(E)40
b Fy(statements,)34 b(a)f(\002eld)h(read)544 5139 y(and)25
b(a)g(\002eld)g(write)f(\()p Fq(tmp)60 b(=)f(this.y)24
b Fy(and)h Fq(this.x)58 b(=)i(tmp)p Fy(.\))2050 5509
y(22)p eop
%%Page: 23 31
23 30 bop 445 499 a Fv(\017)49 b Fz(identityStmt)p Fy(s)17
b(are)j(statements)e(which)h(de\002ne)h(locals)e(to)h(be)h(pre-loaded)f
(\(upon)g(method)f(entry\))544 615 y(with)35 b(special)h(v)n(alues)g
(such)g(as)g(parameters)h(or)f(the)g Fq(this)g Fy(v)n(alue.)65
b(F)o(or)36 b(e)o(xample,)i Fq(l0)59 b(:=)544 730 y(@this:)118
b(A)29 b Fy(de\002nes)g(local)g Fq(l0)g Fy(to)f(be)h(the)g
Fq(this)f Fy(of)h(the)g(method.)42 b(This)29 b(identi\002cation)f(is)
544 846 y(necessary)c(because)g(the)f(local)h(v)n(ariables)f(are)h(not)
f(numbered)h(\(normally)e(the)i Fq(this)f Fy(v)n(ariable)544
962 y(is)h(the)h(v)n(ariable)f(in)h(local)f(v)n(ariable)g(slot)g(0)h
(at)g(the)g(bytecode)f(le)n(v)o(el.\))445 1160 y Fv(\017)49
b Fz(gotoStmt)p Fy(,)42 b(and)f Fz(ifStmt)e Fy(represent)h
(unconditional)e(and)j(conditional)d(jumps,)43 b(respecti)n(v)o(ely)-6
b(.)544 1276 y(Note)24 b(the)h(use)g(of)g(labels)f(instead)g(of)h
(bytecode)g(of)n(fsets.)445 1474 y Fv(\017)49 b Fz(in)l(vok)o(eStmt)28
b Fy(represents)i(an)f(in)l(v)n(ok)o(e)g(without)f(an)h(assignment)f
(to)h(a)g(local.)44 b(\(The)30 b(assignment)544 1590
y(of)j(a)g(return)g(v)n(alue)g(is)f(handled)h(by)g(a)g
Fz(assignStmt)e Fy(with)h(an)h Fz(in)l(vok)o(eExpr)g
Fy(on)g(the)g(right)f(hand)544 1705 y(side)24 b(of)h(the)g(assignment)e
(operator)-5 b(.\))445 1904 y Fv(\017)49 b Fz(switc)o(hStmt)18
b Fy(can)h(either)g(be)h(a)g Fq(lookupswitch)c Fy(or)k(a)f
Fq(tableswitch)p Fy(.)27 b(The)19 b(lookupswitch)544
2020 y(tak)o(es)h(a)g(set)f(of)h(inte)o(gers)f(v)n(alues,)h(whereas)g
Fq(tableswitch)e Fy(tak)o(es)i(a)g(range)g(of)g(inte)o(ger)f(v)n(alues)
544 2135 y(for)27 b(the)g(lookup)e(v)n(alues,)i(as)g(the)g
Fq(tableswitch)d Fy(and)j Fq(lookupswitch)d Fy(Ja)n(v)n(a)j(bytecodes)
544 2251 y(do.)j(The)25 b(tar)n(get)g(destinations)e(are)j(speci\002ed)
f(by)f(labels.)445 2449 y Fv(\017)49 b Fz(monitorStmt)17
b Fy(represents)i(the)g(enter/e)o(xitmonitor)e(bytecodes.)28
b(The)o(y)19 b(tak)o(e)g(a)h(local)f(or)g(constant)544
2565 y(as)25 b(the)f(monitor)g(lock.)445 2763 y Fv(\017)49
b Fz(r)l(eturnStmt)31 b Fy(can)i(either)f(represent)h(a)g(return)f(v)n
(oid,)i(or)e(a)h(return)g(of)f(a)h(v)n(alue,)h(speci\002ed)f(by)f(a)544
2879 y(local)24 b(or)h(a)g(constant.)445 3078 y Fv(\017)49
b Fz(thr)l(owStmt)23 b Fy(represents)i(the)f(e)o(xplicit)g(thro)n(wing)
f(of)i(an)g(e)o(xception.)445 3276 y Fv(\017)49 b Fz(br)l(eakpointStmt)
35 b Fy(and)h Fz(nopStmt)g Fy(represent)g(the)h Fq(breakpoint)d
Fy(and)j Fq(nop)f Fy(\(no)h(operation\))544 3392 y(bytecode)24
b(instructions)f(respecti)n(v)o(ely)-6 b(.)300 3839 y
Fp(2.3.3)121 b(Design)35 b(f)o(eature:)42 b(Stac)n(kless)35
b(3-ad)o(dress)g(code)300 4071 y Fy(Ev)o(ery)28 b(statement)f(in)j(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(is)28 b(in)g(3-address)g(code)g(form.)41
b(3-address)28 b(code)g(is)g(a)g(standard)g(repre-)300
4187 y(sentation)22 b(where)i(the)f(instructions)e(are)j(k)o(ept)f(as)g
(simple)f(as)h(possible,)g(and)g(where)g(most)g(of)g(them)f(are)300
4302 y(of)j(the)g(form)f Fq(x)60 b(=)f(y)h(op)f(z)p Fy([17].)446
4468 y(Ev)o(ery)27 b(statement)f(in)j(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(is)27 b(stackless.)37 b(Essentially)-6 b(,)25 b(the)i(stack)g(has)g
(been)g(eliminated)f(and)300 4583 y(replaced)38 b(by)g(additional)e
(local)i(v)n(ariables.)69 b(Implicit)36 b(references)k(to)d(stack)h
(positions)d(ha)n(v)o(e)j(been)300 4699 y(transformed)26
b(into)f(e)o(xplicit)f(references)k(to)e(local)f(v)n(ariables.)34
b(Figure)27 b(2.11)e(illustrates)g(this)g(transfor)n(-)300
4815 y(mation)20 b(of)i(references.)31 b(Note)21 b(ho)n(w)g(the)g
(local)g(v)n(ariables)g(representing)g(stack)g(positions)f(are)i
(pre\002x)o(ed)300 4930 y(with)28 b(dollar)g(signs.)40
b(Note)28 b(also)g(that)g(each)h(instruction)e(in)h(the)g(original)h(B)
q Ft(A)t(F)34 b Fy(code)29 b(corresponds)e(to)300 5046
y(a)e(ne)n(w)g(instruction)e(in)i(the)h(J)t Ft(I)t(M)t(P)t(L)t(E)32
b Fy(form.)f(Further)l(,)25 b(this)f(code)h(can)h(be)f(compacted)f
(into)h Fq(x)59 b(=)h(y)f(+)300 5161 y(z)p Fy(.)31 b(This)24
b(will)g(be)g(discussed)g(further)h(in)g(the)f(section)g(on)h
(transformations.)2050 5509 y(23)p eop
%%Page: 24 32
24 31 bop 977 796 2247 4 v 975 917 4 121 v 1027 881 a
Fz(stmt)23 b Fv(\000)-16 b(!)25 b Fz(assignStmt)e Fv(j)h
Fz(identityStmt)f Fv(j)p 3222 917 V 975 1037 V 1411 1001
a Fz(gotoStmt)h Fv(j)g Fz(ifStmt)g Fv(j)g Fz(in)l(vok)o(eStmt)g
Fv(j)p 3222 1037 V 975 1158 V 1411 1122 a Fz(switc)o(hStmt)g
Fv(j)g Fz(monitorStmt)f Fv(j)p 3222 1158 V 975 1278 V
1411 1242 a Fz(r)l(eturnStmt)h Fv(j)g Fz(thr)l(owStmt)g
Fv(j)p 3222 1278 V 975 1398 V 1411 1362 a Fz(br)l(eakpointStmt)f
Fv(j)i Fz(nopStmt)p Fy(;)p 3222 1398 V 977 1402 2247
4 v 975 1522 4 121 v 1027 1486 a Fz(assignStmt)d Fv(\000)-16
b(!)25 b Fy(local)f Fq(=)h Fz(rvalue)p Fy(;)f Fv(j)p
3222 1522 V 975 1642 V 1681 1606 a Fy(\002eld)h Fq(=)g
Fz(imm)p Fy(;)f Fv(j)p 3222 1642 V 975 1763 V 1681 1727
a Fy(local)p Fq(.)p Fy(\002eld)h Fq(=)g Fz(imm)p Fy(;)f
Fv(j)p 3222 1763 V 975 1883 V 1681 1847 a Fy(local)p
Fq([)p Fz(imm)p Fq(])g(=)h Fz(imm)p Fy(;)p 3222 1883
V 977 1887 2247 4 v 975 2007 4 121 v 1027 1971 a Fz(identityStmt)d
Fv(\000)-16 b(!)25 b Fy(local)f Fq(:=)h Fy(@this:)k(type;)24
b Fv(j)p 3222 2007 V 975 2127 V 1711 2091 a Fy(local)h
Fq(:=)f Fy(@parameter)p Fz(n)p Fy(:)31 b(type;)24 b Fv(j)p
3222 2127 V 975 2248 V 1711 2212 a Fy(local)h Fq(:=)f
Fy(@e)o(xception;)p 3222 2248 V 977 2251 2247 4 v 975
2371 4 121 v 1027 2335 a Fz(gotoStmt)f Fv(\000)-16 b(!)24
b Fq(goto)g Fy(label;)p 3222 2371 V 977 2375 2247 4 v
975 2495 4 121 v 1027 2459 a Fz(ifStmt)f Fv(\000)-16
b(!)24 b Fq(if)h Fz(conditionExpr)e Fq(goto)h Fy(label;)p
3222 2495 V 977 2498 2247 4 v 975 2619 4 121 v 1027 2583
a Fz(in)l(vok)o(eStmt)g Fv(\000)-17 b(!)25 b Fq(invoke)f
Fz(in)l(vok)o(eExpr)p Fy(;)p 3222 2619 V 977 2622 2247
4 v 975 2743 4 121 v 1027 2706 a Fz(switc)o(hStmt)f Fv(\000)-16
b(!)24 b Fq(lookupswitch)e Fz(imm)p 3222 2743 V 975 2863
V 1651 2827 a Fv(f)p Fq(case)i Fy(v)n(alue)2179 2842
y Fm(1)2218 2827 y Fy(:)31 b Fq(goto)24 b Fy(label)2735
2842 y Fm(1)2774 2827 y Fy(;)p 3222 2863 V 975 2983 V
1651 2947 a(...)p 3222 2983 V 975 3104 V 1651 3068 a
Fq(case)g Fy(v)n(alue)2129 3083 y Fl(n)2176 3068 y Fy(:)30
b Fq(goto)24 b Fy(label)2692 3083 y Fl(n)2739 3068 y
Fy(;)p 3222 3104 V 975 3224 V 1651 3188 a Fq(default:)118
b(goto)24 b Fy(def)o(aultLabel;)p Fv(g)p Fy(;)g Fv(j)p
3222 3224 V 975 3344 V 1651 3308 a Fq(tableswitch)f Fz(imm)p
3222 3344 V 975 3465 V 1627 3429 a Fv(f)p Fq(case)g Fy(lo)n(w:)30
b Fq(goto)24 b Fy(lo)n(wLabel;)p 3222 3465 V 975 3585
V 1651 3549 a(...)p 3222 3585 V 975 3706 V 1651 3669
a Fq(case)g Fy(high:)30 b Fq(goto)24 b Fy(highLabel;)p
3222 3706 V 975 3826 V 1651 3790 a Fq(default:)118 b(goto)24
b Fy(def)o(aultLabel;)p Fv(g)p 3222 3826 V 977 3829 2247
4 v 975 3950 4 121 v 1027 3914 a Fz(monitorStmt)e Fv(\000)-16
b(!)24 b Fq(entermonitor)f Fz(imm)p Fy(;)h Fv(j)p 3222
3950 V 975 4070 V 1741 4034 a Fq(exitmonitor)f Fz(imm)p
Fy(;)p 3222 4070 V 977 4073 2247 4 v 975 4194 4 121 v
1027 4158 a Fz(r)l(eturnStmt)g Fv(\000)-16 b(!)24 b Fq(return)g
Fz(imm)p Fy(;)g Fv(j)p 3222 4194 V 975 4314 V 1651 4278
a Fq(return)p Fy(;)p 3222 4314 V 977 4317 2247 4 v 975
4438 4 121 v 1027 4402 a Fz(thr)l(owStmt)f Fv(\000)-17
b(!)25 b Fq(throw)f Fz(imm)p Fy(;)p 3222 4438 V 977 4441
2247 4 v 975 4562 4 121 v 1027 4525 a Fz(br)l(eakpointStmt)f
Fv(\000)-17 b(!)25 b Fq(breakpoint)p Fy(;)p 3222 4562
V 975 4682 V 1027 4646 a Fz(nopStmt)e Fv(\000)-16 b(!)24
b Fq(nop)p Fy(;)p 3222 4682 V 977 4685 2247 4 v 1174
4952 a(Figure)h(2.9:)30 b(The)d(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(grammar)25 b(\(statements\))2050 5509 y(24)p eop
%%Page: 25 33
25 32 bop 753 630 2695 4 v 751 750 4 121 v 802 714 a
Fz(imm)25 b Fv(\000)-16 b(!)24 b Fy(local)h Fv(j)f Fy(constant)p
3446 750 V 753 754 2695 4 v 751 874 4 121 v 802 838 a
Fz(conditionExpr)f Fv(\000)-16 b(!)25 b Fz(imm)1755 853
y Fm(1)1819 838 y Fz(condop)f(imm)2309 853 y Fm(2)p 3446
874 V 751 995 V 802 958 a Fz(condop)h Fv(\000)-17 b(!)25
b Fk(>)g Fv(j)f Fk(<)h Fv(j)g Fy(=)g Fv(j)f(6)p Fj(=)h
Fv(j)g(\024)g(j)g(\025)p 3446 995 V 753 998 2695 4 v
751 1118 4 121 v 802 1082 a Fz(rvalue)g Fv(\000)-16 b(!)24
b Fz(concr)l(eteRef)h Fv(j)g Fz(imm)f Fv(j)h Fz(e)n(xpr)p
3446 1118 V 751 1239 V 802 1203 a(concr)l(eteRef)g Fv(\000)-16
b(!)25 b Fy(\002eld)g Fv(j)p 3446 1239 V 751 1359 V 1457
1323 a Fy(local)p Fq(.)p Fy(\002eld)g Fv(j)p 3446 1359
V 751 1479 V 1457 1443 a Fy(local)p Fq([)p Fz(imm)p Fq(])p
3446 1479 V 753 1483 2695 4 v 751 1603 4 121 v 802 1567
a Fz(in)l(vok)o(eExpr)g Fv(\000)-16 b(!)24 b Fq(specialinvoke)e
Fy(local.m\()p Fz(imm)2765 1582 y Fm(1)2804 1567 y Fy(,)i(...,)h
Fz(imm)3150 1582 y Fl(n)3196 1567 y Fy(\))h Fv(j)p 3446
1603 V 751 1723 V 1457 1687 a Fq(interfaceinvoke)c Fy(local.m\()p
Fz(imm)2881 1702 y Fm(1)2919 1687 y Fy(,)j(...,)f Fz(imm)3265
1702 y Fl(n)3312 1687 y Fy(\))h Fv(j)p 3446 1723 V 751
1844 V 1457 1808 a Fq(virtualinvoke)d Fy(local.m\()p
Fz(imm)2761 1823 y Fm(1)2799 1808 y Fy(,)j(...,)g Fz(imm)3146
1823 y Fl(n)3192 1808 y Fy(\))g Fv(j)p 3446 1844 V 751
1964 V 1457 1928 a Fq(staticinvoke)d Fy(m\()p Fz(imm)2482
1943 y Fm(1)2521 1928 y Fy(,)j(...,)f Fz(imm)2867 1943
y Fl(n)2914 1928 y Fy(\))p 3446 1964 V 753 1968 2695
4 v 751 2088 4 121 v 802 2052 a Fz(e)n(xpr)h Fv(\000)-16
b(!)25 b Fz(imm)1360 2067 y Fm(1)1424 2052 y Fz(binop)e(imm)1847
2067 y Fm(2)1911 2052 y Fv(j)p 3446 2088 V 751 2208 V
1187 2172 a Fy(\(type\))i Fz(imm)g Fv(j)p 3446 2208 V
751 2329 V 1187 2293 a Fz(imm)g Fq(instanceof)d Fy(type)j
Fv(j)p 3446 2329 V 751 2449 V 1187 2413 a Fz(in)l(vok)o(eExpr)g
Fv(j)p 3446 2449 V 751 2569 V 1187 2533 a Fq(new)f Fy(refT)-8
b(ype)26 b Fv(j)p 3446 2569 V 751 2690 V 1187 2654 a
Fq(newarray)d Fy(\(type\))i([)p Fz(imm)p Fy(])g Fv(j)p
3446 2690 V 751 2810 V 1187 2774 a Fq(newmultiarray)d
Fy(\(type\))j([)p Fz(imm)2457 2789 y Fm(1)2496 2774 y
Fy(])g(...)31 b([)p Fz(imm)2865 2789 y Fl(n)2912 2774
y Fy(])25 b([]*)g Fv(j)p 3446 2810 V 751 2931 V 1187
2895 a Fq(length)f Fz(imm)g Fv(j)p 3446 2931 V 751 3051
V 1187 3015 a Fq(neg)g Fz(imm)p 3446 3051 V 753 3054
2695 4 v 751 3175 4 121 v 802 3139 a(binop)g Fv(\000)-16
b(!)25 b Fy(+)g Fv(j)f Fy(-)h Fv(j)g Fk(>)g Fv(j)f Fk(<)h
Fv(j)g Fy(=)g Fv(j)f(6)p Fj(=)h Fv(j)g(\024)g(j)g(\025)g(j)g(\003)f(j)h
Fk(=)g Fv(j)p 3446 3175 V 751 3295 V 1187 3259 a Fk(<<)g
Fv(j)f Fk(>>)h Fv(j)g Fk(<<<)f Fv(j)h Fj(\045)g Fv(j)g
Fq(rem)f Fv(j)g Fj(&)h Fv(j)g(j)f(j)p 3446 3295 V 751
3415 V 1187 3379 a Fq(cmp)g Fv(j)h Fq(cmpg)f Fv(j)h Fq(cmpl)p
3446 3415 V 753 3419 2695 4 v 962 3686 a Fy(Figure)g(2.10:)30
b(The)d(J)t Ft(I)t(M)t(P)t(L)t(E)32 b Fy(grammar)24 b(\(support)g
(productions\))810 4195 y Fo(word)49 b(x,)h(y,)f(z)810
4359 y(load.i)g(x)810 4441 y(load.i)g(y)810 4522 y(add.i)810
4604 y(store.i)g(z)p 1888 4611 4 474 v 2070 4192 a(int)g($s0,)g($s1,)g
(x,)h(y,)f(z)2070 4355 y($s0)g(=)h(x)2070 4437 y($s1)f(=)h(y)2070
4519 y($s0)f(=)h($s0)f(+)h($s1)2070 4600 y(z)g(=)f($s0)p
1888 4731 4 121 v 1102 4816 a Fy(\(a\))28 b(B)q Ft(A)t(F)p
1888 4852 V 1093 w Fy(\(b\))f(J)t Ft(I)t(M)t(P)t(L)t(E)834
5119 y Fy(Figure)e(2.11:)k(Example)c(of)f(bytecode)h(to)h(J)t
Ft(I)t(M)t(P)t(L)t(E)32 b Fy(code)25 b(equi)n(v)n(alence.)2050
5509 y(25)p eop
%%Page: 26 34
26 33 bop 300 499 a Fp(2.3.4)121 b(Design)35 b(f)o(eature:)42
b(Compact)300 731 y Fy(Ja)n(v)n(a)22 b(bytecode)g(has)g(about)f(200)h
(dif)n(ferent)f(bytecode)h(instructions,)h(B)q Ft(A)t(F)k
Fy(has)22 b(about)g(60)g(and)i(J)t Ft(I)t(M)t(P)t(L)t(E)300
846 y Fy(has)h(19.)448 1011 y(J)t Ft(I)t(M)t(P)t(L)t(E)r
Fy(')-5 b(s)34 b(compactness)29 b(mak)o(es)g(it)g(an)h(ideal)g(form)f
(for)h(writing)f(analyses)g(and)h(optimizations.)300
1126 y(The)f(simpler)f(the)h(intermediate)f(representation,)h(the)g
(simpler)f(the)h(task)g(of)g(writing)f(optimizations)300
1242 y(and)22 b(analyses)g(for)g(it,)g(because)h(fe)n(wer)f(test)g
(cases)h(cases)f(need)g(to)g(be)g(de)n(v)o(eloped)f(for)i(it.)29
b(F)o(or)22 b(e)o(xample,)300 1357 y(accesses)30 b(from)g(a)g(\002eld)g
(in)i(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(are)30 b(al)o(w)o(ays)g(of)g(the)g
(form)f Fq(local)59 b(=)g(object.f)p Fy(,)30 b(whereas)300
1473 y(in)22 b(Ja)n(v)n(a,)g(\002eld)g(accesses)h(can)f(occur)h
(practically)e(an)o(ywhere)h(such)g(as)g(in)g(a)g(method)f(call)h(or)h
(arbitrarily)300 1588 y(nested)h(array)i(references.)300
1925 y Fp(2.3.5)121 b(Design)35 b(f)o(eature:)42 b(T)-7
b(yped)34 b(and)f(named)i(local)g(v)n(ariab)o(les)300
2157 y Fy(The)25 b(local)f(v)n(ariables)g(in)i(J)t Ft(I)t(M)t(P)t(L)t
(E)31 b Fy(are)26 b(named)e(and)h(fully)f(typed.)30 b(The)o(y)24
b(are)h(gi)n(v)o(en)e(a)i(primiti)n(v)o(e,)d(class)300
2272 y(or)j(interf)o(ace)g(type.)31 b(The)o(y)24 b(are)h(typed)g(for)g
(tw)o(o)f(reasons.)300 2581 y Fi(T)-8 b(o)27 b(impr)n(o)n(ve)h(anal)o
(yses)302 2812 y Fy(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(w)o(as)25
b(designed)f(to)h(f)o(acilitate)f(the)h(implementation)e(of)i
(optimizations)e(and)i(analyses.)31 b(Ha)n(v-)300 2928
y(ing)g(types)h(for)g(local)g(v)n(ariables)f(allo)n(ws)g(subsequent)g
(analyses)g(on)j(J)t Ft(I)t(M)t(P)t(L)t(E)39 b Fy(to)31
b(be)h(more)g(accurate.)300 3043 y(F)o(or)27 b(e)o(xample,)f(class)g
(hierarchy)h(analysis,)f(which)g(usually)g(uses)g(just)g(the)h(method)e
(signature)h(to)h(de-)300 3159 y(termine)c(the)h(possible)f(method)f
(dispatches)h(can)i(also)e(use)h(the)g(type)f(of)h(the)g(v)n(ariable)f
(which)h(leads)f(to)300 3275 y(strictly)h(better)g(answers.)31
b(F)o(or)25 b(e)o(xample:)350 3504 y Fo(Map)49 b(m)h(=)f(new)h
(HashMap\(\);)350 3586 y(m.get\("key"\);)300 3849 y Fy(becomes)24
b(the)h(follo)n(wing)g(J)t Ft(I)t(M)t(P)t(L)t(E)31 b
Fy(code:)300 4160 y Fo(java.util.HashMap)47 b($r1,)i(r2;)300
4323 y($r1)g(=)h(new)f(java.util.HashMap;)300 4405 y(specialinvoke)e
($r1.<java.util.HashMap:)f(void)j(<init>\(\)>\(\);)300
4486 y(r2)g(=)h($r1;)300 4568 y(interfaceinvoke)d(r2.<java.util.Map:)
1296 4650 y(java.lang.Object)g(get\(java.lang.Object\)>\("key"\);)300
4913 y Fy(since)28 b(we)g(kno)n(w)e(that)i Fq(r2)f Fy(is)h(a)g
Fq(java.util.HashMap)p Fy(,)d(we)j(can)g(in)f(f)o(act)h(statically)f
(resolv)o(e)g(the)300 5028 y Fq(interfaceinvoke)h Fy(to)i(be)h(a)g
(call)g(to)f Fq(<HashMap:)118 b(Object)58 b(get\(Object\)>)p
Fy(.)47 b(If)31 b(we)300 5144 y(did)21 b(not)h(kno)n(w)f(this)g(type,)h
(the)g(interf)o(acein)l(v)n(ok)o(e)g(could)g(map)f(to)h(an)o(y)f
(method)h(which)f(implements)f(the)300 5260 y(Map)25
b(interf)o(ace.)2050 5509 y(26)p eop
%%Page: 27 35
27 34 bop 446 499 a Fy(As)22 b(another)g(e)o(xample,)f(ha)n(ving)g
(typed)g(v)n(ariables)g(allo)n(ws)g(a)h(coarse-grained)g(side)g(ef)n
(fect)g(analysis)300 615 y(to)i(be)h(performed.)31 b(F)o(or)25
b(e)o(xample,)f(tak)o(e)h(the)f(follo)n(wing)f(code:)300
854 y Fo(Chair)49 b(x;)300 936 y(House)g(y;)300 1099
y(x)h(=)f(someChair;)300 1181 y(y)h(=)f(someHouse;)446
1454 y Fy(Suppose)19 b(one)g(is)g(trying)f(to)g(re-order)i(the)f
(assignment)e(statements.)28 b(If)19 b(the)g(types)g(of)g
Fq(x)g Fy(and)g Fq(y)f Fy(were)300 1570 y(unkno)n(wn,)j(then)g(the)o(y)
g(could)g(possibly)f(be)i(aliased,)g(and)g(a)g(re-ordering)g(w)o(ould)f
(not)g(be)h(possible.)28 b(But)300 1685 y(since)c(in)i(J)t
Ft(I)t(M)t(P)t(L)t(E)31 b Fy(all)24 b(v)n(ariables)g(are)h(typed,)f
(and)g(assuming)f(that)h Fq(x)p Fy(,)g(and)h Fq(y)f Fy(are)h(distinct)e
(classes)h(and)300 1801 y(one)h(is)f(not)g(a)h(subclass)f(of)h(another)
l(,)g(the)o(y)f(can)h(be)g(re-ordered.)300 2112 y Fi(T)-8
b(o)27 b(g)q(enerate)i(code)300 2345 y Fy(The)e(second)g(reason)h(that)
e(it)h(is)g(necessary)h(for)h(J)t Ft(I)t(M)t(P)t(L)t(E)34
b Fy(to)27 b(ha)n(v)o(e)g(typed)f(local)h(v)n(ariables)g(is)g(because)
300 2460 y(its)c(operators)h(are)g(untyped.)29 b(Consider)24
b(the)g(problem)f(of)g(generating)j(B)q Ft(A)t(F)j Fy(code)24
b(for)g(a)g(Jimple)e(state-)300 2576 y(ment)c(such)h(as)g
Fq(x)60 b(+)f(y)p Fy(.)29 b(The)19 b(code)g(generator)g(must)f(choose)h
(one)f(of)i(the)e(follo)n(wing)f Fq(add)p Fy(s:)27 b(\()p
Fq(add.i)p Fy(,)300 2691 y Fq(add.f)p Fy(,)g Fq(add.d)f
Fy(or)h Fq(add.l)p Fy(\))f(since)j(B)q Ft(A)t(F)j Fy(instructions)25
b(are)j(fully)e(typed.)37 b(Ha)n(ving)27 b(the)g(local)f(v)n(ari-)300
2807 y(ables)h(typed)g(allo)n(ws)g(this)f(choice)i(to)f(be)h(made)f
(without)f(requiring)h(that)g(the)h(operators)f(be)h(typed)f(as)300
2923 y(well.)300 3262 y Fp(2.3.6)121 b(W)-5 b(alkthr)n(ough)34
b(of)f(e)n(xample)300 3494 y Fy(This)24 b(subsection)g(describes)g(the)
h(e)o(xample)f(found)g(in)h(2.12.)30 b(Note)24 b(that:)420
3768 y(1.)49 b(all)32 b(local)h(v)n(ariables)f(are)h(declared)h(at)e
(the)h(top)f(of)h(the)g(method.)53 b(The)o(y)32 b(are)i(fully)e(typed;)
k(we)544 3883 y(ha)n(v)o(e)26 b(reference)h(types)f(such)g(as)g
Fq(Test)p Fy(,)f Fq(int[])p Fy(,)h Fq(java.io.PrintStream)c
Fy(and)k(prim-)544 3999 y(iti)n(v)o(e)f(types)i(such)g(as)g
Fq(int)p Fy(.)37 b(V)-11 b(ariables)27 b(which)f(represent)i(stack)f
(positions)e(ha)n(v)o(e)i(their)f(names)544 4114 y(pre\002x)o(ed)f
(with)f($.)420 4313 y(2.)49 b(identity)26 b(statements)g(follo)n(w)g
(the)h(local)g(v)n(ariable)f(declarations.)38 b(This)26
b(marks)h(the)g(local)g(v)n(ari-)544 4428 y(ables)e(which)f(ha)n(v)o(e)
g(v)n(alues)g(upon)h(method)e(entry)-6 b(.)420 4627 y(3.)49
b(the)25 b(code)g(resembles)f(simple)f(Ja)n(v)n(a)i(code)g(\(hence)g
(the)g(term)h(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(\).)420 4826
y(4.)49 b(assignment)23 b(statements)h(predominate)g(the)g(code.)2050
5509 y(27)p eop
%%Page: 28 36
28 35 bop 420 1319 a Fo(int)49 b(a;)420 1401 y(int)g(b;)420
1565 y(public)g(int)g(stepPoly\(int\))420 1646 y({)520
1728 y(Test)g(this;)520 1810 y(int)g(x,)g($i0,)g($i1,)g(x;)520
1891 y(int[])g(array;)520 1973 y(java.io.PrintStream)d($r0;)520
2136 y(this)j(:=)g(@this;)520 2218 y(x)g(:=)h(@parameter0;)520
2300 y(array)f(=)g(newarray)f(\(int\)[10];)520 2382 y(if)h(x)h(<=)f(10)
h(goto)f(label0;)520 2545 y($i0)g(=)h(this.a;)520 2627
y(array[0])e(=)i($i0;)520 2708 y($r0)f(=)h(java.lang.System.out;)520
2790 y($r0.println\("foo"\);)520 2872 y(goto)f(label1;)420
3035 y(label0:)520 3117 y(if)g(x)h(<=)f(5)h(goto)f(label1;)520
3280 y($i0)g(=)h(this.b;)520 3362 y($i1)f(=)h(10)f(*)h($i0;)520
3444 y(x)f(=)h(x)g(+)f($i1;)420 3607 y(label1:)520 3689
y(x)g(=)h(array[0];)520 3770 y(return)e(x;)420 3852 y(})p
2128 3861 4 2597 v 2250 1850 a(int)h(a;)2250 1932 y(int)g(b;)2250
2096 y(public)g(int)g(stepPoly\(int)f(x\))2250 2177 y({)2449
2259 y(int[])h(array)g(=)h(new)f(int[10];)2449 2422 y(if\(x)g(>)h(10\))
2449 2504 y({)2599 2586 y(array[0])e(=)i(a;)2599 2667
y(System.out.println\("foo"\);)2449 2749 y(})2449 2831
y(else)f(if\(x)g(>)h(5\))2599 2913 y(x)f(=)h(x)g(+)f(10)h(*)f(b;)2449
3076 y(x)h(=)f(array[0];)2449 3239 y(return)g(x;)2250
3321 y(})p 2128 3982 4 121 v 994 4066 a Fy(\(a\))27 b(J)t
Ft(I)t(M)t(P)t(L)t(E)p 2128 4102 V 1203 w Fy(\(b\))e(Original)f(Ja)n(v)
n(a)h(code)300 4261 y(Figure)20 b(2.12:)28 b Fq(stepPoly)18
b Fy(in)j(J)t Ft(I)t(M)t(P)t(L)t(E)27 b Fy(form.)i(Dollar)19
b(signs)g(indicate)h(local)f(v)n(ariables)h(representing)300
4382 y(stack)25 b(positions.)2050 5509 y(28)p eop
%%Page: 29 37
29 36 bop 300 505 a Fr(2.4)147 b(G)8 b Fn(R)g(I)g(M)g(P)300
773 y Fy(This)23 b(section)g(describes)i(G)t Ft(R)t(I)t(M)t(P)r
Fy(.)35 b(The)23 b(moti)n(v)n(ation)e(for)26 b(G)t Ft(R)t(I)t(M)t(P)k
Fy(is)23 b(gi)n(v)o(en)f(follo)n(wed)g(by)h(its)g(descrip-)300
889 y(tion,)h(its)g(design)g(features,)h(and)g(\002nally)f(a)h(w)o
(alkthrough)f(of)h(an)g(e)o(xample)f(piece)h(of)g(code.)300
1228 y Fp(2.4.1)121 b(Motiv)n(ation)300 1460 y Fy(One)27
b(of)g(the)g(common)f(problems)g(in)h(dealing)f(with)g(intermediate)h
(representations)f(is)h(that)f(the)o(y)g(are)300 1576
y(dif)n(\002cult)20 b(to)g(read)h(because)g(the)o(y)f(do)h(not)f
(resemble)g(structured)h(languages.)28 b(In)21 b(general,)h(the)o(y)e
(contain)300 1691 y(man)o(y)31 b(goto')-5 b(s)31 b(and)h(e)o
(xpressions)f(are)i(e)o(xtremely)e(fragmented.)52 b(Another)32
b(problem)f(is)h(that)g(despite)300 1807 y(its)j(simple)g(form,)j(for)e
(some)f(analyses,)j(3-address)e(code)g(is)f(harder)i(to)e(deal)h(with)f
(than)g(comple)o(x)300 1923 y(structures.)30 b(F)o(or)23
b(e)o(xample,)g(we)h(found)f(that)g(generating)g(good)f(stack)i(code)f
(w)o(as)h(simpler)e(when)i(lar)n(ge)300 2038 y(e)o(xpressions)f(were)j
(a)n(v)n(ailable.)300 2377 y Fp(2.4.2)121 b(Description)302
2610 y Fy(G)t Ft(R)t(I)t(M)t(P)40 b Fy(is)33 b(an)g(unstructured)f
(representation)h(of)g(Ja)n(v)n(a)g(bytecode)g(which)g(allo)n(ws)e
(trees)j(to)f(be)g(con-)300 2725 y(structed)24 b(for)g(e)o(xpressions)f
(as)h(opposed)f(to)h(the)g(\003at)h(e)o(xpressions)d(present)i(in)i(J)t
Ft(I)t(M)t(P)t(L)t(E)r Fy(.)35 b(In)24 b(general,)h(it)300
2841 y(is)j(much)g(easier)i(to)e(read)h(than)i(B)q Ft(A)t(F)j
Fy(or)c(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)35 b(and)28 b(for)h(code)g
(generation,)g(especially)g(when)f(the)300 2956 y(tar)n(get)21
b(is)g(stack)g(code,)h(it)e(is)h(a)g(much)g(better)g(source)g
(representation.)29 b(It)21 b(also)g(has)g(a)g(representation)g(for)300
3072 y(the)h Fq(new)f Fy(operator)h(in)g(Ja)n(v)n(a)g(which)f(combines)
g(the)h Fq(new)f Fy(bytecode)h(instruction)e(with)i(the)g
Fq(invoke-)300 3188 y(special)g Fy(bytecode)i(instruction.)k
(Essentially)-6 b(,)24 b(G)t Ft(R)t(I)t(M)t(P)31 b Fy(looks)22
b(lik)o(e)i(a)g(partially)f(decompiled)f(Ja)n(v)n(a)300
3303 y(code.)31 b(W)-8 b(e)25 b(are)h(also)e(using)i(G)t
Ft(R)t(I)t(M)t(P)31 b Fy(as)25 b(the)g(foundation)e(for)i(a)h
(decompiler)-5 b(.)446 3469 y(See)28 b(\002gures)f(2.13)f(and)h(2.14)f
(for)h(the)g(complete)h(G)t Ft(R)t(I)t(M)t(P)33 b Fy(grammar)-5
b(.)36 b(Here)28 b(are)f(the)g(main)f(dif)n(fer)n(-)300
3584 y(ences)f(between)g(the)i(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(and)25 b(the)h(G)t Ft(R)t(I)t(M)t(P)32 b Fy(grammar:)445
3857 y Fv(\017)49 b Fy(references)28 b(to)f Fz(immediates)f
Fy(ha)n(v)o(e)h(been)g(replaced)g(with)g Fz(objExpr)f
Fy(or)h Fz(e)n(xpr)p Fy(,)h(representing)e(ob-)544 3973
y(ject)f(e)o(xpressions)e(or)i(general)g(e)o(xpressions.)445
4172 y Fv(\017)49 b Fz(in)l(vok)o(eExpr)36 b Fy(can)g(no)n(w)f(e)o
(xpress)g(a)i(\002fth)f(possibility:)50 b Fq(newinvoke)p
Fy(.)62 b(This)35 b(combines)g(the)544 4287 y Fq(new)26
b Fy(J)t Ft(I)t(M)t(P)t(L)t(E)31 b Fy(statement)24 b(and)h(the)g(call)f
(to)h(the)f(constructor)h(\(via)f(a)i Fq(specialinvoke)p
Fy(.\))300 4560 y(These)f(dif)n(ferences)g(are)g(discussed)f(further)h
(in)f(the)h(follo)n(wing)e(tw)o(o)h(design)g(features.)300
4899 y Fp(2.4.3)121 b(Design)35 b(f)o(eature:)42 b(Expression)34
b(trees)300 5132 y Fy(The)21 b(main)f(design)g(feature)h(of)i(G)t
Ft(R)t(I)t(M)t(P)k Fy(is)20 b(that)g(references)j(to)d
Fz(immediates)f Fy(ha)n(v)o(e)i(been)g(replaced)g(with)300
5248 y(references)38 b(to)e Fz(e)n(xpr)l(essions)g Fy(which)g(can)h(be)
f(nested)g(arbitrarily)g(deeply)-6 b(.)65 b(Figure)37
b(2.15)f(e)o(xplicitly)2050 5509 y(29)p eop
%%Page: 30 38
30 37 bop 977 796 2247 4 v 975 917 4 121 v 1027 881 a
Fz(stmt)23 b Fv(\000)-16 b(!)25 b Fz(assignStmt)e Fv(j)h
Fz(identityStmt)f Fv(j)p 3222 917 V 975 1037 V 1411 1001
a Fz(gotoStmt)h Fv(j)g Fz(ifStmt)g Fv(j)g Fz(in)l(vok)o(eStmt)g
Fv(j)p 3222 1037 V 975 1158 V 1411 1122 a Fz(switc)o(hStmt)g
Fv(j)g Fz(monitorStmt)f Fv(j)p 3222 1158 V 975 1278 V
1411 1242 a Fz(r)l(eturnStmt)h Fv(j)g Fz(thr)l(owStmt)g
Fv(j)p 3222 1278 V 975 1398 V 1411 1362 a Fz(br)l(eakpointStmt)f
Fv(j)i Fz(nopStmt)p Fy(;)p 3222 1398 V 977 1402 2247
4 v 975 1522 4 121 v 1027 1486 a Fz(assignStmt)d Fv(\000)-16
b(!)25 b Fy(local)f Fq(=)h Fz(e)n(xpr)p Fy(;)g Fv(j)p
3222 1522 V 975 1642 V 1681 1606 a Fy(\002eld)g Fq(=)g
Fz(e)n(xpr)p Fy(;)g Fv(j)p 3222 1642 V 975 1763 V 1681
1727 a Fz(objExpr)p Fq(.)p Fy(\002eld)f Fq(=)h Fz(e)n(xpr)p
Fy(;)g Fv(j)p 3222 1763 V 975 1883 V 1681 1847 a Fz(objExpr)p
Fq([)p Fz(e)n(xpr)p Fq(])f(=)h Fz(e)n(xpr)p Fy(;)p 3222
1883 V 977 1887 2247 4 v 975 2007 4 121 v 1027 1971 a
Fz(identityStmt)d Fv(\000)-16 b(!)25 b Fy(local)f Fq(:=)h
Fy(@this:)k(type;)24 b Fv(j)p 3222 2007 V 975 2127 V
1711 2091 a Fy(local)h Fq(:=)f Fy(@parameter)p Fz(n)p
Fy(:)31 b(type;)24 b Fv(j)p 3222 2127 V 975 2248 V 1711
2212 a Fy(local)h Fq(:=)f Fy(@e)o(xception;)p 3222 2248
V 977 2251 2247 4 v 975 2371 4 121 v 1027 2335 a Fz(gotoStmt)f
Fv(\000)-16 b(!)24 b Fq(goto)g Fy(label;)p 3222 2371
V 977 2375 2247 4 v 975 2495 4 121 v 1027 2459 a Fz(ifStmt)f
Fv(\000)-16 b(!)24 b Fq(if)h Fz(conditionExpr)e Fq(goto)h
Fy(label;)p 3222 2495 V 977 2498 2247 4 v 975 2619 4
121 v 1027 2583 a Fz(in)l(vok)o(eStmt)g Fv(\000)-17 b(!)25
b Fq(invoke)f Fz(in)l(vok)o(eExpr)p Fy(;)p 3222 2619
V 977 2622 2247 4 v 975 2743 4 121 v 1027 2706 a Fz(switc)o(hStmt)f
Fv(\000)-16 b(!)24 b Fq(lookupswitch)e Fz(e)n(xpr)p 3222
2743 V 975 2863 V 1651 2827 a Fv(f)p Fq(case)i Fy(v)n(alue)2179
2842 y Fm(1)2218 2827 y Fy(:)31 b Fq(goto)24 b Fy(label)2735
2842 y Fm(1)2774 2827 y Fy(;)p 3222 2863 V 975 2983 V
1651 2947 a(...)p 3222 2983 V 975 3104 V 1651 3068 a
Fq(case)g Fy(v)n(alue)2129 3083 y Fl(n)2176 3068 y Fy(:)30
b Fq(goto)24 b Fy(label)2692 3083 y Fl(n)2739 3068 y
Fy(;)p 3222 3104 V 975 3224 V 1651 3188 a Fq(default:)118
b(goto)24 b Fy(def)o(aultLabel;)p Fv(g)p Fy(;)g Fv(j)p
3222 3224 V 975 3344 V 1651 3308 a Fq(tableswitch)f Fz(e)n(xpr)p
3222 3344 V 975 3465 V 1627 3429 a Fv(f)p Fq(case)g Fy(lo)n(w:)30
b Fq(goto)24 b Fy(lo)n(wLabel;)p 3222 3465 V 975 3585
V 1651 3549 a(...)p 3222 3585 V 975 3706 V 1651 3669
a Fq(case)g Fy(high:)30 b Fq(goto)24 b Fy(highLabel;)p
3222 3706 V 975 3826 V 1651 3790 a Fq(default:)118 b(goto)24
b Fy(def)o(aultLabel;)p Fv(g)p 3222 3826 V 977 3829 2247
4 v 975 3950 4 121 v 1027 3914 a Fz(monitorStmt)e Fv(\000)-16
b(!)24 b Fq(entermonitor)f Fz(objExpr)p Fy(;)g Fv(j)p
3222 3950 V 975 4070 V 1741 4034 a Fq(exitmonitor)g Fz(objExpr)p
Fy(;)p 3222 4070 V 977 4073 2247 4 v 975 4194 4 121 v
1027 4158 a Fz(r)l(eturnStmt)g Fv(\000)-16 b(!)24 b Fq(return)g
Fz(objExpr)p Fy(;)g Fv(j)p 3222 4194 V 975 4314 V 1651
4278 a Fq(return)p Fy(;)p 3222 4314 V 977 4317 2247 4
v 975 4438 4 121 v 1027 4402 a Fz(thr)l(owStmt)f Fv(\000)-17
b(!)25 b Fq(throw)f Fz(objExpr)p Fy(;)p 3222 4438 V 977
4441 2247 4 v 975 4562 4 121 v 1027 4525 a Fz(br)l(eakpointStmt)f
Fv(\000)-17 b(!)25 b Fq(breakpoint)p Fy(;)p 3222 4562
V 975 4682 V 1027 4646 a Fz(nopStmt)e Fv(\000)-16 b(!)24
b Fq(nop)p Fy(;)p 3222 4682 V 977 4685 2247 4 v 1157
4952 a(Figure)h(2.13:)30 b(The)d(G)t Ft(R)t(I)t(M)t(P)k
Fy(grammar)25 b(\(statements\))2050 5509 y(30)p eop
%%Page: 31 39
31 38 bop 749 1046 2702 4 v 747 1166 4 121 v 799 1130
a Fz(conditionExpr)23 b Fv(\000)-16 b(!)24 b Fz(e)n(xpr)1754
1145 y Fm(1)1819 1130 y Fz(condop)g(e)n(xpr)2312 1145
y Fm(2)p 3449 1166 V 747 1286 V 799 1250 a Fz(condop)g
Fv(\000)-16 b(!)24 b Fk(>)h Fv(j)g Fk(<)g Fv(j)f Fy(=)h
Fv(j)g(6)p Fj(=)g Fv(j)f(\024)i(j)e(\025)p 3449 1286
V 749 1290 2702 4 v 747 1410 4 121 v 799 1374 a Fz(concr)l(eteRef)h
Fv(\000)-16 b(!)24 b Fy(\002eld)h Fv(j)p 3449 1410 V
747 1530 V 1484 1494 a Fy(objExpr)p Fq(.)p Fy(\002eld)f
Fv(j)p 3449 1530 V 747 1651 V 1484 1615 a Fy(objExpr)p
Fq([)p Fz(e)n(xpr)p Fq(])p 3449 1651 V 749 1654 2702
4 v 747 1774 4 121 v 799 1738 a Fz(in)l(vok)o(eExpr)g
Fv(\000)-16 b(!)25 b Fq(specialinvoke)d Fy(local.m\()p
Fz(e)n(xpr)2765 1753 y Fm(1)2804 1738 y Fy(,)i(...,)h
Fz(e)n(xpr)3153 1753 y Fl(n)3200 1738 y Fy(\))g Fv(j)p
3449 1774 V 747 1895 V 1454 1859 a Fq(interfaceinvoke)c
Fy(local.m\()p Fz(e)n(xpr)2880 1874 y Fm(1)2919 1859
y Fy(,)k(...,)f Fz(e)n(xpr)3268 1874 y Fl(n)3315 1859
y Fy(\))h Fv(j)p 3449 1895 V 747 2015 V 1454 1979 a Fq(virtualinvoke)d
Fy(local.m\()p Fz(e)n(xpr)2761 1994 y Fm(1)2799 1979
y Fy(,)j(...,)g Fz(e)n(xpr)3149 1994 y Fl(n)3196 1979
y Fy(\))g Fv(j)p 3449 2015 V 747 2136 V 1454 2100 a Fq(staticinvoke)d
Fy(m\()p Fz(e)n(xpr)2482 2115 y Fm(1)2521 2100 y Fy(,)j(...,)f
Fz(e)n(xpr)2870 2115 y Fl(n)2917 2100 y Fy(\))p 3449
2136 V 747 2256 V 1454 2220 a Fq(newinvoke)f Fy(type\()p
Fz(e)n(xpr)2397 2235 y Fm(1)2436 2220 y Fy(,)i(...,)f
Fz(e)n(xpr)2785 2235 y Fl(n)2832 2220 y Fy(\))p 3449
2256 V 749 2259 2702 4 v 747 2380 4 121 v 799 2344 a
Fz(e)n(xpr)h Fv(\000)-16 b(!)24 b Fz(e)n(xpr)1359 2359
y Fm(1)1424 2344 y Fz(binop)f(e)n(xpr)1850 2359 y Fm(2)1915
2344 y Fv(j)p 3449 2380 V 747 2500 V 1184 2464 a Fy(\(type\))i
Fz(e)n(xpr)g Fv(j)p 3449 2500 V 747 2620 V 1184 2584
a Fz(e)n(xpr)g Fq(instanceof)d Fy(type)j Fv(j)p 3449
2620 V 747 2741 V 1184 2705 a Fq(new)f Fy(refT)-8 b(ype)25
b Fv(j)p 3449 2741 V 747 2861 V 1184 2825 a Fq(length)e
Fz(e)n(xpr)i Fv(j)p 3449 2861 V 747 2982 V 1184 2946
a Fq(neg)f Fz(e)n(xpr)h Fv(j)p 3449 2982 V 747 3102 V
1184 3066 a Fz(objExpr)f Fv(j)p 3449 3102 V 747 3222
V 1184 3186 a Fq(constant)p 3449 3222 V 749 3226 2702
4 v 747 3346 4 121 v 799 3310 a Fz(objExpr)g Fv(\000)-16
b(!)24 b Fz(concr)l(eteRef)h Fv(j)p 3449 3346 V 747 3466
V 1334 3430 a Fy(\(type\))g Fz(objExpr)e Fv(j)p 3449
3466 V 747 3587 V 1334 3551 a Fz(in)l(vok)o(eExpr)h Fv(j)p
3449 3587 V 747 3707 V 1334 3671 a Fq(newarray)f Fy(\(type\))i([)p
Fz(e)n(xpr)p Fy(])g Fv(j)p 3449 3707 V 747 3828 V 1334
3792 a Fq(newmultiarray)d Fy(\(type\))j([)p Fz(e)n(xpr)2607
3807 y Fm(1)2646 3792 y Fy(])g(...)31 b([)p Fz(e)n(xpr)3018
3807 y Fl(n)3065 3792 y Fy(])25 b([]*)p Fv(j)p 3449 3828
V 747 3948 V 1334 3912 a Fy(local)f Fv(j)p 3449 3948
V 747 4068 V 1334 4032 a Fy(nullConstant)f Fv(j)i Fy(stringConstant)p
3449 4068 V 749 4072 2702 4 v 747 4192 4 121 v 799 4156
a Fz(binop)f Fv(\000)-16 b(!)24 b Fy(+)h Fv(j)g Fy(-)g
Fv(j)f Fk(>)h Fv(j)g Fk(<)g Fv(j)f Fy(=)h Fv(j)g(6)p
Fj(=)g Fv(j)f(\024)i(j)e(\025)i(j)e(\003)h(j)f Fk(=)h
Fv(j)p 3449 4192 V 747 4312 V 1244 4276 a Fk(<<)f Fv(j)h
Fk(>>)g Fv(j)f Fk(<<<)h Fv(j)f Fj(\045)i Fv(j)e Fq(rem)g
Fv(j)h Fj(&)g Fv(j)f(j)h(j)p 3449 4312 V 747 4433 V 1244
4397 a Fq(cmp)f Fv(j)h Fq(cmpg)f Fv(j)g Fq(cmpl)p 3449
4433 V 749 4436 2702 4 v 970 4703 a Fy(Figure)h(2.14:)30
b(The)d(G)t Ft(R)t(I)t(M)t(P)32 b Fy(grammar)24 b(\(support)g
(productions\))2050 5509 y(31)p eop
%%Page: 32 40
32 39 bop 300 499 a Fy(illustrates)33 b(this)g(dif)n(ference.)58
b(Note)34 b(that)g(the)g(original)f(Ja)n(v)n(a)g(statement)g(is)h(one)g
(line)f(long,)j(b)n(ut)d(the)300 615 y(equi)n(v)n(alent)28
b(G)t Ft(R)t(I)t(M)t(P)33 b Fy(code)28 b(is)f(not.)38
b(This)26 b(is)h(because)j(G)t Ft(R)t(I)t(M)t(P)k Fy(code,)28
b(lik)o(e)h(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)j(only)27
b(allo)n(ws)f(for)300 730 y(one)35 b(side)g(ef)n(fect)g(\(memory)g
(modi\002cation\))f(per)i(statement.)60 b(Ja)n(v)n(a)35
b(statements)f(can,)k(on)d(the)g(other)300 846 y(hand,)26
b(modify)f(multiple)g(memory)g(locations)g(such)h(as)g(with)g
Fq(x)59 b(=)h(y++)f(+)g(z++)26 b Fy(which)g(modi\002es)300
962 y(three)40 b(locals.)73 b(W)-8 b(e)40 b(impose)e(this)h
(restriction)f(to)h(simplify)f(analyses)h(on)i(G)t Ft(R)t(I)t(M)t(P)r
Fy(.)78 b(This)39 b(has)g(the)300 1077 y(unfortunate)30
b(consequence)g(of)g(not)g(allo)n(wing)f(the)h(same)g(compactness)f(as)
i(the)f(original)f(Ja)n(v)n(a)h(code)300 1193 y(to)i(be)h(achie)n(v)o
(ed)e(which)h(af)n(fects)h(code)f(generation)g(and)g(code)h
(decompilation.)52 b(This)31 b(is)h(discussed)300 1308
y(further)25 b(in)f(chapter)i(3.)470 1977 y Fo(return)49
b(this.a.x++)f(+)520 2059 y(m*n*\(x*100+10\);)p 1479
2436 4 883 v 1530 1609 a($r0=this.a;)1530 1691 y($i0=$r0.x;)1530
1772 y($i1=$i0+1;)1530 1854 y($r0.x=$i1;)1530 1936 y($i2=m*n;)1530
2017 y($i1=this.x;)1530 2099 y($i1=$i1*100;)1530 2181
y($i1=$i1+10;)1530 2263 y($i2=$i2*$i1;)1530 2344 y($i3=$i0+$i2;)1530
2426 y(return)h($i3;)p 2178 2436 V 2230 1895 a($r0=this.a;)2230
1977 y($i0=$r0.x;)2230 2058 y($r0.x=$i0+1;)2230 2140
y(return)f($i0+m*n*this.x*100+10;)p 1479 2557 4 121 v
2178 2557 V 796 2641 a Fy(\(a\))26 b(Ja)n(v)n(a)p 1479
2677 V 522 w(\(b\))f(Jimple)p 2178 2677 V 747 w(\(c\))g(Grimp)949
2944 y(Figure)g(2.15:)30 b(Example)24 b(of)h(nesting)f(of)h(e)o
(xpressions)e(in)i(Grimp.)300 3350 y Fp(2.4.4)121 b(Design)35
b(f)o(eature:)42 b(Ne)n(win)-5 b(v)l(oke)36 b(e)n(xpression)300
3582 y Fy(The)k(second)f(k)o(e)o(y)g(feature)i(of)g(G)t
Ft(R)t(I)t(M)t(P)47 b Fy(is)39 b(its)g(ability)f(to)h(represent)h(the)g
(Ja)n(v)n(a)f Fq(new)g Fy(construct)g(as)300 3698 y(one)32
b(e)o(xpression.)52 b(F)o(or)33 b(e)o(xample,)g(the)f(Ja)n(v)n(a)g
(code)h Fq(Object)58 b(obj)h(=)h(new)f(A\(new)f(B\(\)\);)36
b Fy(is)300 3813 y(represented)25 b(in)h(J)t Ft(I)t(M)t(P)t(L)t(E)32
b Fy(by:)300 4053 y Fo(A)50 b($r1,)f(r3;)300 4135 y(B)h($r2;)300
4298 y($r1)f(=)h(new)f(A;)300 4380 y($r2)g(=)h(new)f(B;)300
4461 y(specialinvoke)e($r2.<B:)i(void)g(<init>\(\)>\(\);)300
4543 y(specialinvoke)e($r1.<A:)i(void)g(<init>\(B\)>\($r2\);)300
4625 y(r3)g(=)h($r1;)446 4898 y Fy(Normally)-6 b(,)34
b(aggre)o(gation)d(of)j(e)o(xpressions)d(is)i(performed)g(by)g
(matching)f(single)g(use-defs)h(such)300 5014 y(as)39
b Fq(x)59 b(=)h(...;)44 b Fy(and)39 b Fq(...)119 b(=)59
b(x;)45 b Fy(Because)40 b(the)e Fq(specialinvoke)p Fy(s)d(modify)j(the)
g(recei)n(v)o(er)300 5129 y(object)27 b(without)f(rede\002ning)i(it)f
(we)h(can)g(not)f(aggre)o(gate)g Fq(new)g Fy(and)h Fq(specialinvoke)c
Fy(statements)300 5245 y(in)37 b(this)g(w)o(ay)-6 b(.)69
b(This)37 b(is)g(a)h(problem)e(because)i Fq(new)g Fy(statements)e
(occur)i(frequently)f(and)h(it)f(is)g(thus)2050 5509
y(32)p eop
%%Page: 33 41
33 40 bop 300 499 a Fy(highly)21 b(desirable)g(to)g(be)h(able)g(to)g
(aggre)o(gate)f(them.)29 b(T)-8 b(o)21 b(achie)n(v)o(e)g(this,)h(we)g
(introduce)f(a)h Fq(newinvoke)300 615 y Fy(e)o(xpression)35
b(to)h(the)i(G)t Ft(R)t(I)t(M)t(P)43 b Fy(grammar)37
b(to)f(e)o(xpress)f(pairs)i(of)f(the)g(form)h Fq(x)59
b(=)h(new)f(Object\(\))300 730 y(...)119 b(specialinvoke)57
b(x.<Object:)117 b(void)59 b(<init>\(\)>\(\);)p Fy(.)300
1069 y Fp(2.4.5)121 b(W)-5 b(alkthr)n(ough)34 b(of)f(e)n(xample)300
1302 y Fy(This)24 b(subsection)g(describes)g(the)h(e)o(xample)f(found)g
(in)h(2.16.)30 b(Note)24 b(that:)420 1575 y(1.)49 b(the)26
b(G)t Ft(R)t(I)t(M)t(P)31 b Fy(code)25 b(is)f(e)o(xtremely)f(similar)h
(to)g(the)g(original)g(Ja)n(v)n(a)g(code.)31 b(The)24
b(main)g(dif)n(ferences)544 1691 y(are)h(the)g(unstructured)f(nature)h
(of)g(the)f(code)h(\(no)g(if-then-else\),)g(and)g(the)f(identity)g
(statements)420 1889 y(2.)49 b(the)25 b(statements)544
2130 y Fq($i0)59 b(=)h(this.<Test:)d(int)i(b>;)544 2245
y($i1)g(=)h(10)f(*)g($i0;)544 2361 y(x)g(=)h(x)g(+)f($i1;)544
2601 y Fy(from)28 b(the)j(J)t Ft(I)t(M)t(P)t(L)t(E)36
b Fy(v)o(ersion)27 b(in)i(\002gure)g(2.12)f(ha)n(v)o(e)h(been)g(aggre)o
(gated)f(to)g(x)h(=)g(x)g(+)g(10)g(*)f(this.b)544 2716
y(in)c(the)j(G)t Ft(R)t(I)t(M)t(P)k Fy(form.)300 3163
y Fp(2.4.6)121 b(Summar)q(y)300 3396 y Fy(This)20 b(chapter)g(has)h
(presented)f(the)g(three)h(intermediate)e(representations)h(that)i(S)t
Ft(O)t(O)q(T)j Fy(pro)o(vides:)k(B)q Ft(A)t(F)r Fy(,)302
3511 y(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)c(and)d(G)t Ft(R)t(I)t(M)t(P)r
Fy(.)34 b(Their)20 b(main)f(design)h(features)g(were)h(discussed,)e
(and)h(their)g(respecti)n(v)o(e)f(gram-)300 3627 y(mars)33
b(were)h(gi)n(v)o(en.)54 b(Each)34 b(intermediate)e(representation)g(w)
o(as)i(also)e(illustrated)g(with)h(an)g(e)o(xample)300
3743 y(program.)2050 5509 y(33)p eop
%%Page: 34 42
34 41 bop 420 1543 a Fo(int)49 b(a;)420 1625 y(int)g(b;)420
1788 y(public)g(int)g(stepPoly\(int\))420 1870 y({)619
1952 y(Test)g(this;)619 2033 y(int)h(x,)f(x#2;)619 2115
y(int[])g(array;)619 2278 y(this)g(:=)h(@this;)619 2360
y(x)g(:=)f(@parameter0;)619 2442 y(array)g(=)h(newarray)e(\(int\)[10];)
619 2523 y(if)i(x)f(<=)h(10)f(goto)g(label0;)619 2687
y(array[0])g(=)g(this.a;)619 2768 y(java.lang.System.)819
2850 y(out.println\("foo"\);)619 2932 y(goto)g(label1;)470
3095 y(label0:)619 3177 y(if)h(x)f(<=)h(5)f(goto)g(label1;)619
3340 y(x)h(=)g(x)f(+)h(10)f(*)h(this.b;)470 3504 y(label1:)619
3585 y(x)g(=)g(array[0];)619 3667 y(return)f(x;)420 3749
y(})p 2098 3758 4 2270 v 2220 1911 a(int)g(a;)2220 1992
y(int)g(b;)2220 2156 y(public)g(int)g(stepPoly\(int)f(x\))2220
2237 y({)2419 2319 y(int[])h(array)g(=)h(new)f(int[10];)2419
2483 y(if\(x)g(>)h(10\))2419 2564 y({)2569 2646 y(array[0])e(=)i(a;)
2569 2728 y(System.out.println\("foo"\);)2419 2809 y(})2419
2891 y(else)f(if\(x)g(>)h(5\))2569 2973 y(x)f(=)h(x)g(+)f(10)h(*)f(b;)
2419 3136 y(x)h(=)g(array[0];)2419 3299 y(return)f(x;)2220
3381 y(})p 2098 3878 4 121 v 987 3963 a Fy(\(a\))27 b(G)t
Ft(R)t(I)t(M)t(P)p 2098 3999 V 1196 w Fy(\(b\))e(Original)f(Ja)n(v)n(a)
h(code)1271 4158 y(Figure)g(2.16:)30 b Fq(stepPoly)23
b Fy(in)j(G)t Ft(R)t(I)t(M)t(P)32 b Fy(form.)2050 5509
y(34)p eop
%%Page: 35 43
35 42 bop 300 1202 a Fu(Chapter)58 b(3)300 1655 y(T)-17
b(ransf)l(ormations)300 2151 y Fy(This)22 b(chapter)g(describes)h(the)f
(transformations)f(present)h(in)i(S)t Ft(O)t(O)q(T)j
Fy(which)22 b(enable)h(it)f(as)h(an)f(optimiza-)300 2266
y(tion)29 b(frame)n(w)o(ork.)49 b(S)t Ft(O)t(O)q(T)35
b Fy(operates)c(as)f(follo)n(ws:)40 b(\(see)31 b(\002gure)g(3.1\))f
(Class\002les)g(are)h(produced)f(from)300 2382 y(a)j(v)n(ariety)g
(sources,)i(such)e(as)g(the)g Fq(javac)f Fy(or)h Fq(ML)g
Fy(compiler)-5 b(.)54 b(These)33 b(class\002les)g(are)h(then)f(fed)g
(into)302 2497 y(S)t Ft(O)t(O)q(T)r Fy(.)44 b(A)31 b(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(representation)28 b(of)g(the)g(class\002les)h
(is)f(generated)h(\(section)e(3.1\))i(at)f(which)g(point)300
2613 y(the)34 b(optimizations)e(that)i(the)g(de)n(v)o(eloper)g(has)g
(written)g(using)f(the)j(S)t Ft(O)t(O)q(T)k Fy(frame)n(w)o(ork)34
b(are)h(applied.)300 2728 y(The)25 b(resulting)g(optimized)h(J)t
Ft(I)t(M)t(P)t(L)t(E)31 b Fy(code)26 b(must)e(then)h(be)h(con)l(v)o
(erted)f(back)g(to)g(bytecode,)g(via)h(one)f(of)300 2844
y(tw)o(o)30 b(alternati)n(v)o(es.)47 b(The)31 b(\002rst)g(alternati)n
(v)o(e)e(is)i(co)o(v)o(ered)f(in)g(section)g(3.2)h(and)f(consists)g(of)
g(generating)302 2960 y(G)t Ft(R)t(I)t(M)t(P)37 b Fy(code)30
b(which)f(is)h(tree-lik)o(e)g(code)g(and)g(tra)n(v)o(ersing)f(it.)46
b(The)30 b(second)g(alternati)n(v)o(e,)g(co)o(v)o(ered)f(in)300
3075 y(section)22 b(3.3,)h(consists)e(of)i(generating)f(nai)n(v)o(e)i
(B)q Ft(A)t(F)j Fy(code)c(which)g(is)f(stack)g(code)h(and)g(then)f
(optimizing)300 3191 y(it.)30 b(The)22 b(ne)n(wly)g(generated)i
(class\002les)e(consist)g(of)h(optimized)f(bytecode)g(which)h(can)g
(then)g(be)g(fed)g(into)300 3306 y(one)i(of)g(man)o(y)e(destinations)g
(such)i(as)g(a)g(Ja)n(v)n(a)f(V)-6 b(irtual)25 b(Machine)f(for)h(e)o(x)
o(ecution.)300 3685 y Fr(3.1)143 b(Bytecode)37 b Fh(\000)-24
b(!)40 b Fr(Anal)n(yzab)o(le)h(J)8 b Fn(I)g(M)g(P)g(L)g(E)300
3952 y Fy(This)34 b(section)g(describes)g(the)h(\002)n(v)o(e)f(steps)g
(necessary)h(to)f(con)l(v)o(ert)g(bytecode)g(to)h(analyzable)f(Jimple)
300 4067 y(code.)62 b(This)35 b(is)g(a)g(non-tri)n(vial)f(process)h
(because)h(the)f(bytecode)g(is)g(untyped)f(stackcode,)k(whereas)302
4183 y(J)t Ft(I)t(M)t(P)t(L)t(E)31 b Fy(code)25 b(is)g(typed)f
(3-address)h(code.)31 b(The)24 b(\002)n(v)o(e)h(steps)f(are)h
(illustrated)f(in)g(\002gure)i(3.2.)446 4347 y(Throughout)g(this)f
(chapter)j(we)f(use)f(a)h(running)f(e)o(xample)g(to)g(sho)n(w)g(ho)n(w)
g(these)h(\002)n(v)o(e)f(steps)g(trans-)300 4462 y(form)f(Ja)n(v)n(a)f
(code.)31 b(See)26 b(\002gure)f(3.3)f(for)i(the)e(original)g(Ja)n(v)n
(a)g(code.)300 4798 y Fp(3.1.1)121 b(Direct)34 b(translation)h(to)h(B)s
Fg(A)6 b(F)37 b Fp(with)c(stac)n(k)h(interpretation)300
5028 y Fy(The)d(\002rst)g(step)f(is)h(to)f(con)l(v)o(ert)h(the)g
(bytecodes)f(to)g(the)h(equi)n(v)n(alent)g(B)q Ft(A)t(F)36
b Fy(instructions.)47 b(Most)30 b(of)h(the)300 5144 y(bytecodes)26
b(correspond)f(directly)h(to)g(equi)n(v)n(alent)g(B)q
Ft(A)t(F)31 b Fy(instructions.)i(F)o(or)26 b(e)o(xample,)f(as)i(seen)f
(in)g(\002g-)300 5260 y(ure)k(3.4,)g Fq(iconst_0)e Fy(corresponds)g(to)
h Fq(push)59 b(0)p Fy(,)31 b Fq(istore_2)c Fy(corresponds)i(to)g
Fq(store.i)58 b(l2)2050 5509 y Fy(35)p eop
%%Page: 36 44
36 43 bop 783 4434 a @beginspecial 0 @llx 0 @lly 316
@urx 412 @ury 3160 @rwi @setspecial
%%BeginDocument: transformationsOverview.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: transformationsOverview.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Mon May  1 14:36:57 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 316 412
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 0.8500
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-37.0 423.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Helvetica-Bold /Helvetica-Bold-iso isovec ReEncode
/Helvetica-Narrow-Bold /Helvetica-Narrow-Bold-iso isovec ReEncode
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 8887 m -1000 -1000 l 7582 -1000 l 7582 8887 l cp clip
 0.05354 0.05354 sc
/Helvetica-Bold-iso ff 180.00 scf sf
900 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
990 450 m
gs 1 -1 sc (Java) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2340 720 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2430 467 m
gs 1 -1 sc (SML) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3960 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3915 450 m
gs 1 -1 sc (Scheme) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
5445 675 m
gs 1 -1 sc (source) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
5490 450 m
gs 1 -1 sc (Eiffel) col0 sh gr
% Arc
7.500 slw
gs  clippath
2999 6537 m 3015 6660 l 2943 6559 l 2993 6685 l 3048 6663 l cp
clip
n 4508.8 5986.0 1638.8 -152.1 155.7 arcn
gs col0 s gr
 gr

% arrowhead
n 2999 6537 m 3015 6660 l 2943 6559 l 2971 6548 l 2999 6537 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
4310 6565 m 4230 6660 l 4256 6539 l 4196 6660 l 4250 6687 l cp
clip
n 2981.2 5962.5 1430.3 -29.2 29.2 arc
gs col0 s gr
 gr

% arrowhead
n 4310 6565 m 4230 6660 l 4256 6539 l 4283 6552 l 4310 6565 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
4307 1597 m 4185 1620 l 4282 1543 l 4159 1599 l 4184 1654 l cp
clip
n 5760 900 m 4185 1620 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 4307 1597 m 4185 1620 l 4282 1543 l 4294 1570 l 4307 1597 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3443 1471 m 3510 1575 l 3402 1514 l 3500 1607 l 3542 1563 l cp
clip
n 2700 810 m 3510 1575 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3443 1471 m 3510 1575 l 3402 1514 l 3423 1493 l 3443 1471 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3139 1548 m 3240 1620 l 3117 1604 l 3243 1653 l 3265 1598 l cp
clip
n 1132 792 m 3240 1620 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3139 1548 m 3240 1620 l 3117 1604 l 3128 1576 l 3139 1548 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 810 270 m 1575 270 l 1575 765 l 810 765 l cp gs col0 s gr 
% Polyline
n 2250 225 m 3015 225 l 3015 810 l 2250 810 l cp gs col0 s gr 
% Polyline
gs  clippath
3953 1393 m 3870 1485 l 3900 1365 l 3836 1484 l 3889 1512 l cp
clip
n 4230 810 m 3870 1485 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3953 1393 m 3870 1485 l 3900 1365 l 3926 1379 l 3953 1393 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 3870 225 m 4725 225 l 4725 765 l 3870 765 l cp gs col0 s gr 
% Polyline
n 5400 270 m 6165 270 l 6165 765 l 5400 765 l cp gs col0 s gr 
% Polyline
n 3105 1620 m 4185 1620 l 4185 1935 l 3105 1935 l cp gs col0 s gr 
% Polyline
gs  clippath
3675 3165 m 3645 3285 l 3615 3165 l 3615 3300 l 3675 3300 l cp
clip
n 3645 1980 m 3645 3285 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3675 3165 m 3645 3285 l 3615 3165 l 3645 3165 l 3675 3165 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 3780 2475 m 4950 2475 l 4950 2880 l 3780 2880 l cp gs col7 0.50 shd ef gr gs col0 s gr 
% Polyline
gs  clippath
3675 4605 m 3645 4725 l 3615 4605 l 3615 4740 l 3675 4740 l cp
clip
n 3645 3735 m 3645 4725 l gs col0 s gr gr

% arrowhead
n 3675 4605 m 3645 4725 l 3615 4605 l 3645 4605 l 3675 4605 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1485 5535 m 2745 5535 l 2745 6120 l 1485 6120 l cp gs col7 0.50 shd ef gr gs col0 s gr 
% Polyline
n 4725 5490 m 5985 5490 l 5985 6075 l 4725 6075 l cp gs col7 0.50 shd ef gr gs col0 s gr 
% Polyline
 [15 45] 45 sd
n 1395 2340 m 6165 2340 l 6165 6345 l 1395 6345 l cp gs col0 s gr  [] 0 sd
% Polyline
n 2655 6705 m 4725 6705 l 4725 7110 l 2655 7110 l cp gs col0 s gr 
% Polyline
gs  clippath
2501 7438 m 2377 7438 l 2486 7380 l 2355 7413 l 2370 7471 l cp
clip
n 3637 7123 m 2377 7438 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 2501 7438 m 2377 7438 l 2486 7380 l 2493 7409 l 2501 7438 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 2160 7470 m 2610 7470 l 2610 7740 l 2160 7740 l cp gs col0 s gr 
% Polyline
n 2925 7470 m 4500 7470 l 4500 7740 l 2925 7740 l cp gs col0 s gr 
% Polyline
gs  clippath
3720 7395 m 3690 7515 l 3660 7395 l 3660 7530 l 3720 7530 l cp
clip
n 3690 7155 m 3690 7515 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 3720 7395 m 3690 7515 l 3660 7395 l 3690 7395 l 3720 7395 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
5465 7290 m 5580 7335 l 5457 7350 l 5591 7367 l 5599 7307 l cp
clip
n 4096 7147 m 5580 7335 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 5465 7290 m 5580 7335 l 5457 7350 l 5461 7320 l 5465 7290 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 5040 7380 m 6570 7380 l 6570 7875 l 5040 7875 l cp gs col0 s gr 
% Polyline
n 720 7470 m 1845 7470 l 1845 7740 l 720 7740 l cp gs col0 s gr 
% Polyline
gs  clippath
1113 7483 m 990 7470 l 1105 7423 l 971 7442 l 979 7502 l cp
clip
n 3151 7160 m 990 7470 l gs 0.75 setgray ef gr gs col0 s gr gr

% arrowhead
n 1113 7483 m 990 7470 l 1105 7423 l 1109 7453 l 1113 7483 l  cp gs 0.00 setgray ef gr  col0 s
/Helvetica-Bold-iso ff 180.00 scf sf
3240 1845 m
gs 1 -1 sc (class files) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
3105 1080 m
gs 1 -1 sc (MLJ) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
1800 1350 m
gs 1 -1 sc (javac) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
4185 1125 m
gs 1 -1 sc (KAWA) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5130 1395 m
gs 1 -1 sc (SmallEiffel) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3870 2745 m
gs 1 -1 sc (3.1 Jimplify) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3375 3645 m
gs 1 -1 sc (Jimple) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2925 5085 m
gs 1 -1 sc (Optimized Jimple) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
3825 4185 m
gs 1 -1 sc (Optimize) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
1620 5805 m
gs 1 -1 sc (3.2 Option I) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
1575 5985 m
gs 1 -1 sc ( \(via Grimp\)) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
4815 5760 m
gs 1 -1 sc (3.3 Option II) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
4680 5940 m
gs 1 -1 sc (    \(via Baf\)) col0 sh gr
/Helvetica-Bold-iso ff 180.00 scf sf
2790 6975 m
gs 1 -1 sc (Optimized class files) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 240.00 scf sf
1080 2205 m
gs 1 -1 sc (Soot) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
2250 7695 m
gs 1 -1 sc (JIT) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
3015 7695 m
gs 1 -1 sc (Adaptive Engine) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5085 7560 m
gs 1 -1 sc (Ahead-of-Time) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
5130 7740 m
gs 1 -1 sc (    Compiler) col0 sh gr
/Helvetica-Narrow-Bold-iso ff 180.00 scf sf
765 7650 m
gs 1 -1 sc (Interpreter) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 1170 4745 a Fy(Figure)25 b(3.1:)30 b(An)25
b(o)o(v)o(ervie)n(w)e(of)i(Soot)f(and)h(its)f(usage.)2050
5509 y(36)p eop
%%Page: 37 45
37 44 bop 1358 4025 a @beginspecial 0 @llx 0 @lly 178
@urx 314 @ury 1780 @rwi @setspecial
%%BeginDocument: bytecodeToJimple.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: bytecodeToJimple.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Sat Apr  8 17:40:08 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 178 314
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-237.0 327.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 6187 m -1000 -1000 l 7587 -1000 l 7587 6187 l cp clip
 0.06299 0.06299 sc
% Polyline
7.500 slw
gs  clippath
4530 915 m 4500 1035 l 4470 915 l 4470 1050 l 4530 1050 l cp
clip
n 4500 540 m 4500 1035 l gs col0 s gr gr

% arrowhead
n 4530 915 m 4500 1035 l 4470 915 l  col0 s
% Polyline
gs  clippath
4530 1725 m 4500 1845 l 4470 1725 l 4470 1860 l 4530 1860 l cp
clip
n 4500 1350 m 4500 1845 l gs col0 s gr gr

% arrowhead
n 4530 1725 m 4500 1845 l 4470 1725 l  col0 s
% Polyline
gs  clippath
4575 3660 m 4545 3780 l 4515 3660 l 4515 3795 l 4575 3795 l cp
clip
n 4545 3375 m 4545 3780 l gs col0 s gr gr

% arrowhead
n 4575 3660 m 4545 3780 l 4515 3660 l  col0 s
% Polyline
gs  clippath
4575 4560 m 4545 4680 l 4515 4560 l 4515 4695 l 4575 4695 l cp
clip
n 4545 4320 m 4545 4680 l gs col0 s gr gr

% arrowhead
n 4575 4560 m 4545 4680 l 4515 4560 l  col0 s
% Polyline
n 3780 1890 m 5310 1890 l 5310 2385 l 3780 2385 l cp gs col0 s gr 
% Polyline
gs  clippath
4575 2715 m 4545 2835 l 4515 2715 l 4515 2850 l 4575 2850 l cp
clip
n 4545 2475 m 4545 2835 l gs col0 s gr gr

% arrowhead
n 4575 2715 m 4545 2835 l 4515 2715 l  col0 s
% Polyline
n 3825 2835 m 5310 2835 l 5310 3330 l 3825 3330 l cp gs col0 s gr 
% Polyline
n 4050 3780 m 5265 3780 l 5265 4230 l 4050 4230 l cp gs col0 s gr 
% Polyline
n 4050 4725 m 5130 4725 l 5130 5175 l 4050 5175 l cp gs col0 s gr 
% Polyline
n 4140 225 m 4905 225 l 4905 540 l 4140 540 l cp gs col0 s gr 
% Polyline
n 4140 1080 m 4905 1080 l 4905 1350 l 4140 1350 l cp gs col0 s gr 
/Times-Roman ff 180.00 scf sf
3960 2070 m
gs 1 -1 sc (verbose untyped) col0 sh gr
/Times-Roman ff 180.00 scf sf
3960 2295 m
gs 1 -1 sc (       Jimple) col0 sh gr
/Times-Roman ff 180.00 scf sf
3960 3060 m
gs 1 -1 sc (verbose untyped) col0 sh gr
/Times-Roman ff 180.00 scf sf
4185 3240 m
gs 1 -1 sc (split Jimple) col0 sh gr
/Times-Roman ff 180.00 scf sf
4185 4905 m
gs 1 -1 sc (analyzable) col0 sh gr
/Times-Roman ff 180.00 scf sf
4320 5085 m
gs 1 -1 sc (Jimple) col0 sh gr
/Times-Roman ff 180.00 scf sf
4140 4140 m
gs 1 -1 sc (split Jimple) col0 sh gr
/Times-Roman ff 180.00 scf sf
4140 3960 m
gs 1 -1 sc (verbose typed) col0 sh gr
/Times-Roman ff 180.00 scf sf
4275 450 m
gs 1 -1 sc (.class) col0 sh gr
/Times-Roman ff 180.00 scf sf
4680 945 m
gs 1 -1 sc (with stack interpretation) col0 sh gr
/Times-Roman ff 180.00 scf sf
4680 765 m
gs 1 -1 sc (3.1.1 direct translation ) col0 sh gr
/Times-Roman ff 180.00 scf sf
4365 1305 m
gs 1 -1 sc (Baf) col0 sh gr
/Times-Roman ff 180.00 scf sf
4680 1530 m
gs 1 -1 sc (3.1.2 direct translation) col0 sh gr
/Times-Roman ff 180.00 scf sf
4680 1755 m
gs 1 -1 sc (with stack height) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 2655 m
gs 1 -1 sc (3.1.3 split locals) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 4545 m
gs 1 -1 sc (3.1.5 cleanup) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 3600 m
gs 1 -1 sc (3.1.4 type locals) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 1199 4337 a Fy(Figure)26 b(3.2:)k(Bytecode)25
b(to)h(J)t Ft(I)t(M)t(P)t(L)t(E)32 b Fy(in)24 b(\002)n(v)o(e)g(steps.)
2050 5509 y(37)p eop
%%Page: 38 46
38 45 bop 900 1210 a Fo(public)49 b(class)g(Test)900
1292 y({)1099 1373 y(A)h(a;)1099 1455 y(boolean)f(condition;)1099
1618 y(public)g(int)g(runningExample\(\))1099 1700 y({)1299
1782 y(A)g(a;)1299 1864 y(int)g(sum)g(=)h(0;)1299 2027
y(if\(condition\))1299 2109 y({)1498 2190 y(int)f(z)h(=)f(5;)1498
2272 y(a)g(=)h(new)f(B\(\);)1498 2354 y(sum)g(+=)g(z++;)1299
2435 y(})1299 2517 y(else)1299 2599 y({)1498 2680 y(String)f(s)i(=)g
("four";)1498 2762 y(a)f(=)h(new)f(C\(s\);)1299 2844
y(})1299 3007 y(return)f(a.value)h(+)g(sum;)1099 3089
y(})900 3171 y(})900 3334 y(class)g(A)900 3416 y({)1099
3497 y(int)h(value;)900 3579 y(})900 3742 y(class)f(C)h(extends)e(A)900
3824 y({)1099 3906 y(public)h(C\(String)f(s\){})900 3988
y(})900 4151 y(class)h(B)h(extends)e(A)900 4233 y({)900
4314 y(})942 4591 y Fy(Figure)25 b(3.3:)30 b(The)25 b(running)f(e)o
(xample)g(in)g(its)g(original)g(Ja)n(v)n(a)g(form.)2050
5509 y(38)p eop
%%Page: 39 47
39 46 bop 300 499 a Fy(and)26 b(so)f(forth.)34 b(Each)26
b(untyped)f(local)h(v)n(ariable)f(slot)g(in)g(the)h(bytecode)f(gets)h
(con)l(v)o(erted)f(to)h(an)g(e)o(xplicit)300 615 y(\(b)n(ut)e(still)g
(untyped\))g(local)h(v)n(ariable)f(in)i(B)q Ft(A)t(F)k
Fy(code.)446 775 y(The)23 b(only)g(dif)n(\002culty)f(lies)g(in)h
(transforming)f(the)h Fq(dupxxx)f Fy(class)h(of)g(instructions)e(and)i
(the)g Fq(swap)300 891 y Fy(instruction.)41 b(These)29
b(bytecode)g(instructions)e(are)i(untyped,)g(b)n(ut)g(since)h(B)q
Ft(A)t(F)k Fy(instructions)27 b(are)j(fully)300 1006
y(typed,)41 b(we)d(must)f(determine)h(which)f(kind)h(of)g(data)g(is)g
(being)f(duplicated)g(or)i(sw)o(apped)e(by)h(these)300
1122 y(instructions)17 b(before)j(the)o(y)e(can)i(be)f(transformed.)29
b(This)18 b(can)i(be)f(achie)n(v)o(ed)f(by)h(performing)g(an)g
(abstract)300 1237 y(stack)j(interpretation,)g(in)g(which)g(we)g
(compute)g(the)g(contents)f(of)i(the)f(computation)f(stack)h(after)h(e)
n(v)o(ery)300 1353 y(instruction)i(\(abstract)i(stack)g(interpretation)
e(is)i(discussed)f(in)g(detail)g(in)h([16].\))37 b(Figure)27
b(3.4\(b\))g(gi)n(v)o(es)300 1468 y(the)32 b(contents)f(of)h(the)g
(stack)g(e)o(xplicitly)-6 b(,)31 b(and)h(it)f(is)h(used)f(to)h
(determine)f(that)h(both)f Fq(dup)p Fy(s)g(should)g(be)300
1584 y(con)l(v)o(erted)24 b(to)h Fq(dup.r)p Fy(,)e(because)j(the)e(top)
g(of)h(the)g(stack)g(before)g(each)g Fq(dup)g Fy(contains)f(a)h
Fq(ref)p Fy(.)300 1912 y Fp(3.1.2)121 b(Direct)34 b(translation)h(to)h
(J)6 b Fg(I)g(M)g(P)g(L)g(E)35 b Fp(with)f(stac)n(k)g(height)300
2140 y Fy(The)39 b(ne)o(xt)f(phase)h(is)f(to)h(con)l(v)o(ert)f(each)k
(B)q Ft(A)t(F)i Fy(instruction)37 b(to)h(an)h(equi)n(v)n(alent)g(J)t
Ft(I)t(M)t(P)t(L)t(E)46 b Fy(instruction)300 2255 y(sequence.)31
b(This)24 b(is)g(done)h(in)f(three)h(steps:)420 2482
y(1.)49 b(Compute)37 b(the)g(stack)h(height)e(after)j(each)h(B)q
Ft(A)t(F)i Fy(instruction,)d(by)f(performing)f(a)g(depth-\002rst)544
2598 y(tra)n(v)o(ersal)25 b(of)h(the)h(B)q Ft(A)t(F)k
Fy(instructions.)g(Note)25 b(that)h(a)f(simple)g(tra)n(v)o(ersal)g(can)
h(compute)f(the)g(stack)544 2713 y(height)33 b(e)o(xactly)g(because)i
(the)f(Ja)n(v)n(a)f(V)-6 b(irtual)34 b(Machine)g(speci\002cation)f
([16])h(guarantees)h(that)544 2829 y(e)n(v)o(ery)24 b(program)h(point)e
(has)i(a)g(\002x)o(ed)g(stack)f(height)g(which)h(can)g(be)g(be)g
(pre-computed.)420 3017 y(2.)49 b(Create)35 b(a)i(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(local)34 b(v)n(ariable)f(for)i(e)n(v)o(ery)g
(B)q Ft(A)t(F)40 b Fy(v)n(ariable,)c(and)e(create)h(a)i(J)t
Ft(I)t(M)t(P)t(L)t(E)j Fy(local)544 3133 y(v)n(ariable)24
b(for)h(e)n(v)o(ery)f(stack)h(position)e(\(numbered)i(0)f(to)h
Fz(maximum)f(stac)n(k)h(height)f(-)h(1)p Fy(.\))420 3321
y(3.)49 b(Create)36 b(the)f(equi)n(v)n(alent)h(J)t Ft(I)t(M)t(P)t(L)t
(E)42 b Fy(instructions)33 b(for)j(e)n(v)o(ery)h(B)q
Ft(A)t(F)j Fy(instruction,)c(mapping)e(the)544 3437 y(implicit)d(ef)n
(fect)j(that)e(the)j(B)q Ft(A)t(F)j Fy(instruction)32
b(has)h(on)g(the)g(stack)f(positions)g(to)g(e)o(xplicit)g(refer)n(-)544
3552 y(ences)25 b(to)f(the)i(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(local)25 b(v)n(ariables)e(which)i(represent)f(those)g(stack)h
(positions)d(\(created)j(in)544 3668 y(step)31 b(2.\))52
b(F)o(or)32 b(e)o(xample,)h(the)f(\002rst)g(occurence)h(of)f
Fq(push)59 b(0;)31 b Fy(becomes)h Fq($stack0)58 b(=)h(0;)544
3783 y Fy(and)35 b(both)e Fq(dup1.r;)h Fy(instructions)e(become)j
Fq($stack1)58 b(=)i($stack0;)p Fy(.)e(Note)35 b(that)f(an)544
3899 y(instruction)29 b(such)h(as)g Fq(dup2.r)g Fy(gets)g(translated)g
(to)g(multiple)h(J)t Ft(I)t(M)t(P)t(L)t(E)37 b Fy(instructions,)30
b(which)544 4015 y(is)24 b(necessary)h(to)g(duplicate)f(tw)o(o)g(stack)
h(positions.)300 4242 y(This)38 b(method)g(of)h(transforming)f
(bytecode)h(is)f(relati)n(v)o(ely)g(standard)g(and)h(is)g(also)f(co)o
(v)o(ered)h(in)f(the)300 4357 y(w)o(orks)22 b(of)h(Proebsting)f
Fz(et)g(al)h Fy([19)o(])g(and)g(Muller)f Fz(et)g(al)h
Fy([18)o(].)31 b(See)23 b(\002gure)g(3.5)f(to)h(see)g(ho)n(w)e(the)i
(complete)300 4473 y(running)h(e)o(xample)g(is)g(transformed.)300
4801 y Fp(3.1.3)121 b(Split)34 b(locals)300 5028 y Fy(T)-8
b(o)33 b(prepare)h(for)f(typing,)h(the)f(local)g(v)n(ariables)f(must)g
(be)i(split)d(so)i(that)g(each)h(local)f(v)n(ariable)f(corre-)300
5144 y(sponds)18 b(to)h(one)h(use-def/def-use)f(web,)i(because)f(the)h
(J)t Ft(I)t(M)t(P)t(L)t(E)26 b Fy(code)19 b(generated)h(by)f(the)g(pre)
n(vious)g(sec-)300 5260 y(tion)i(may)h(be)g(untypable.)28
b(In)22 b(particular)l(,)g(in)g(our)g(running)f(e)o(xample)g
(\(\002gure)h(3.5\))g(we)g(see)g(that)g(on)f(one)2050
5509 y(39)p eop
%%Page: 40 48
40 47 bop 400 1053 a Fo(0)49 b(iconst_0)400 1134 y(1)g(istore_2)400
1216 y(2)g(aload_0)400 1298 y(3)g(getfield)g(#10)449
1380 y(<Field)g(boolean)g(condition>)400 1461 y(6)g(ifeq)g(29)400
1625 y(9)g(iconst_5)350 1706 y(10)g(istore_3)350 1788
y(11)g(new)h(#3)449 1870 y(<Class)f(B>)350 1951 y(14)g(dup)350
2033 y(15)g(invokespecial)f(#7)449 2115 y(<Method)h(B\(\)>)350
2197 y(18)g(astore_1)350 2278 y(19)g(iload_2)350 2360
y(20)g(iload_3)350 2442 y(21)g(iinc)g(3)h(1)350 2523
y(24)f(iadd)350 2605 y(25)g(istore_2)350 2687 y(26)g(goto)g(41)350
2932 y(29)g(ldc)h(#1)449 3013 y(<String)f("four">)350
3095 y(31)g(astore_3)350 3177 y(32)g(new)h(#4)f(<Class)g(C>)350
3259 y(35)g(dup)350 3340 y(36)g(aload_3)350 3422 y(37)g(invokespecial)f
(#9)449 3504 y(<Method)h(C\(java.lang.String\)>)350 3585
y(40)g(astore_1)350 3830 y(41)g(aload_1)350 3912 y(42)g(getfield)g(#11)
449 3994 y(<Field)g(int)g(value>)350 4075 y(45)g(iload_2)350
4157 y(46)g(iadd)350 4239 y(47)g(ireturn)p 1898 4244
4 3251 v 1949 1049 a({int})1949 1130 y({})1949 1212 y({ref})1949
1294 y({int})1949 1457 y({})1949 1621 y({int})1949 1702
y({})1949 1784 y({ref})1949 1947 y({ref,ref})1949 2029
y({ref})1949 2192 y({})1949 2274 y({int})1949 2356 y({int,int})1949
2438 y({int,int})1949 2519 y({int})1949 2601 y({})1949
2683 y({})1949 2928 y({ref})1949 3091 y({})1949 3173
y({ref})1949 3254 y({ref,ref})1949 3336 y({ref,ref,ref})1949
3418 y({ref,ref})1949 3581 y({})1949 3826 y({ref})1949
3908 y({int})1949 4071 y({int,int})1949 4153 y({int})1949
4235 y({})p 2658 4244 V 2759 1047 a(push)g(0;)2759 1129
y(store.i)f(l2;)2759 1211 y(load.r)h(l0;)2759 1293 y(fieldget)2809
1374 y(<Test:)f(boolean)h(cond..>;)2759 1456 y(ifeq)g(label0;)2759
1619 y(push)g(5;)2759 1701 y(store.i)f(l3;)2759 1783
y(new)h(B;)2759 1946 y(dup1.r;)2759 2028 y(specialinvoke)2809
2110 y(<B:)g(void)g(<init>\(\)>;)2759 2191 y(store.r)f(l1;)2759
2273 y(load.i)h(l2;)2759 2355 y(load.i)g(l3;)2759 2436
y(inc.i)g(l3)g(1;)2759 2518 y(add.i;)2759 2600 y(store.i)f(l2;)2759
2681 y(goto)h(label1;)2709 2845 y(label0:)2759 2926 y(push)g("four";)
2759 3090 y(store.r)f(l3;)2759 3172 y(new)h(C;)2759 3253
y(dup1.r;)2759 3335 y(load.r)g(l3;)2759 3417 y(specialinvoke)2809
3498 y(<C:)g(void)g(<init>\(Str..\)>;)2759 3580 y(store.r)f(l1;)2709
3743 y(label1:)2759 3825 y(load.r)h(l1;)2759 3907 y(fieldget)2809
3988 y(<A:)g(int)g(value>;)2759 4070 y(load.i)g(l2;)2759
4152 y(add.i;)2759 4234 y(return.i;)p 1898 4364 4 121
v 2658 4364 V 350 4449 a Fy(\(a\))25 b(Ja)n(v)n(a)g(bytecode)p
1898 4485 V 906 w(\(b\))h(stack)p 2658 4485 V 413 w(\(c\))g(Baf)f(code)
951 4644 y(Figure)g(3.4:)31 b(Running)24 b(e)o(xample:)29
b(Ja)n(v)n(a)c(bytecode)f(to)h(Baf)h(code.)2050 5509
y(40)p eop
%%Page: 41 49
41 48 bop 449 906 a Fo(word)50 b(l0,)f(l1,)549 987 y(l2,)g(l3;)449
1151 y(l0)h(:=)f(@this:)g(Type;)449 1232 y(push)h(0;)449
1314 y(store.i)f(l2;)449 1396 y(load.r)g(l0;)449 1477
y(fieldget)499 1559 y(<Test:)g(boolean)f(condition>;)449
1641 y(ifeq)i(label0;)449 1804 y(push)g(5;)449 1886 y(store.i)f(l3;)449
1968 y(new)h(B;)449 2049 y(dup1.r;)449 2131 y(specialinvoke)499
2213 y(<B:)g(void)f(<init>\(\)>;)449 2294 y(store.r)g(l1;)449
2376 y(load.i)g(l2;)449 2458 y(load.i)g(l3;)449 2540
y(inc.i)g(l3)h(1;)449 2621 y(add.i;)449 2703 y(store.i)f(l2;)449
2785 y(goto)h(label1;)350 2948 y(label0:)449 3030 y(push)g("four";)449
3111 y(store.r)f(l3;)449 3193 y(new)h(C;)449 3275 y(dup1.r;)449
3356 y(load.r)f(l3;)449 3438 y(specialinvoke)499 3520
y(<C:)h(void)f(<init>\(String\)>;)449 3602 y(store.r)g(l1;)350
3765 y(label1:)449 3847 y(load.r)g(l1;)449 3928 y(fieldget)499
4010 y(<A:)h(int)f(value>;)449 4092 y(load.i)g(l2;)449
4173 y(add.i;)449 4255 y(return.i;)p 1898 4266 4 3415
v 2062 1210 a(1)2062 1292 y(0)2062 1374 y(1)2062 1455
y(1)2062 1619 y(0)2062 1782 y(1)2062 1864 y(0)2062 1945
y(1)2062 2027 y(2)2062 2109 y(1)2062 2272 y(0)2062 2354
y(1)2062 2436 y(2)2062 2517 y(2)2062 2599 y(1)2062 2681
y(0)2062 2762 y(0)2062 3007 y(1)2062 3089 y(0)2062 3171
y(1)2062 3253 y(2)2062 3334 y(3)2062 3416 y(2)2062 3579
y(0)2062 3824 y(1)2062 3906 y(1)2062 4069 y(2)2062 4151
y(1)2062 4233 y(0)p 2343 4266 V 2494 906 a(unknown)g(l0,)g($stack0,)g
(l2,)2594 988 y(l3,)g($stack1,)g(l1,)g($stack2;)2494
1151 y(l0)h(:=)f(@this:)g(Type;)2494 1233 y($stack0)g(=)h(0;)2494
1315 y(l2)g(=)g($stack0;)2494 1396 y($stack0)f(=)h(l0;)2494
1478 y($stack0)f(=)h($stack0.condition;)2494 1641 y(if)g($stack0)e(==)i
(0)g(goto)f(label0;)2494 1805 y($stack0)g(=)h(5;)2494
1887 y(l3)g(=)g($stack0;)2494 1968 y($stack0)f(=)h(new)f(B;)2494
2050 y($stack1)g(=)h($stack0;)2494 2132 y(specialinvoke)2594
2213 y($stack1.<init>\(\);)2494 2295 y(l1)g(=)g($stack0;)2494
2377 y($stack0)f(=)h(l2;)2494 2458 y($stack1)f(=)h(l3;)2494
2540 y(l3)g(=)g(l3)f(+)h(1;)2494 2622 y($stack0)f(=)h($stack0)e(+)i
($stack1;)2494 2703 y(l2)g(=)g($stack0;)2494 2785 y(goto)g(label1;)2395
2949 y(label0:)2494 3030 y($stack0)f(=)h("four";)2494
3112 y(l3)g(=)g($stack0;)2494 3194 y($stack0)f(=)h(new)f(C;)2494
3275 y($stack1)g(=)h($stack0;)2494 3357 y($stack2)f(=)h(l3;)2494
3439 y(specialinvoke)2594 3520 y($stack1.<init>\($stack2\);)2494
3602 y(l1)g(=)g($stack0;)2395 3766 y(label1:)2494 3847
y($stack0)f(=)h(l1;)2494 3929 y($stack0)f(=)h($stack0.value;)2494
4092 y($stack1)f(=)h(l2;)2494 4174 y($stack0)f(=)h($stack0)e(+)i
($stack1;)2494 4256 y(return)f($stack0;)p 1898 4386 4
121 v 2343 4386 V 350 4471 a Fy(\(a\))27 b(B)q Ft(A)t(F)j
Fy(code)p 1898 4507 V 1071 w(\(b\))c(stack)p 2343 4507
V 99 w(\(c\))f(v)o(erbose)g(untyped)h(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(code)p 1898 4627 V 1998 4591 a(height)p 2343 4627
V 612 4787 a(Figure)25 b(3.5:)30 b(Running)24 b(e)o(xample:)32
b(B)q Ft(A)t(F)e Fy(code)25 b(to)f(v)o(erbose)h(untyped)h(J)t
Ft(I)t(M)t(P)t(L)t(E)31 b Fy(code)2050 5509 y(41)p eop
%%Page: 42 50
42 49 bop 300 499 a Fy(branch)27 b(of)f(the)h(if,)g Fq(l3)f
Fy(is)g(used)g(as)h(an)f Fq(int)g Fy(\(in)h Fq($stack0)58
b(=)h(5;)h(l3)f(=)h($stack0;)p Fy(\),)25 b(and)h(on)300
615 y(the)19 b(other)f(branch,)i Fq(l3)f Fy(is)f(used)h(as)g(a)g
Fq(String)f Fy(\(in)g Fq($stack0)58 b(=)i("four";)118
b(l3)59 b(=)h($stack0;)p Fy(.\))446 775 y(T)-8 b(o)25
b(split)f(the)h(local)g(v)n(ariables,)g(we)g(simply)f(compute)h(the)g
(webs)g([17)o(])h(by)f(tra)n(v)o(ersing)f(the)h Fz(use-def)300
890 y Fy(and)34 b Fz(def-use)g Fy(chains,)i(and)f(associate)f(one)g
(local)g(v)n(ariable)g(with)f(each)i(produced)f(web)l(.)59
b(A)34 b(web)h(is)300 1006 y(essentially)29 b(a)i(subset)f(of)g(all)h
(the)f(uses)g(and)h(de\002nitions)e(of)i(a)g(particular)f(local)g(v)n
(ariable)g(which)g(are)300 1121 y(self-contained)e(in)h(the)g(sense)g
(that)f(this)g(subset)h(can)g(be)g(renamed)g(without)f(af)n(fecting)h
(the)f(beha)n(vior)300 1237 y(of)d(the)g(code.)30 b(Figure)25
b(3.6)g(illustrates)e(this)h(with)g(an)h(e)o(xample.)770
1515 y Fo(if\(condition\))969 1596 y(x)49 b(=)h(1;)770
1678 y(else)969 1760 y(x)f(=)h(2;)770 1923 y(print\(x\);)770
2005 y(x)f(=)h(1;)770 2087 y(print\(x\);)p 2018 2099
4 640 v 2150 1515 a(if\(condition\))2349 1596 y(x1)g(=)f(1;)2150
1678 y(else)2349 1760 y(x1)h(=)f(2;)2150 1923 y(print\(x1\);)2150
2005 y(x2)g(=)h(1;)2150 2087 y(print\(x2\);)p 2018 2220
4 121 v 1234 2304 a Fy(Before)p 2018 2340 V 565 w(After)25
b(renaming)g(according)f(to)h(webs)1271 2499 y(Figure)g(3.6:)30
b(Jimple)24 b(code)h(illustrating)d(webs.)446 2816 y(Figure)g(3.7)f(gi)
n(v)o(es)f(the)h(running)f(e)o(xample)g(after)i(the)g(splitting)d(of)i
(the)g(locals.)29 b(Note)21 b(ho)n(w)g(the)g(code)300
2932 y(no)n(w)30 b(has)h(23)g(dif)n(ferent)f(local)h(v)n(ariables,)h
(whereas)f(the)g(original)f(code)h(had)g(only)f(7.)49
b(In)31 b(particular)l(,)300 3048 y Fq(l3)e Fy(w)o(as)h(split)f(into)f
(three)i(dif)n(ferent)g(webs,)g(and)g(stack)g(position)e(0)h(w)o(as)h
(split)e(12)i(times.)44 b(This)29 b(is)g(to)300 3163
y(be)i(e)o(xpected)g(because)g(stack)g(position)e(0)i(is)f(the)h(most)e
(used)i(position)e(for)i(performing)g(temporary)300 3279
y(computations.)446 3438 y(W)l(ith)22 b(the)f(local)h(v)n(ariables)f
(split)g(in)g(this)g(w)o(ay)-6 b(,)22 b(the)f(resulting)i(J)t
Ft(I)t(M)t(P)t(L)t(E)29 b Fy(code)22 b(tends)f(to)g(be)h(easier)g(to)
300 3554 y(analyze)i(because)h(it)e(inherits)g(some)h(of)g(the)g
(disambiguation)d(bene\002ts)j(of)g(SSA[4)q(].)31 b(Local)24
b(v)n(ariables)300 3669 y(will)g(ha)n(v)o(e)g(fe)n(wer)i
(de\002nitions,)d(and)i(most)f(will)f(in)i(f)o(act)g(ha)n(v)o(e)g(a)g
(single)f(de\002nition.)446 3829 y(Here)37 b(is)f(an)g(e)o(xample)f(to)
g(illustrate)g(ho)n(w)g(Jimple)g(code)h(is)g(easier)g(to)g(analyze)g
(with)f(the)h(local)300 3945 y(v)n(ariables)24 b(being)g(split:)300
4133 y Fo(x)50 b(=)f(toCopy;)300 4215 y(use\(y\);)300
4296 y(z)h(=)f(x)h(+)g(y;)300 4378 y(print\("hello"\);)300
4460 y(use\(x\);)300 4682 y Fy(with)25 b(the)h(v)n(ariables)e(split,)h
(there)h(is)f(a)h(good)f(chance)i(that)e Fq(toCopy)g
Fy(is)g(only)g(de\002ned)h(once)g(\(this)f(can)300 4797
y(be)20 b(deteremined)g(easily)g(with)g(a)g(linear)h(sweep)f(of)g(the)g
(code.\))30 b(If)21 b(this)e(is)h(the)g(case)h(and)f(since)g
Fq(use\(x\))300 4913 y Fy(has)i(only)e(one)i(reaching)g(de\002nition)e
(of)i Fq(x)p Fy(,)g Fq(x=toCopy)e Fy(can)i(be)g(propagated)e(into)h
Fq(use\(x\))g Fy(without)300 5028 y(an)o(y)26 b(further)g(checks.)34
b(Normally)-6 b(,)25 b(one)h(must)f(perform)h(an)g Fz(available)f
(copies)h(analysis)f Fy(or)h(check)g(the)300 5144 y(interlea)n(ving)k
(statements)g(for)i(rede\002nitions)e(of)h Fq(toCopy)p
Fy(.)49 b(In)33 b(S)t Ft(O)t(O)q(T)53 b Fy(this)30 b(simpli\002cation)f
(speeds)300 5260 y(up)c(our)f(analyses)h(and)f(transformations)g
(considerably)-6 b(.)2050 5509 y(42)p eop
%%Page: 43 51
43 50 bop 300 976 a Fo(public)49 b(int)g(runningExample\(\))300
1057 y({)499 1139 y(unknown)g(l0,)g($stack0,)f(l2,)i(l3,)f($stack1,)f
(l1,)h($stack2,)g($stack0#2,)699 1221 y($stack0#3,)e($stack0#4,)h
($stack0#5,)g($stack0#6,)g($stack1#2,)699 1302 y(l3#2,)g($stack0#7,)g
($stack0#8,)g(l3#3,)h($stack0#9,)f($stack1#3,)699 1384
y($stack0#10,)f($stack0#11,)h($stack1#4,)g($stack0#12;)499
1548 y(l0)i(:=)f(@this:)g(Test;)499 1629 y($stack0)g(=)g(0;)499
1711 y(l2)h(=)f($stack0;)499 1793 y($stack0#2)f(=)i(l0;)499
1874 y($stack0#3)e(=)i($stack0#2.condition;)499 1956
y(if)g($stack0#3)e(==)h(0)h(goto)f(label0;)499 2119 y($stack0#4)f(=)i
(5;)499 2201 y(l3)g(=)f($stack0#4;)499 2283 y($stack0#5)f(=)i(new)f(B;)
499 2364 y($stack1)g(=)g($stack0#5;)499 2446 y(specialinvoke)f
($stack1.<init>\(\);)499 2528 y(l1)i(=)f($stack0#5;)499
2610 y($stack0#6)f(=)i(l2;)499 2691 y($stack1#2)e(=)i(l3;)499
2773 y(l3#2)f(=)h(l3)f(+)h(1;)499 2855 y($stack0#7)e(=)i($stack0#6)e(+)
i($stack1#2;)499 2936 y(l2)g(=)f($stack0#7;)499 3018
y(goto)g(label1;)350 3181 y(label0:)499 3263 y($stack0#8)f(=)i("four";)
499 3345 y(l3#3)f(=)h($stack0#8;)499 3426 y($stack0#9)e(=)i(new)f(C;)
499 3508 y($stack1#3)f(=)i($stack0#9;)499 3590 y($stack2)f(=)g(l3#3;)
499 3672 y(specialinvoke)f($stack1#3.<init>\($stack2\);)499
3753 y(l1)i(=)f($stack0#9;)350 3917 y(label1:)499 3998
y($stack0#10)f(=)i(l1;)499 4080 y($stack0#11)e(=)i($stack0#10.value;)
499 4162 y($stack1#4)e(=)i(l2;)499 4243 y($stack0#12)e(=)i($stack0#11)e
(+)h($stack1#4;)499 4325 y(return)g($stack0#12;)300 4407
y(})300 4605 y Fy(Figure)35 b(3.7:)53 b(J)t Ft(I)t(M)t(P)t(L)t(E)42
b Fy(code)35 b(of)g(running)f(e)o(xample,)j(after)f(splitting)c(the)j
(local)g(v)n(ariables)g(\(section)300 4721 y(3.1.3.\))2050
5509 y(43)p eop
%%Page: 44 52
44 51 bop 300 499 a Fp(3.1.4)121 b(T)-7 b(ype)35 b(locals)300
724 y Fy(The)20 b(ne)o(xt)f(step)g(is)h(to)f(gi)n(v)o(e)g(each)h(local)
g(v)n(ariable)f(a)h(primiti)n(v)o(e,)e(class)i(or)g(interf)o(ace)g
(type.)29 b(T)-8 b(o)19 b(do)h(this,)g(we)300 840 y(in)l(v)n(ok)o(e)j
(the)g(typing)f(algorithm)g(de)n(v)o(eloped)g(by)h(Etienne)f(Gagnon)h
(et)g(al.)31 b([10].)f(The)23 b(general)h(solution)300
956 y(to)d(this)g(problem)g(is)g(non-tri)n(vial)e(as)j(it)f(is)g
(NP-Hard.)31 b(Ho)n(we)n(v)o(er)l(,)20 b(the)i(typing)e(algorithm)g(in)
j(S)t Ft(O)t(O)q(T)k Fy(is)21 b(an)300 1071 y(ef)n(\002cient)k
(multistage)e(typing)g(algorithm)h(based)g(on)h(solving)e(a)i(type)g
(constraint)f(system;)f(each)i(stage)300 1187 y(is)c(attempted)e(in)i
(turn)g(to)f(pro)o(vide)g(a)h(solution,)f(and)h(each)h(is)e(progressi)n
(v)o(ely)f(more)i(comple)o(x.)28 b(The)21 b(\002rst)300
1302 y(stage)30 b(is)g(described)h(belo)n(w)-6 b(,)30
b(v)o(ery)g(brie\003y)-6 b(.)47 b(See)32 b([10])e(for)h(a)g(complete)e
(discussion)g(of)i(the)f(problem)300 1418 y(and)h(its)f(solution.)48
b(The)31 b(\002rst)h(stage)f(consists)e(of)j(b)n(uilding)d(a)i
(constraint)g(system)f(represented)h(by)g(a)300 1533
y(directed)25 b(graph.)32 b(These)25 b(constraints)f(are)i(gathered)f
(from)g(indi)n(vidual)e(statements.)30 b(The)25 b(constraints)300
1649 y(of)g(the)g(\002rst)f(\002)n(v)o(e)h(statements)e(of)i(the)g
(running)f(e)o(xample)g(in)g(\002gure)h(3.7)g(follo)n(w)-6
b(.)818 2078 y Fk(T)14 b Fj(\()p Ff(l0)p Fj(\))83 b Fv( )g
Ff(Test)564 2219 y Fk(T)14 b Fj(\($)p Ff(stack0)q Fj(\))83
b Fv( )g Ff(int)818 2359 y Fk(T)14 b Fj(\()p Ff(l2)p
Fj(\))83 b Fv( )g Fk(T)14 b Fj(\($)p Ff(stack0)q Fj(\))432
2500 y Fk(T)g Fj(\($)p Ff(stack0)p Fj(#)p Ff(2)q Fj(\))83
b Fv( )g Fk(T)14 b Fj(\()p Ff(l0)p Fj(\))432 2640 y Fk(T)g
Fj(\($)p Ff(stack0)p Fj(#)p Ff(3)q Fj(\))83 b Fv( )g
Ff(int)862 2781 y(Test)h Fv( )f Fk(T)14 b Fj(\($)p Ff(stack0)p
Fj(#)p Ff(2)q Fj(\))p 2098 2921 4 1059 v 2160 2130 a
Fq(l0)59 b(:=)h(@this:)e(Test;)2160 2246 y($stack0)g(=)i(0;)2160
2361 y(l2)f(=)h($stack0;)2160 2477 y($stack0#2)e(=)h(l0;)2160
2592 y($stack0#3)f(=)2399 2708 y($stack0#2.condition;)713
3002 y Fy(\(a\))26 b(Collected)e(constraints)p 2098 3037
4 116 v 1033 w(\(b\))h(Original)f(statements)446 3210
y Fk(T)14 b Fj(\(l0)o(\))43 b Fv( )g Fj(T)-8 b(est)35
b Fy(corresponds)d(to)h Fq(l0)60 b(:=)f(@this:)f(Test;)33
b Fy(and)g(indicates)f(that)h Fq(l0)g Fy(must)300 3326
y(be)40 b(able)f(to)h(contain)f(an)h(instance)f(of)g(class)h
Fq(Test)p Fy(,)i(that)d(is,)k(be)d(a)g(superclass)f(of)h
Fq(Test)p Fy(.)74 b(Note)300 3441 y(that)24 b(the)h(statement)f
Fq($stack0#3)58 b(=)h($stack0#2.condition;)21 b Fy(creates)k(tw)o(o)g
(constraints:)300 3557 y(one)30 b(on)g Fq($stack0#2)p
Fy(,)g(indicating)e(that)i Fq($stack0#2)e Fy(must)h(be)i(a)f(subclass)g
(of)g Fq(Test)f Fy(since)h(the)300 3673 y Fq(condition)22
b Fy(\002eld)i(is)f(accessed)i(and)e(the)h(second)f(indicating)g(that)g
Fq($stack0#3)f Fy(must)h(be)h(able)f(to)300 3788 y(contain)h(an)h
Fq(int)p Fy(.)446 3946 y(After)40 b(the)g(constraints)e(are)i
(collected,)j(the)o(y)c(are)i(represented)e(as)h(a)g(graph)g(with)e
(soft)i(nodes)300 4062 y(representing)24 b(the)h(types)f(of)h(v)n
(ariables)f(and)h(hard)g(nodes)f(representing)g(actual)h(types.)30
b(Based)c(on)e(this)300 4177 y(graph,)h(c)o(ycles)f(are)h(collapsed,)f
(and)h(the)g(soft)f(nodes)g(are)i(collapsed)e(into)f(the)i(hard)g
(nodes.)30 b(Based)25 b(on)300 4293 y(this)e(scheme)h(we)g(can)h(see)f
(that)g(from)f(the)h(constraints)f(that)h Fq($stack0#2)e
Fy(and)i Fq(l0)f Fy(must)g(be)h(of)g(type)300 4408 y
Fq(Test)p Fy(,)30 b(and)f Fq($stack0)f($stack0#3)g Fy(and)i
Fq(l2)f Fy(must)f(be)i(of)g(type)f Fq(int)g Fy(\(assigning)f(an)i
Fq(int)f Fy(to)g(a)300 4524 y(local)c(v)n(ariable)f(means)g(that)h(it)f
(must)g(be)h(e)o(xactly)f(of)h(type)f Fq(int)p Fy(\).)446
4682 y(If)35 b(this)f(\002rst)h(stage)g(f)o(ails,)h(then)f(the)h(J)t
Ft(I)t(M)t(P)t(L)t(E)41 b Fy(code)35 b(is)g(transformed)f(by)g
(inserting)g(assignment)300 4797 y(statements)d(and)h(the)g(typing)f
(algorithm)f(is)i(repeated.)53 b(If)33 b(this)e(second)h(phase)g(f)o
(ails)g(then)f(casts)h(are)300 4913 y(inserted)25 b(as)g(necessary)-6
b(,)25 b(and)h(the)f(typing)f(algorithm)g(is)g(repeated,)i(with)f(the)g
(modi\002cation)f(that)h(only)300 5028 y(the)g(set)g(of)h(constraints)e
(corresponding)g(to)h(de\002nitions)f(are)i(collected.)33
b(The)25 b(third)g(phase)g(is)g(guaran-)300 5144 y(teed)g(to)f(succeed)
h(and)g(produce)g(a)g(typing)f(solution)f(for)i(the)f(local)h(v)n
(ariables.)30 b(See)25 b(\002gure)h(3.8)e(for)h(the)300
5260 y(typed)h(J)t Ft(I)t(M)t(P)t(L)t(E)32 b Fy(code)25
b(of)g(the)f(running)g(e)o(xample.)2050 5509 y(44)p eop
%%Page: 45 53
45 52 bop 499 812 a Fo(public)49 b(int)g(runningExample\(\))499
894 y({)699 976 y(Test)g(l0,)g($stack0#2;)699 1057 y(int)g($stack0,)f
(l2,)h(l3,)h($stack0#3,)e($stack0#4,)f($stack0#6,)898
1139 y($stack1#2,)h(l3#2,)h($stack0#7,)f($stack0#11,)f($stack1#4,)898
1221 y($stack0#12;)699 1302 y(B)i($stack1,)f($stack0#5;)699
1384 y(A)h(l1,)g($stack0#10;)699 1466 y(java.lang.String)d($stack2,)j
($stack0#8,)f(l3#3;)699 1548 y(C)h($stack0#9,)f($stack1#3;)699
1711 y(l0)h(:=)g(@this;)699 1793 y($stack0)f(=)i(0;)699
1874 y(l2)f(=)h($stack0;)699 1956 y($stack0#2)e(=)h(l0;)699
2038 y($stack0#3)f(=)h($stack0#2.condition;)699 2119
y(if)g($stack0#3)f(==)i(0)f(goto)g(label0;)699 2283 y($stack0#4)f(=)h
(5;)699 2364 y(l3)g(=)h($stack0#4;)699 2446 y($stack0#5)e(=)h(new)h(B;)
699 2528 y($stack1)e(=)i($stack0#5;)699 2610 y(specialinvoke)d
($stack1.<init>\(\);)699 2691 y(l1)i(=)h($stack0#5;)699
2773 y($stack0#6)e(=)h(l2;)699 2855 y($stack1#2)f(=)h(l3;)699
2936 y(l3#2)g(=)g(l3)h(+)f(1;)699 3018 y($stack0#7)f(=)h($stack0#6)f(+)
i($stack1#2;)699 3100 y(l2)f(=)h($stack0#7;)699 3181
y(goto)f(label1;)549 3345 y(label0:)699 3426 y($stack0#8)f(=)h("four";)
699 3508 y(l3#3)g(=)g($stack0#8;)699 3590 y($stack0#9)f(=)h(new)h(C;)
699 3672 y($stack1#3)e(=)h($stack0#9;)699 3753 y($stack2)f(=)i(l3#3;)
699 3835 y(specialinvoke)d($stack1#3.<init>\($stack2\);)699
3917 y(l1)i(=)h($stack0#9;)549 4080 y(label1:)699 4162
y($stack0#10)d(=)j(l1;)699 4243 y($stack0#11)d(=)j($stack0#10.value;)
699 4325 y($stack1#4)e(=)h(l2;)699 4407 y($stack0#12)e(=)j($stack0#11)e
(+)i($stack1#4;)699 4489 y(return)e($stack0#12;)499 4570
y(})300 4877 y Fy(Figure)27 b(3.8:)36 b(J)t Ft(I)t(M)t(P)t(L)t(E)d
Fy(code)27 b(of)g(the)f(running)g(e)o(xample,)g(after)i(typing)d(the)i
(local)f(v)n(ariables.)36 b(\(section)300 4992 y(3.1.4\).)2050
5509 y(45)p eop
%%Page: 46 54
46 53 bop 300 499 a Fp(3.1.5)121 b(Clean)35 b(up)i(J)6
b Fg(I)g(M)g(P)g(L)g(E)300 732 y Fy(After)29 b(the)f(locals)g(ha)n(v)o
(e)g(been)g(typed)g(the)g(code)h(itself)e(remains)h(v)o(ery)g(v)o
(erbose.)41 b(The)28 b(step)g(discussed)300 847 y(in)22
b(this)g(subsection)g(consists)f(of)i(performing)f(some)g(compaction)g
(to)h(eliminate)e(the)i(redundant)f(cop)o(y)300 963 y(statements)i
(which)g(are)h(present)g(in)g(the)f(code)h(due)g(to)f(the)h(direct)g
(translation)e(from)i(bytecode.)446 1128 y(W)-8 b(e)30
b(see)f(from)f(\002gure)h(3.8)g(that)f(there)h(are)h(se)n(v)o(eral)e
(statements)f(which)i(can)g(be)g(eliminated.)41 b(F)o(or)300
1244 y(e)o(xample,)36 b(the)f(pair)g Fq($stack0)58 b(=)h(0;)h(l2)f(=)h
($stack0;)33 b Fy(can)i(be)g(optimized)e(to)i Fq(l2)59
b(=)g(0;)300 1360 y Fy(Note)25 b(that,)h(in)f(general,)h(cop)o(y)f
(propagation)f(and)i(constant)e(propagation)g(are)j(not)e(suf)n
(\002cient)g(to)g(fully)300 1475 y(eliminate)f(the)g(redundant)h(cop)o
(y)f(statements.)30 b(F)o(or)24 b(e)o(xample,)g(in)h(the)f(code:)300
1715 y Fo($x)49 b(=)h(f.a;)300 1796 y(y)g(=)f($x;)300
2070 y Fy(we)31 b(do)f(not)g(ha)n(v)o(e)h(a)f(cop)o(y)h(to)f(propagate)
g(forw)o(ard,)j(b)n(ut)d(instead)g(a)g(cop)o(y)h(to)f(propagate)g
(backw)o(ards.)300 2185 y(A)k(combination)d(of)j(cop)o(y)f(propagation)
g(and)g(back)h(cop)o(y)f(propagation)f(has)i(been)g(suggested)e(as)i(a)
300 2301 y(solution)18 b(to)h(this)g(e)o(xact)g(problem[21)o(].)29
b(W)-8 b(e)20 b(use,)h(instead,)f(the)f(aggre)o(gation)f(algorithm)g
(de)n(v)o(eloped)g(on)302 2416 y(G)t Ft(R)t(I)t(M)t(P)34
b Fy(on)29 b(J)t Ft(I)t(M)t(P)t(L)t(E)35 b Fy(code)27
b(\(see)h(subsection)f(3.2.1\).)38 b(This)27 b(simulates)f(the)h(back)h
(cop)o(y)g(propagation)300 2532 y(phase)36 b(as)g(well)g(as)g(a)g
(limited)f(form)g(of)h(cop)o(y)g(propagation)f(by)g(collapsing)g
(single)g(def-use)h(pairs.)300 2647 y(Ho)n(we)n(v)o(er)l(,)22
b(we)h(still)f(need)h(to)g(perform)g(a)g(phase)g(of)g(cop)o(y)g
(propagation)e(afterw)o(ards)j(to)e(catch)i(patterns)300
2763 y(of)h(the)g(form:)300 3002 y Fo($x)49 b(=)h(i0;)300
3084 y(use\($x\);)300 3166 y(use\($x\);)300 3439 y Fy(which)22
b(are)h(single)e(def-multiple)g(use)i Fz(n)p Fy(-tuples.)29
b(These)22 b(patterns)g(usually)f(originate)h(from)g(the)g(use)g(of)300
3555 y Fq(dup)p Fy(s)k(which)h(are)h(used)e(to)h(implement)e
(statements)h(with)g(multiple)g(side)g(ef)n(fects)h(such)g(as)g
Fq(x.f)59 b(+=)300 3670 y(a[i++])446 3836 y Fy(Compare)34
b(\002gures)f(3.9)g(and)g(3.8.)55 b(The)33 b(compacted)f(v)o(ersion)g
(has)h(18)g(statements)f(whereas)h(the)300 3951 y(original)e(v)o
(ersion)f(has)h(30.)51 b(Most)31 b(of)g(the)h(eliminated)e(references)j
(were)f(references)h(to)e(stack)g(v)n(ari-)300 4067 y(ables.)300
4449 y Fr(3.2)143 b(Anal)n(yzab)o(le)41 b(J)8 b Fn(I)g(M)g(P)g(L)g(E)37
b Fh(\000)-25 b(!)41 b Fr(Bytecode)c(\(via)43 b(G)8 b
Fn(R)g(I)g(M)g(P)t Fr(\))300 4717 y Fy(This)24 b(section)g(describes)g
(the)g(\002rst)h(method)f(of)g(transforming)h(J)t Ft(I)t(M)t(P)t(L)t(E)
32 b Fy(code)24 b(back)h(to)f(bytecode:)30 b(via)302
4833 y(G)t Ft(R)t(I)t(M)t(P)r Fy(\(see)g(\002gure)25
b(3.10)f(for)h(an)g(illustration)e(of)i(these)g(tw)o(o)f(paths.\))446
4998 y(A)38 b(compiler)e(such)h(as)h Fq(javac)e Fy(is)h(able)g(to)g
(produce)g(ef)n(\002cient)h(bytecode)f(because)g(it)g(has)g(the)300
5114 y(structured)32 b(tree)h(representation)f(for)h(the)f(original)g
(program,)i(and)f(the)f(stack)g(based)h(nature)g(of)f(the)300
5229 y(bytecode)38 b(is)g(particularly)f(well)h(suited)g(for)g(code)h
(generation)e(from)h(trees[2].)72 b(Essentially)-6 b(,)39
b(this)2050 5509 y(46)p eop
%%Page: 47 55
47 54 bop 499 1399 a Fo(public)49 b(int)g(runningExample\(\))499
1481 y({)699 1563 y(Test)g(l0;)699 1644 y(int)g(l2,)g(l3,)g($stack0#3,)
f(l3#2,)898 1726 y($stack0#11,)g($stack0#12;)699 1808
y(A)h(l1;)699 1889 y(B)g($stack0#5;)699 1971 y(java.lang.String)d
(l3#3;)699 2053 y(C)j($stack0#9;)699 2216 y(l0)g(:=)g(@this;)699
2298 y(l2)g(=)h(0;)699 2379 y($stack0#3)e(=)h(l0.condition;)699
2461 y(if)g($stack0#3)f(==)i(0)f(goto)g(label0;)699 2625
y(l3)g(=)h(5;)699 2706 y($stack0#5)e(=)h(new)h(B;)699
2788 y(specialinvoke)d($stack0#5.<init>\(\);)699 2870
y(l1)i(=)h($stack0#5;)699 2951 y(l3#2)f(=)g(l3)h(+)f(1;)699
3033 y(l2)g(=)h(l2)f(+)h(l3;)699 3115 y(goto)f(label1;)549
3278 y(label0:)699 3360 y(l3#3)g(=)g("four";)699 3441
y($stack0#9)f(=)h(new)h(C;)699 3523 y(specialinvoke)d
($stack0#9.<init>\(l3#3\);)699 3605 y(l1)i(=)h($stack0#9;)549
3768 y(label1:)699 3850 y($stack0#11)d(=)j(l1.value;)699
3932 y($stack0#12)d(=)j($stack0#11)e(+)i(l2;)699 4013
y(return)e($stack0#12;)499 4095 y(})606 4402 y Fy(Figure)25
b(3.9:)32 b(J)t Ft(I)t(M)t(P)t(L)t(E)g Fy(code)25 b(of)f(running)g(e)o
(xample,)g(after)i(cleanup.)k(\(section)25 b(3.1.5\))2050
5509 y(47)p eop
%%Page: 48 56
48 55 bop 300 499 a Fy(method)24 b(attempts)g(to)g(reco)o(v)o(er)h(the)
g(original)f(structured)g(tree)h(representation,)g(by)f(b)n(uilding)i
(G)t Ft(R)t(I)t(M)t(P)r Fy(,)300 615 y(an)32 b(aggre)o(gated)g(form)g
(of)j(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)j(and)33 b(then)f(producing)f
(stack)h(code)h(by)f(standard)g(tree)g(tra)n(v)o(ersal)300
730 y(techniques.)446 891 y(There)f(are)g(tw)o(o)f(steps)g(necessary)h
(for)f(this)g(transformation)f(and)h(the)o(y)g(are)h(co)o(v)o(ered)f
(in)g(the)g(fol-)300 1006 y(lo)n(wing)e(tw)o(o)g(subsections.)43
b(This)28 b(method)g(w)o(as)h(mainly)f(de)n(v)o(eloped)g(and)h(added)h
(to)e(the)h(frame)n(w)o(ork)300 1122 y(by)36 b(P)o(atrick)g(Lam)g(and)g
(is)g(described)h(further)f(in)g(our)g(o)o(v)o(ervie)n(w)f(paper[28].)
65 b(A)37 b(summary)e(of)h(the)300 1237 y(method)24 b(is)g(included)g
(here)i(for)f(completeness.)708 3654 y @beginspecial
0 @llx 0 @lly 334 @urx 263 @ury 3340 @rwi @setspecial
%%BeginDocument: jimpleToBytecode.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: jimpleToBytecode.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Sat Apr  8 18:05:46 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 334 263
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-95.0 276.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 5377 m -1000 -1000 l 7807 -1000 l 7807 5377 l cp clip
 0.06299 0.06299 sc
% Polyline
7.500 slw
n 3330 225 m 4410 225 l 4410 855 l 3330 855 l cp gs col0 s gr 
% Polyline
gs  clippath
2933 2039 m 2835 2115 l 2886 2002 l 2802 2108 l 2849 2145 l cp
clip
n 3825 855 m 2835 2115 l gs col0 s gr gr

% arrowhead
n 2933 2039 m 2835 2115 l 2886 2002 l  col0 s
% Polyline
gs  clippath
4516 1386 m 4590 1485 l 4478 1432 l 4583 1518 l 4621 1471 l cp
clip
n 3825 855 m 4590 1485 l gs col0 s gr gr

% arrowhead
n 4516 1386 m 4590 1485 l 4478 1432 l  col0 s
% Polyline
n 4185 1530 m 5265 1530 l 5265 1800 l 4185 1800 l cp gs col0 s gr 
% Polyline
n 4185 1575 m 4185 1575 l 4185 1530 l 4185 1530 l cp gs col0 s gr 
% Polyline
n 4455 2205 m 4905 2205 l 4905 2520 l 4455 2520 l cp gs col0 s gr 
% Polyline
n 4230 2880 m 5265 2880 l 5265 3195 l 4230 3195 l cp gs col0 s gr 
% Polyline
gs  clippath
4665 2085 m 4635 2205 l 4605 2085 l 4605 2220 l 4665 2220 l cp
clip
n 4635 1800 m 4635 2205 l gs col0 s gr gr

% arrowhead
n 4665 2085 m 4635 2205 l 4605 2085 l  col0 s
% Polyline
gs  clippath
4665 2760 m 4635 2880 l 4605 2760 l 4605 2895 l 4665 2895 l cp
clip
n 4635 2565 m 4635 2880 l gs col0 s gr gr

% arrowhead
n 4665 2760 m 4635 2880 l 4605 2760 l  col0 s
% Polyline
gs  clippath
3976 3986 m 3870 4050 l 3934 3944 l 3838 4039 l 3881 4082 l cp
clip
n 4680 3240 m 3870 4050 l gs col0 s gr gr

% arrowhead
n 3976 3986 m 3870 4050 l 3934 3944 l  col0 s
% Polyline
n 3420 4050 m 4275 4050 l 4275 4365 l 3420 4365 l cp gs col0 s gr 
% Polyline
n 2430 2115 m 3060 2115 l 3060 2475 l 2430 2475 l cp gs col0 s gr 
% Polyline
gs  clippath
3778 3936 m 3825 4050 l 3730 3971 l 3810 4080 l 3858 4044 l cp
clip
n 2700 2520 m 3825 4050 l gs col0 s gr gr

% arrowhead
n 3778 3936 m 3825 4050 l 3730 3971 l  col0 s
% Polyline
 [15 45] 45 sd
n 4050 1035 m 6795 1035 l 6795 3825 l 4050 3825 l cp gs col0 s gr  [] 0 sd
% Polyline
 [15 45] 45 sd
n 1530 1215 m 3555 1215 l 3555 3375 l 1530 3375 l cp gs col0 s gr  [] 0 sd
/Times-Roman ff 180.00 scf sf
3465 495 m
gs 1 -1 sc (analyzable ) col0 sh gr
/Times-Roman ff 180.00 scf sf
3600 720 m
gs 1 -1 sc (Jimple) col0 sh gr
/Times-Roman ff 180.00 scf sf
4275 1710 m
gs 1 -1 sc (verbose Baf) col0 sh gr
/Times-Roman ff 180.00 scf sf
4365 3105 m
gs 1 -1 sc (packed Baf) col0 sh gr
/Times-Roman ff 180.00 scf sf
2520 2340 m
gs 1 -1 sc (Grimp) col0 sh gr
/Times-Roman ff 180.00 scf sf
3510 4275 m
gs 1 -1 sc (bytecode) col0 sh gr
/Times-Roman ff 180.00 scf sf
4815 2070 m
gs 1 -1 sc (3.3.2 eliminate redundant) col0 sh gr
/Times-Roman ff 180.00 scf sf
4545 2430 m
gs 1 -1 sc (Baf) col0 sh gr
/Times-Roman ff 180.00 scf sf
5220 2250 m
gs 1 -1 sc (store and loads) col0 sh gr
/Times-Roman ff 180.00 scf sf
4905 2745 m
gs 1 -1 sc (3.3.3 pack locals) col0 sh gr
/Times-Roman ff 180.00 scf sf
1935 1485 m
gs 1 -1 sc (3.2.1 aggregation) col0 sh gr
/Times-Roman ff 180.00 scf sf
1620 3015 m
gs 1 -1 sc (3.2.2 traversal) col0 sh gr
/Times-Roman ff 180.00 scf sf
1800 3240 m
gs 1 -1 sc (and local packing) col0 sh gr
/Times-Roman ff 180.00 scf sf
4455 1260 m
gs 1 -1 sc (3.3.1 direct translation) col0 sh gr
/Times-Roman ff 180.00 scf sf
4500 3555 m
gs 1 -1 sc (3.3.4 direct translation) col0 sh gr
/Times-Roman ff 180.00 scf sf
4905 3735 m
gs 1 -1 sc (with max height) col0 sh gr
/Helvetica ff 180.00 scf sf
1575 1125 m
gs 1 -1 sc (Option I) col0 sh gr
/Helvetica ff 180.00 scf sf
5850 945 m
gs 1 -1 sc (Option II) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 765 3965 a(Figure)g(3.10:)30 b(T)-8 b(w)o(o)24
b(paths)h(for)g(the)h(J)t Ft(I)t(M)t(P)t(L)t(E)32 b Fy(to)24
b(bytecode)h(transformation.)300 4344 y Fp(3.2.1)121
b(Ag)o(gregate)35 b(e)n(xpressions)300 4571 y Fy(Producing)28
b(G)t Ft(R)t(I)t(M)t(P)33 b Fy(code)26 b(from)i(J)t Ft(I)t(M)t(P)t(L)t
(E)33 b Fy(is)26 b(relati)n(v)o(ely)f(straightforw)o(ard)g(gi)n(v)o(en)
g(that)j(G)t Ft(R)t(I)t(M)t(P)33 b Fy(is)26 b(es-)300
4687 y(sentially)j(J)t Ft(I)t(M)t(P)t(L)t(E)35 b Fy(with)27
b(arbitrarily)h(deeply)g(nested)g(e)o(xpressions)e(and)i(with)g(a)g(ne)
n(win)l(v)n(ok)o(e)f(e)o(xpres-)300 4802 y(sion)19 b(construct.)28
b(T)-8 b(o)20 b(b)n(uild)g(G)t Ft(R)t(I)t(M)t(P)26 b
Fy(there)20 b(are)h(tw)o(o)e(algorithms)f(which)h(must)f(be)i(applied:)
27 b(e)o(xpression)300 4918 y(aggre)o(gation,)c(and)i(constructor)f
(folding.)420 5144 y(1.)49 b Fz(Expr)l(ession)22 b(a)o(g)o(gr)l(e)l
(gation)p Fy(:)27 b(for)c(e)n(v)o(ery)f(single)g(def/use)g(pair)l(,)h
(attempt)e(to)h(mo)o(v)o(e)f(the)i(right)e(hand)544 5260
y(side)30 b(of)g(the)g(de\002nition)g(into)f(the)h(use.)47
b(Currently)-6 b(,)31 b(we)g(only)e(consider)h(def-use)g(pairs)h(which)
2050 5509 y(48)p eop
%%Page: 49 57
49 56 bop 544 499 a Fy(reside)27 b(in)f(the)h(same)f(e)o(xtended)g
(basic)h(block,)g(b)n(ut)f(our)h(results)f(indicates)g(that)g(this)g
(co)o(v)o(ers)g(al-)544 615 y(most)c(all)g(pairs.)30
b(Some)23 b(care)h(must)d(be)i(tak)o(en)g(to)g(guard)f(against)g
(violating)f(data)i(dependencies)544 730 y(or)i(producing)f(side)g(ef)n
(fects)h(when)g(mo)o(ving)e(the)h(right)g(hand)h(side)f(of)h(the)g
(de\002nition.)420 929 y(2.)49 b Fz(Constructor)29 b(folding)p
Fy(:)40 b(pairs)30 b(consisting)f(of)h Fq(new)g Fy(and)g
Fq(specialinvoke)e Fy(are)j(collapsed)544 1045 y(into)24
b(one)j(G)t Ft(R)t(I)t(M)t(P)k Fy(e)o(xpression)23 b(called)i
Fq(newinvoke)p Fy(.)446 1318 y(The)34 b(e)o(xpression)f(aggre)o(gation)
g(algorithm)f(is)i(trick)o(y)f(to)g(implement)g(and)h(is)f(described)h
(in)g(full)300 1433 y(detail)24 b(belo)n(w)g(in)h(the)f(subsection)g
(entitled)g(\224In)h(Detail\224.)446 1599 y(Note)f(that)g(folding)f
(the)i(constructors)e(usually)g(e)o(xposes)h(additional)e(aggre)o
(gation)h(opportunities)300 1714 y(\(namely)e(the)h(aggre)o(gation)e
(of)i(the)g Fq(newinvoke)p Fy(s\),)e(and)i(these)g(are)g(aggre)o(gated)
f(in)h(a)g(second)g(aggre-)300 1830 y(gation)i(step.)30
b(See)c(\002gure)g(3.11)e(for)h(the)g(results)f(of)h(performing)g
(these)g(three)g(transformations.)k(Note)300 1946 y(that)24
b(the)h(de\002nition)f Fq($stack0#3=l0)e Fy(has)j(been)g(aggre)o(gated)
f(into)g(the)g(statement)300 2219 y Fq(if)59 b(l0.condition)e(==)j(0)f
(goto)g(label0;)300 2492 y Fy(and)25 b(that)f(the)h(three)g(statements)
300 2765 y Fq($stack0#11)58 b(=)h(l1.value;)300 2881
y($stack0#12)f(=)h($stack0#11)f(+)h(l2;)300 2997 y(return)f
($stack0#12;)300 3270 y Fy(ha)n(v)o(e)25 b(been)g(collapsed)f(do)n(wn)f
(to)300 3543 y Fq(return)58 b(l1.value)g(+)i(l2;)446
3816 y Fy(Furthermore,)36 b(tw)o(o)e(constructor)f(foldings)f(ha)n(v)o
(e)h(tak)o(en)h(place,)i(one)e(for)g Fq(new)59 b(B)33
b Fy(and)h(one)g(for)300 3932 y Fq(new)59 b(C)p Fy(.)73
b(Note)g(that)g(the)g(de\002nition)f Fq(l3#3="four")f
Fy(has)i(not)g(been)h(aggre)o(gated)e(into)300 4048 y
Fq(new)59 b(C\(l3#3\))30 b Fy(because)h(this)f(assignment)f(is)h
(present)h(in)g(the)f(original)g(Ja)n(v)n(a)h(code,)h(and)f(we)g(are)
300 4163 y(only)24 b(aggre)o(gating)f(stack)i(v)n(ariables.)446
4329 y(The)f(G)t Ft(R)t(I)t(M)t(P)29 b Fy(code)22 b(generated)g(by)f
(these)h(three)g(steps)f(is)h(e)o(xtremely)f(similar)f(to)i(the)g
(original)e(Ja)n(v)n(a)300 4444 y(source)25 b(code;)h(almost)e(all)g
(introduced)h(stack)g(v)n(ariables)f(are)i(usually)e(eliminated.)31
b(Statements)24 b(from)300 4560 y(Ja)n(v)n(a)37 b(which)f(ha)n(v)o(e)h
(multiple)e(local)i(v)n(ariable)g(side-ef)n(fects,)i(ho)n(we)n(v)o(er)l
(,)g(cannot)e(be)g(represented)g(as)300 4675 y(compactly)-6
b(,)28 b(and)h(this)e(complicates)h(bytecode)g(code)h(generation.)41
b(An)29 b(e)o(xample)e(is)h(gi)n(v)o(en)f(in)i(\002gure)300
4791 y(3.12)24 b(and)h(this)f(is)g(further)h(discussed)f(in)g(section)h
(3.2.2.)2050 5509 y(49)p eop
%%Page: 50 58
50 57 bop 420 1154 a Fo(public)49 b(int)g(runningExample\(\))420
1236 y({)619 1317 y(Test)g(l0;)619 1399 y(int)h(l2,)f(l3,)g($stack0#3,)
f(l3#2,)819 1481 y($stack0#11,)f($stack0#12;)619 1562
y(A)j(l1;)619 1644 y(B)g($stack0#5;)619 1726 y(java.lang.String)d
(l3#3;)619 1807 y(C)j($stack0#9;)619 1971 y(l0)g(:=)f(@this;)619
2053 y(l2)h(=)f(0;)619 2134 y($stack0#3)f(=)i(l0.condition;)619
2216 y(if)g($stack0#3)e(==)h(0)h(goto)f(label0;)619 2379
y(l3)h(=)f(5;)619 2461 y($stack0#5)f(=)i(new)f(B;)619
2543 y(specialinvoke)819 2624 y($stack0#5.<init>\(\);)619
2706 y(l1)h(=)f($stack0#5;)619 2788 y(l3#2)g(=)h(l3)f(+)h(1;)619
2869 y(l2)g(=)f(l2)h(+)f(l3;)619 2951 y(goto)g(label1;)470
3115 y(label0:)619 3196 y(l3#3)g(=)h("four";)619 3278
y($stack0#9)e(=)i(new)f(C;)619 3360 y(specialinvoke)819
3441 y($stack0#9.<init>\(l3#3\);)619 3523 y(l1)h(=)f($stack0#9;)470
3686 y(label1:)619 3768 y($stack0#11)f(=)i(l1.value;)619
3850 y($stack0#12)e(=)i($stack0#11)e(+)h(l2;)619 3931
y(return)g($stack0#12;)420 4013 y(})p 2338 4022 4 2924
v 2460 1603 a(public)g(int)g(runningExample\(\))2460
1685 y({)2659 1767 y(Test)g(l0;)2659 1848 y(int)g(l2,)h(l3,)f(l3#2;)
2659 1930 y(A)h(l1;)2659 2012 y(java.lang.String)d(l3#3;)2659
2175 y(l0)j(:=)f(@this;)2659 2257 y(l2)h(=)f(0;)2659
2338 y(if)h(l0.condition)d(==)j(0)2858 2420 y(goto)g(label0;)2659
2584 y(l3)g(=)f(5;)2659 2665 y(l1)h(=)f(new)h(B\(\);)2659
2747 y(l3#2)f(=)h(l3)f(+)h(1;)2659 2829 y(l2)g(=)f(l2)h(+)f(l3;)2659
2910 y(goto)g(label1;)2510 3074 y(label0:)2659 3155 y(l3#3)g(=)h
("four";)2659 3237 y(l1)g(=)f(new)h(C\(l3#3\);)2510 3400
y(label1:)2659 3482 y(return)f(l1.value)f(+)i(l2;)2460
3564 y(})p 2338 4143 4 121 v 1062 4227 a Fy(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(code)p 2338 4263 V 1380 w(G)t Ft(R)t(I)t(M)t(P)g
Fy(code)300 4422 y(Figure)g(3.11:)43 b(G)t Ft(R)t(I)t(M)t(P)37
b Fy(code)30 b(of)h(running)e(e)o(xample,)i(after)g(aggre)o(gation)e
(and)i(constructor)e(folding.)300 4543 y(\(see)c(subsection)f(3.2.1\))
2050 5509 y(50)p eop
%%Page: 51 59
51 58 bop 874 719 a Fo(a[j++])48 b(=)i(5;)p 2067 888
4 381 v 2188 560 a(aload_2)2188 642 y(iload_1)2188 723
y(iinc)g(1)f(1)2188 805 y(iconst_5)2188 887 y(iastore)p
2067 1008 4 121 v 874 1093 a Fy(\(a\))25 b(Ja)n(v)n(a)f(code)p
2067 1129 V 794 w(\(b\))i(bytecode)e(of)h(Ja)n(v)n(a)f(code)p
754 1132 2693 4 v 2067 1252 4 121 v 874 1466 a Fo($stack)48
b(=)i(j;)874 1548 y(j)f(=)h(j)f(+)h(1;)874 1630 y(r1[$stack])d(=)j(5;)p
2067 1799 4 547 v 2188 1307 a(iload_1)2188 1389 y(istore_2)2188
1471 y(iinc)g(1)f(1)2188 1553 y(aload)g(0)2188 1634 y(iload)g(2)2188
1716 y(iconst_5)2188 1798 y(iastore)p 2067 1919 4 121
v 874 2003 a Fy(\(c\))25 b(equi)n(v)n(alent)g(G)t Ft(R)t(I)t(M)t(P)31
b Fy(code)p 2067 2039 V 240 w(\(d\))26 b(bytecode)e(of)j(G)t
Ft(R)t(I)t(M)t(P)k Fy(code)400 2307 y(Figure)25 b(3.12:)30
b(Example)24 b(of)h(Ja)n(v)n(a)f(code)h(which)g(does)f(not)g(translate)
h(to)f(compact)j(G)t Ft(R)t(I)t(M)t(P)k Fy(code.)300
2578 y Fi(In)c(Detail)300 2807 y Fy(The)h(ideas)g(behind)g(e)o
(xpression)f(aggre)o(gation)g(are)i(relati)n(v)o(ely)d(simple,)i(b)n
(ut)g(in)g(practice)g(we)h(found)f(it)300 2923 y(dif)n(\002cult)k(to)g
(implement)f(it)h(correctly)-6 b(.)54 b(Thus,)34 b(we)f(gi)n(v)o(e)f
(the)g(complete)g(algorithm)f(in)i(\002gures)g(3.13)300
3038 y(and)25 b(3.14)f(and)h(e)o(xplain)e(it)i(here)g(in)g(detail.)446
3200 y Fz(Overvie)o(w:)31 b Fy(The)23 b(algorithm)f(consists)f(of)i
(considering)g(single)f(use-def)h(pairs)g(and)g(attempting)e(to)300
3315 y(insert)e(the)h(def)g(into)e(the)i(use,)h(assuring)d(that)i(no)f
(data)h(dependencies)f(are)i(violated)d(by)i(this)f(mo)o(v)o(e.)27
b(The)300 3431 y(algorithm)22 b(is)h(a)h(\002x)o(ed)f(point)f
(iteration;)h(it)g(iterates)g(until)g(no)g(more)g(aggre)o(gations)f
(can)i(be)f(performed.)300 3547 y(The)33 b(follo)n(wing)d(points)i
(comment)f(on)h(speci\002c)i(portions)d(of)i(the)f(algorithm)f
(presented)i(in)f(\002gures)300 3662 y(3.13)c(and)h(3.14.)42
b(Refer)30 b(to)f(the)g(\002gures)g(to)f(see)h(the)g(correspondence:)39
b(each)29 b(numbered)g(step)f(belo)n(w)300 3778 y(corresponds)c(to)h(a)
g(labelled)f(step)h(in)f(the)h(\002gure.)420 4016 y(1.)49
b(Considering)24 b(the)i(statements)e(in)h(re)n(v)o(erse)g(pseudo)f
(topological)g(order)i(is)f(desired)g(in)g(order)g(to)544
4132 y(minimize)e(the)i(number)f(of)h(iterations.)30
b(F)o(or)24 b(e)o(xample,)g(in)h(the)f(follo)n(wing)f(code:)544
4328 y Fo(a)50 b(=)f(f\(\);)544 4410 y(b)h(=)f(f\(\);)544
4492 y(use\(a,)g(b\);)544 4722 y Fy(the)33 b(\002rst)h(statement)e(can)
i(not)f(be)h(aggre)o(gated)e(past)h(the)h(second)f(because)h(of)f
(potential)g(side)544 4838 y(ef)n(fect)25 b(violations.)k(Thus)24
b(the)h(second)f(should)g(be)h(aggre)o(gated)f(\002rst.)420
5028 y(2.)49 b(Only)23 b(single)g(use-def)h(pairs)g(are)g(considered)g
(for)g(aggre)o(gation.)29 b(These)24 b(are)g(pairs)g(of)g(the)f(form)
544 5144 y Fq(x)59 b(=)h(...;)f(...x...;)28 b Fy(where)j(there)f(is)g
(only)f(one)h(de\002nition)f(of)h Fq(x)p Fy(,)h(and)f(only)f(one)h(use)
544 5260 y(of)25 b Fq(x)p Fy(.)2050 5509 y(51)p eop
%%Page: 52 60
52 59 bop 420 499 a Fy(3.)49 b(The)25 b(use-def)g(pair)g(must)e(be)i
(in)g(the)f(same)h(e)o(xception)f(conte)o(xt.)29 b(F)o(or)c(e)o
(xample,)f(in)g(the)h(code:)544 688 y Fo(try)544 770
y({)743 852 y(x)50 b(=)f(throwSomeException\(\);)544
933 y(})h(catch\(Exception)d(e\))544 1015 y({)743 1097
y(System.out.println\("caught!"\);)743 1179 y(return;)544
1260 y(})544 1424 y(System.out.println\(x\);)544 1647
y Fy(The)23 b(x)f(must)g(not)g(be)h(aggre)o(gated)f(out)g(of)h(the)g
Fq(try)f Fy(block)g(because)h(if)g(an)g(e)o(xception)f(is)g(thro)n(wn)
544 1762 y(then)i(it)h(w)o(ould)f(no)g(longer)h(be)g(caught.)420
1951 y(4.)49 b(This)27 b(section)g(of)h(code)g(simply)e(notes)h(what)g
(kind)g(of)h(structures)f(are)i(on)e(the)h(right)f(hand)h(side)544
2067 y(of)d Fq(s)p Fy(.)420 2256 y(5.)49 b(The)27 b(ne)o(xt)f(step)h
(is)g(to)g(consider)g(the)g(path)g(between)g Fq(s)g Fy(and)g
Fq(use)g Fy(and)g(determine)g(if)g(it)g(is)f(le)o(gal)544
2372 y(to)31 b(mo)o(v)o(e)g Fq(s)g Fy(past)h(all)f(those)h(statements)e
(into)h Fq(use)p Fy(.)52 b(Note)31 b(that)h(we)g(consider)f(only)g
(pairs)h(of)544 2487 y(statements)k(which)h(are)h(in)g(the)f(same)g(e)o
(xtended)g(basic)g(block.)69 b(This)37 b(guarantees)g(that)g(the)544
2603 y(connecting)24 b(path)g(is)h(unique.)420 2792 y(6.)49
b(A)28 b(rede\002nition)g(of)h(a)f(local)h(in)f Fq(s)g
Fy(occurs)g(in)g(the)h(path,)f(pre)n(v)o(enting)f(aggre)o(gation.)40
b(Here)29 b(is)f(an)544 2908 y(e)o(xample:)544 3097 y
Fo(x)50 b(=)f(a)h(+)f(b;)544 3179 y(a)h(=)f(1;)544 3260
y(use\(x\);)420 3483 y Fy(7.)g(This)34 b(block)h(of)g(code)h(pre)n(v)o
(ents)e(the)h(mo)o(ving)e(of)j(method)e(calls)h(past)g(\002eld)g
(writes,)j(or)d(\002eld)544 3599 y(reads)28 b(past)g(\002eld)g(writes)f
(\(of)h(the)g(same)g(name\),)h(or)f(method)e(calls)i(or)g(array)h
(reads)f(past)f(array)544 3714 y(writes.)544 3867 y(It)19
b(also)f(pre)n(v)o(ents)g(propagating)f(method)h(calls)g(past)h
(EnterMonitorStmt)d(or)j(ExitMonitorStmt.)420 4056 y(8.)49
b(This)33 b(block)f(of)i(code)g(pre)n(v)o(ents)e(the)h(re-ordering)h
(of)f(method)g(calls)g(with)g(array)h(references,)544
4172 y(\002eld)24 b(references)g(or)g(other)f(method)g(calls.)30
b(Note)23 b(that)g(\(8a\))h(handles)f(the)h(follo)n(wing)d(situation:)
544 4361 y Fo(x)50 b(=)f(f\(\);)544 4442 y(z)h(=)f(1;)544
4524 y(use\(x,)g(m\(\),)g(z\);)544 4747 y Fy(upon)31
b(inspection)f(of)i(the)f(statement)f Fq(use)h Fy(which)h(in)f(this)f
(case)i(is)g Fq(use\(x,m\(\),)57 b(z\))31 b Fy(the)544
4863 y(v)o(eri\002cation)22 b(of)h(mo)o(ving)f Fq(f\(\))g
Fy(past)h(other)g(method)f(calls)g(stops)g(at)i(the)e(\002rst)i(use)f
(of)g Fq(x)g Fy(because)544 4978 y(the)i(ar)n(guments)f(are)h(e)n(v)n
(aluated)f(from)g(left)h(to)g(right.)420 5167 y(9.)49
b(At)24 b(this)g(point)g(it)g(is)h(safe)g(to)f(aggre)o(gate)h
Fq(s)f Fy(and)h Fq(use)f Fy(together)-5 b(.)2050 5509
y(52)p eop
%%Page: 53 61
53 60 bop 300 1230 a Fo(hasChanged)48 b(=)i(true;)300
1393 y(while)f(hasChanged)f(do)499 1475 y(hasChanged)g(=)i(false;)300
1638 y(\(1\))f(for)h(each)f(statement)f(s)h(in)h
(reverse-pseudo-topological)45 b(or-)300 1720 y(der)k(for)h(graph)e(G)i
(do)699 1801 y(canAggregate)d(=)j(false;)699 1965 y(if)f(s)h(is)f(an)g
(assignment)f(statement)h(and)g(lhs\(s\))f(is)i(a)g(local)e(then)898
2047 y(x)h(=)h(lhs\(s\);)300 2210 y(\(2\))448 b(if)49
b(s)h(has)f(only)g(one)g(use)h(in)f(G)h(and)f(that)g(use)g(u)h(has)f(s)
h(as)f(its)g(sole)h(def)300 2292 y(\(3\))647 b(if)49
b(s)100 b(and)49 b(use)g(are)h(in)f(the)g(same)g(exception)g(zone)1296
2373 y(canAggregate)f(=)h(true;)699 2537 y(if)g(not)g(canAggregate)f
(then)848 2618 y(next)h(statement;)699 2782 y(fieldRefList)e(=)j
(emptyList;)699 2863 y(localsUsed)d(=)j(emptyList;)699
2945 y(propagatingInvokeExpr)45 b(=)50 b(false;)699 3027
y(propagatingFieldRef)c(=)j(false;)699 3109 y(propagatingArrayRef)d(=)j
(false;)449 3272 y(|)200 b(for)49 b(all)g(values)g(v)g(in)h(s)f(do)449
3363 y(|)399 b(if)49 b(v)h(instanceof)e(Local)449 3455
y(|)598 b(localsUsed.add\(v\);)449 3546 y(|)399 b(else)49
b(if)g(v)h(instanceof)e(InvokeExpr)449 3637 y(|)598 b
(propagatingInvokeExpr)46 b(=)k(true;)300 3729 y(\(4\)|)398
b(else)49 b(if)g(v)h(instanceof)e(ArrayRef)449 3820 y(|)598
b(propagatingArrayRef)46 b(=)k(true;)449 3911 y(|)399
b(else)49 b(if)g(v)h(instanceof)e(FieldRef)449 4003 y(|)598
b(propagatingFieldRef)46 b(=)k(true;)449 4094 y(|)598
b(fieldRefList.add\(v\);)300 4257 y(\(5\))249 b(path)49
b(=)g(G.)h(extendedBasicBlockPathBetween\(s,)43 b(use\);)1143
4569 y Fy(Figure)25 b(3.13:)30 b(The)25 b(aggre)o(gation)e(algorithm.)
29 b(\(part)c(I\))2050 5509 y(53)p eop
%%Page: 54 62
54 61 bop 499 837 a Fo(if)50 b(path)f(is)g(null)g(then)699
918 y(next)g(statement;)499 1082 y(for)h(each)f(node)g(nodeStmt)f(in)h
(path)g(do)699 1163 y(if)g(nodeStmt)f(==)i(s)f(then)898
1245 y(next)g(statement;)699 1409 y(if)g(nodeStmt)f(!=)i(use)f(and)g
(nodeStmt)g(is)g(an)g(assignment)f(then)898 1490 y(def)h(=)h
(lhs\(nodeStmt\);)300 1654 y(\(6\))448 b(if)49 b
(localsUsed.contains\(def\))d(then)1097 1735 y(next)j(statement;)449
1899 y(|)399 b(if)49 b(propagatingInvokeExpr)d(or)k
(propagatingFieldRef)c(or)449 1990 y(|)598 b(propagatingArrayRef)46
b(then)449 2081 y(|)598 b(if)49 b(def)h(instanceof)e(FieldRef)g(then)
449 2173 y(|)797 b(if)50 b(propagatingInvokeExpr)c(then)449
2264 y(|)997 b(next)49 b(statement;)300 2355 y(\(7\)|)796
b(if)50 b(propagatingFieldRef)c(then)449 2447 y(|)997
b(for)49 b(f)g(in)h(fieldRefList)d(do)449 2538 y(|)1196
b(if)49 b(f)h(=)f(def.getField\(\))449 2629 y(|)1395
b(next)49 b(statement;)449 2721 y(|)598 b(else)49 b(if)h(def)f
(instanceof)f(ArrayRef)g(then)449 2812 y(|)797 b(if)50
b(propagatingInvokeExpr)c(or)j(propagatingArrayRef)d(then)449
2903 y(|)997 b(next)49 b(statement;)449 2995 y(|)449
3086 y(|)399 b(if)49 b(propagatingInvokeExpr)d(and)j(nodeStmt)g
(instanceof)449 3177 y(|)548 b(MonitorStmt)48 b(then)449
3269 y(|)548 b(next)49 b(statement;)449 3432 y(|)249
b(if)50 b(propagatingInvokeExpr)c(or)j(propagatingFieldRef)d(or)449
3523 y(|)449 b(propagatingArrayRef)46 b(then)449 3615
y(|)449 b(for)49 b(all)g(values)g(y)g(in)h(nodeStmt)e(do)449
3706 y(|)i(\(8a\))398 b(if)49 b(use)h(=)f(nodeStmt)f(and)i(def)f(==)g
(y)449 3797 y(|)847 b(goto)49 b(aggregate;)300 3889 y(\(8\)|)449
3980 y(|)648 b(if)49 b(y)h(instanceof)e(InvokeExpr)g(or)449
4071 y(|)847 b(\(propagatingInvokeExpr)46 b(and)j(\(def)g(instanceof)f
(Field-)300 4153 y(Ref)h(or)449 4235 y(|)897 b(def)49
b(instanceof)f(ArrayRef\)\))449 4326 y(|)847 b(next)49
b(statement;)300 4489 y(\(9\)aggregate:)499 4571 y(aggregate\(s,)f
(use\))499 4653 y(hasChanged)g(=)i(true;)1142 4964 y
Fy(Figure)25 b(3.14:)30 b(The)25 b(aggre)o(gation)e(algorithm)g(\(part)
i(II\))2050 5509 y(54)p eop
%%Page: 55 63
55 62 bop 300 499 a Fp(3.2.2)121 b(T)-10 b(ra)n(ver)n(se)39
b(G)6 b Fg(R)g(I)g(M)g(P)35 b Fp(code)f(and)g(g)q(enerate)h(b)n
(ytecode)300 732 y Fy(Generating)28 b(B)q Ft(A)t(F)j
Fy(code)26 b(from)i(G)t Ft(R)t(I)t(M)t(P)33 b Fy(is)26
b(straightforw)o(ard)f(because)j(G)t Ft(R)t(I)t(M)t(P)33
b Fy(consists)25 b(of)h(tree-lik)o(e)300 847 y(statements)h(and)k(B)q
Ft(A)t(F)j Fy(is)28 b(a)h(stack-based)g(representation.)42
b(Standard)29 b(code)g(generation)f(techniques)300 963
y(for)20 b(stack)f(machines)g(are)h(used)f(here[2)q(],)h(that)f(is,)h
(pre-order)g(tree)g(tra)n(v)o(ersal.)29 b(In)19 b(the)h(running)e(e)o
(xample,)300 1079 y(for)25 b(e)o(xample,)f(we)h(ha)n(v)o(e)g(the)f
(follo)n(wing)f(con)l(v)o(ersion:)540 1442 y Fo(return)49
b(l1.value)f(+)i(l2;)p 1798 1647 4 381 v 1960 1319 a(43)f(aload_2)1960
1400 y(44)g(getfield)f(#20)i(<Field)e(int)i(value>)1960
1482 y(47)f(iload_1)1960 1564 y(48)g(iadd)1960 1646 y(49)g(ireturn)p
1798 1762 4 116 v 890 1843 a Fy(G)t Ft(R)t(I)t(M)t(P)31
b Fy(code)p 1798 1878 V 1188 w(bytecode)446 2112 y(The)26
b(code)f(generated)h(in)f(some)f(cases)i(by)f(this)f(tree)i(tra)n(v)o
(ersal)f(may)g(be)g(inef)n(\002cient)g(compared)g(to)300
2227 y(the)k(original)g(Ja)n(v)n(a)g(bytecode.)44 b(This)29
b(occurs)g(when)g(the)h(original)e(Ja)n(v)n(a)h(source)h(contained)e
(compact)300 2343 y(C-lik)o(e)39 b(constructs)g(such)f(as)i
Fq(a[j++])58 b(=)i(5)39 b Fy(in)g(the)g(e)o(xample)f(3.12.)73
b(Note)39 b(ho)n(w)f(the)h(bytecode)300 2458 y(generated)c(from)f(the)i
(G)t Ft(R)t(I)t(M)t(P)41 b Fy(code)34 b(has)g(tw)o(o)g(e)o(xtra)g
(bytecodes.)59 b(This)33 b(inef)n(\002cienc)o(y)h(may)g(ha)n(v)o(e)g(a)
300 2574 y(signi\002cant)27 b(impact)g(on)h(the)g(program)g(e)o(x)o
(ecution)e(time)h(if)h(such)g(a)g(statement)f(occurs)h(in)g(loops)f
(\(and)300 2690 y(the)o(y)d(often)h(do.\))446 2855 y(T)-8
b(o)23 b(eliminate)f(this)g(source)i(of)f(inef)n(\002cienc)o(y)f(we)i
(perform)f(peephole)g(optimizations)d(on)j(the)g(code)300
2970 y(generated)29 b(from)i(G)t Ft(R)t(I)t(M)t(P)r Fy(.)47
b(T)-8 b(o)28 b(optimize)g(the)g(increment)g(case,)j(we)e(search)g(for)
g(Grimp)f(patterns)g(of)300 3086 y(the)d(form:)300 3276
y Fe(s1:)217 b(local)52 b(=)i(<lvalue>;)300 3369 y(s2:)217
b(<lvalue>)51 b(=)j(local/<lvalue>)48 b(+)54 b(1;)300
3462 y(s3:)217 b(use\(local\))300 3675 y Fy(and)28 b(we)h(ensure)g
(that)f(the)g(local)h(de\002ned)g(in)f Fk(s)1931 3690
y Fm(1)1999 3675 y Fy(has)g(e)o(xactly)g(tw)o(o)g(uses,)h(and)g(that)f
(the)g(uses)g(in)h Fk(s)3732 3690 y Fm(2)3771 3675 y
Fk(;)17 b(s)3861 3690 y Fm(3)300 3790 y Fy(ha)n(v)o(e)j(e)o(xactly)f
(one)h(de\002nition.)28 b(Gi)n(v)o(en)19 b(this)g(situation,)g(we)i
(emit)e(code)h(for)g(only)g Fk(s)3146 3805 y Fm(3)3185
3790 y Fy(.)29 b(Ho)n(we)n(v)o(er)l(,)20 b(during)300
3906 y(the)j(generation)g(of)h(code)f(for)h Fk(s)1393
3921 y Fm(3)1432 3906 y Fy(,)g(when)f Fq(local)f Fy(is)h(to)g(be)h
(emitted,)e(we)i(also)f(emit)f(code)i(to)f(duplicate)300
4022 y Fq(local)h Fy(on)g(the)h(stack,)g(and)f(increment)h
Fq(<lvalue>)p Fy(.)446 4187 y(This)f(approach)h(produces)g(reasonably)f
(ef)n(\002cient)h(bytecode.)31 b(In)25 b(some)f(situations)f(the)h
(peephole)300 4302 y(patterns)f(f)o(ail)g(and)g(the)g(complete)g
(original)f(structure)h(is)g(not)f(reco)o(v)o(ered.)30
b(In)23 b(these)h(cases,)f(the)g(second)300 4418 y(option)h(of)g
(producing)g(bytecode)h(via)i(B)q Ft(A)t(F)i Fy(performs)c(better)-5
b(.)30 b(See)c(the)f(chapter)g(4)f(for)h(more)g(details.)446
4583 y(Before)39 b(performing)e(the)h(tree)g(tra)n(v)o(ersal,)i(we)e
(also)g(perform)f(a)i(phase)e(of)h(re)o(gister)f(allocation)300
4699 y(which)31 b(maps)g(the)j(G)t Ft(R)t(I)t(M)t(P)k
Fy(local)32 b(v)n(ariables)f(to)g(bytecode)g(local)h(v)n(ariable)f
(slots.)50 b(This)31 b(mapping)g(is)300 4815 y(performed)36
b(twice;)42 b(once)36 b(for)h(32-bit)e(quantities)g(and)h(another)g
(time)g(for)g(64-bit)g(quantities.)63 b(The)300 4930
y(re)o(gister)31 b(allocation)f(scheme)h(is)g(a)h(simple)e(scheme)h
(based)g(on)g(heuristic)g(coloring)f(which)h(uses)g(in-)300
5046 y(tereference)26 b(graphs)f(to)f(pre)n(v)o(ent)g(con\003icts.)2050
5509 y(55)p eop
%%Page: 56 64
56 63 bop 540 643 a Fo($stack0#11)48 b(=)i(l1.value;)p
2098 734 4 227 v 2160 560 a(load.r)f(l1;)2160 642 y(fieldget)f(<A:)i
(int)f(value>;)2160 723 y(store.i)g($stack0#11;)p 480
737 3241 4 v 540 915 a($stack0#12)f(=)i($stack0#11)e(+)h(l2;)p
2098 1048 4 311 v 2160 792 a(load.i)g($stack0#11;)2160
874 y(load.i)g(l2;)2160 956 y(add.i;)2160 1037 y(store.i)g($stack0#12;)
p 480 1051 3241 4 v 540 1147 a(return)g($stack0#12;)p
2098 1197 4 146 v 2160 1106 a(load.i)g($stack0#12;)2160
1188 y(return.i;)p 480 1200 3241 4 v 877 1257 a Fd(\(a\))20
b(original)h(J)t Fc(I)t(M)t(P)t(L)t(E)i Fd(code)p 2098
1282 4 82 v 806 w(\(b\))c(inef)n(\002cient)j(B)q Fc(A)t(F)h
Fd(code)300 1549 y Fy(Figure)28 b(3.15:)36 b(Excerpt)28
b(of)g(the)g(running)f(e)o(xample)g(e)o(xplicitly)f(demonstrating)g
(the)k(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(to)c(B)q Ft(A)t(F)300
1670 y Fy(con)l(v)o(ersion)24 b(statement)f(by)i(statement.)300
1962 y Fr(3.3)143 b(Anal)n(yzab)o(le)41 b(J)8 b Fn(I)g(M)g(P)g(L)g(E)37
b Fr(to)i(Bytecode)f(\(via)43 b(B)t Fn(A)8 b(F)t Fr(\))300
2230 y Fy(This)26 b(section)h(describes)g(the)g(second)g(method)f(of)h
(transforming)h(J)t Ft(I)t(M)t(P)t(L)t(E)33 b Fy(code)28
b(back)f(to)g(bytecode:)300 2346 y(via)g(B)q Ft(A)t(F)r
Fy(.)33 b(\(see)26 b(\002gure)f(3.10)f(for)h(an)g(illustration)e(of)i
(these)g(tw)o(o)f(paths.\))446 2511 y(This)e(method)g(attempts)f(to)i
(achie)n(v)o(e)f(ef)n(\002cient)h(bytecode)f(by)g(producing)i(B)q
Ft(A)t(F)k Fy(code)23 b(nai)n(v)o(ely)e(and)300 2627
y(then)31 b(optimizing)e(it,)j(as)f(opposed)g(to)f(the)j(G)t
Ft(R)t(I)t(M)t(P)38 b Fy(method)30 b(which)h(attempts)f(to)h(produce)g
(ef)n(\002cient)302 2742 y(B)q Ft(A)t(F)f Fy(code)25
b(directly)-6 b(.)446 2908 y(There)36 b(are)g(four)f(steps)f(necessary)
h(for)h(this)e(transformation,)i(and)f(the)o(y)f(are)i(described)f(in)f
(the)300 3023 y(follo)n(wing)23 b(subsections.)29 b(This)24
b(method)g(w)o(as)g(mainly)g(de)n(v)o(eloped)f(and)i(added)g(to)f(the)h
(frame)n(w)o(ork)f(by)300 3139 y(P)o(atrice)k(Pomin)l(ville)e(and)h(is)
g(described)h(further)g(in)f(our)g(o)o(v)o(ervie)n(w)f(paper)i([28].)39
b(It)28 b(is)f(included)g(here)300 3254 y(for)e(completeness.)300
3593 y Fp(3.3.1)121 b(Direct)34 b(translation)h(to)h(B)s
Fg(A)6 b(F)300 3826 y Fy(The)27 b(\002rst)f(step)h(to)f(produce)h
(bytecode)f(from)i(J)t Ft(I)t(M)t(P)t(L)t(E)33 b Fy(is)27
b(to)f(treat)j(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(as)27 b(a)g(tree)g
(representation)300 3942 y(and)d(con)l(v)o(ert)f(it)h(to)i(B)q
Ft(A)t(F)j Fy(code)24 b(directly)-6 b(,)23 b(using)g(standard)h(tree)g
(tra)n(v)o(ersal)g(techniques)f(as)i(w)o(as)f(done)f(in)300
4057 y(section)h(3.2.2.)446 4223 y(Generating)k(code)g(in)f(this)g
(manner)h(produces)g(inef)n(\002cient)h(B)q Ft(A)t(F)k
Fy(code)28 b(because)g(local)g(v)n(ariables)300 4338
y(are)e(used)e(for)h(the)g(storage)f(of)h(intermediate)f(results,)g
(instead)g(of)h(using)f(the)h(stack.)30 b(F)o(or)25 b(e)o(xample,)f(an)
300 4454 y(e)o(xcerpt)h(of)g(the)f(running)g(e)o(xample)g(is)g(gi)n(v)o
(en)g(in)g(\002gure)h(3.15)g(e)o(xplicitly)d(sho)n(wing)h(the)i(con)l
(v)o(ersion.)446 4619 y(W)-8 b(e)20 b(can)f(see)g(in)f(\002gure)i(3.15)
e(that)g(the)h Fq(store.i)p Fy(,)f Fq(load.i)g Fy(pairs)h(for)g(v)n
(ariables)f Fq($stack0#11)300 4735 y Fy(and)26 b Fq($stack0#12)f
Fy(can)i(be)f(eliminated,)g(because)h(their)f(v)n(alues)f(are)j(just)d
(temporarily)h(left)g(on)g(the)300 4850 y(stack.)33 b(The)26
b(ne)o(xt)f(step)h(of)g(eliminating)d(redundant)j(load/store)e(seeks)i
(to)f(optimize)g(this)g(situation)f(as)300 4966 y(well)g(as)h(others.)
31 b(The)24 b(complete)h(translation)e(can)i(be)g(found)g(in)f
(\002gure)h(3.16.)2050 5509 y(56)p eop
%%Page: 57 65
57 64 bop 420 1451 a Fb(public)39 b(int)g(runningExample\(\))420
1516 y({)579 1581 y(Test)h(l0;)579 1645 y(int)g(l2,)f(l3,)h($stack0#3,)
e(l3#2,)739 1710 y($stack0#11,)g($stack0#12;)579 1775
y(A)i(l1;)579 1839 y(B)g($stack0#5;)579 1904 y(java.lang.String)e
(l3#3;)579 1969 y(C)i($stack0#9;)579 2098 y(l0)g(:=)g(@this;)579
2163 y(l2)g(=)g(0;)579 2227 y($stack0#3)f(=)h(l0.condition;)579
2292 y(if)g($stack0#3)e(==)i(0)g(goto)f(label0;)579 2421
y(l3)h(=)g(5;)579 2486 y($stack0#5)f(=)h(new)f(B;)579
2551 y(specialinvoke)739 2615 y($stack0#5.<init>\(\);)579
2680 y(l1)h(=)g($stack0#5;)579 2745 y(l3#2)g(=)f(l3)h(+)g(1;)579
2809 y(l2)g(=)g(l2)f(+)h(l3;)579 2874 y(goto)g(label1;)460
3003 y(label0:)579 3068 y(l3#3)g(=)f("four";)579 3133
y($stack0#9)g(=)h(new)f(C;)579 3198 y(specialinvoke)739
3262 y($stack0#9.<init>\(l3#3\);)579 3327 y(l1)h(=)g($stack0#9;)460
3456 y(label1:)579 3521 y($stack0#11)f(=)g(l1.value;)579
3586 y($stack0#12)g(=)g($stack0#11)g(+)h(l2;)579 3650
y(return)f($stack0#12;)420 3715 y(})p 2038 4369 4 3609
v 2160 805 a(public)g(int)g(runningExample\(\))2160 869
y({)2319 934 y(word)h(l0,)f(l2,)g(l3,)h(l1,)f($stack0#3,)2479
999 y($stack0#5,)f(l3#2,)h(l3#3,)g($stack0#9,)2479 1063
y($stack0#11,)f($stack0#12;)2319 1193 y(l0)i(:=)f(@this:)g(Test;)2319
1257 y(push)h(0;)2319 1322 y(store.i)f(l2;)2319 1387
y(load.r)g(l0;)2319 1451 y(fieldget)g(<Test:)g(boolean)g(condition>;)
2319 1516 y(store.i)g($stack0#3;)2319 1581 y(load.i)g($stack0#3;)2319
1645 y(ifeq)h(label0;)2319 1775 y(push)g(5;)2319 1839
y(store.i)f(l3;)2319 1904 y(new)h(B;)2319 1969 y(store.r)f($stack0#5;)
2319 2033 y(load.r)g($stack0#5;)2319 2098 y(specialinvoke)f(<B:)i(void)
f(<init>\(\)>;)2319 2163 y(load.r)g($stack0#5;)2319 2227
y(store.r)g(l1;)2319 2292 y(load.i)g(l3;)2319 2357 y(push)h(1;)2319
2421 y(add.i;)2319 2486 y(store.i)f(l3#2;)2319 2551 y(load.i)g(l2;)2319
2615 y(load.i)g(l3;)2319 2680 y(add.i;)2319 2745 y(store.i)g(l2;)2319
2809 y(goto)h(label1;)2200 2939 y(label0:)2319 3003 y(push)g("four";)
2319 3068 y(store.r)f(l3#3;)2319 3133 y(new)h(C;)2319
3198 y(store.r)f($stack0#9;)2319 3262 y(load.r)g($stack0#9;)2319
3327 y(load.r)g(l3#3;)2319 3392 y(specialinvoke)2479
3456 y(<C:)g(void)g(<init>\(java.lang.String\)>;)2319
3521 y(load.r)g($stack0#9;)2319 3586 y(store.r)g(l1;)2200
3715 y(label1:)2319 3780 y(load.r)g(l1;)2319 3844 y(fieldget)g(<A:)g
(int)h(value>;)2319 3909 y(store.i)f($stack0#11;)2319
3974 y(load.i)g($stack0#11;)2319 4038 y(load.i)g(l2;)2319
4103 y(add.i;)2319 4168 y(store.i)g($stack0#12;)2319
4232 y(load.i)g($stack0#12;)2319 4297 y(return.i;)2160
4362 y(})p 2038 4489 4 121 v 912 4574 a Fy(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(code)p 2038 4610 V 1176 w(After)25 b(direct)g(translation)300
4769 y(Figure)19 b(3.16:)30 b(B)q Ft(A)t(F)24 b Fy(code)19
b(of)h(running)e(e)o(xample,)i(before)f(and)h(after)f(direct)h
(translation)e(from)j(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(.)300
4889 y(\(section)j(3.3.1\)\))2050 5509 y(57)p eop
%%Page: 58 66
58 65 bop 300 499 a Fp(3.3.2)121 b(Eliminate)35 b(redundant)f
(store/loads)300 732 y Fy(After)21 b(the)f(nai)n(v)o(e)h(B)q
Ft(A)t(F)k Fy(code)c(is)f(generated,)h(it)f(remains)g(to)g(be)g
(optimized.)28 b(In)21 b(particular)l(,)g(we)f(must)f(re-)300
847 y(mo)o(v)o(e)k(all)h(the)g(redundant)g(store/load)f(instructions)g
(which)h(were)h(introduced)e(by)h(the)h(pre)n(vious)e(step.)300
963 y(Although)31 b(in)h(theory)f(there)i(are)g(man)o(y)e(dif)n(ferent)
h(patterns)g(of)g(redundant)g(store/load)f(instructions)300
1078 y(possible,)23 b(in)i(practice)g(there)g(are)h(just)d(a)j(fe)n(w)e
(which)h(account)g(for)g(the)f(majority:)300 1348 y Fs(stor)n(e/load)49
b Fy(:)40 b(a)31 b(store)e(instruction)g(follo)n(wed)f(by)i(a)g(load)g
(instruction)e(referring)i(to)g(the)g(same)f(local)544
1464 y(v)n(ariable)f(with)h(no)f(other)h(uses.)43 b(Both)29
b(the)g(store)f(and)h(load)g(instructions)e(can)i(be)g(eliminated,)544
1580 y(and)c(the)f(v)n(alue)g(will)g(simply)g(remain)g(on)h(the)f
(stack.)300 1777 y Fs(stor)n(e/load/load)48 b Fy(:)g(a)34
b(store)f(instruction)f(follo)n(wed)g(by)i(2)f(load)g(instructions,)h
(all)f(referring)h(to)f(the)544 1893 y(same)e(local)f(v)n(ariable)g
(with)g(no)h(other)g(uses.)48 b(The)31 b(3)f(instructions)f(can)j(be)e
(eliminated)g(and)h(a)544 2009 y Fq(dup)d Fy(instruction)g(introduced.)
42 b(The)29 b(dup)g(instruction)e(replaces)j(the)f(second)g(load)f(by)h
(dupli-)544 2124 y(cating)24 b(the)h(v)n(alue)f(left)h(on)f(the)h
(stack)g(after)g(eliminating)e(the)i(store)f(and)h(the)f(\002rst)h
(load.)446 2394 y(Eliminating)h(redundant)h(patterns)h(is)g(tri)n(vial)
e(when)i(all)g(the)g(rele)n(v)n(ant)f(instructions)f(follo)n(w)g(each)
300 2510 y(other)-5 b(.)130 b(If)59 b(there)f(are)h(interlea)n(ving)f
(instructions)e(\(as)i(is)g(the)g(case)h(with)f Fq(load.r)g(l3#3)p
Fy(,)300 2626 y Fq(store.r)g(l3#3)35 b Fy(in)h(the)g(running)f(e)o
(xample)g(in)h(\002gure)g(3.17\))g(then)g(some)f(care)i(must)e(be)h
(tak)o(en)300 2741 y(to)f(eliminate)f(the)g(pair)i(safely)-6
b(.)60 b(In)36 b(particular)l(,)h(we)e(compute)g(the)f
Fz(minimum)g(stac)n(k)h(height)g(varia-)300 2857 y(tion)23
b Fy(and)h Fz(net)g(stac)n(k)g(height)f(variation)g Fy(for)h(these)g
(interlea)n(ving)f(instructions)f(and)j(only)e(if)h(these)g(both)300
2972 y(are)30 b(equal)g(to)f(zero)i(can)f(we)g(eliminate)e(the)i(pair)f
(\(or)h(triple\).)45 b(If)30 b(the)o(y)f(are)i(not)e(zero,)i(then)e
(some)g(re-)300 3088 y(ordering)f(of)h(the)h(B)q Ft(A)t(F)k
Fy(instructions)26 b(is)i(attempted.)41 b(These)29 b(eliminations)d
(are)j(performed)g(on)f(basic)300 3203 y(blocks,)f(and)g(iterations)e
(are)j(performed)f(until)f(there)h(are)h(no)f(more)f(changes.)38
b(This)26 b(optimization)f(is)300 3319 y(discussed)f(in)g(complete)g
(detail)h(in)f(our)h(o)o(v)o(ervie)n(w)e(paper[28].)446
3484 y(In)i(the)g(running)f(e)o(xample)g(in)g(\002gure)i(3.17,)e(the)h
(e)o(xamples)e(of)i(load/store)f(elimination)f(are)j(clear:)300
3600 y(three)72 b(store/load)e(triplets)g(on)h(the)g(local)g(v)n
(ariables)g Fq($stack0#3)p Fy(,)81 b Fq($stack0#11)69
b Fy(and)300 3715 y Fq($stack0#12)36 b Fy(and)j(tw)o(o)f
(store/load/load)f(triplets)g(on)i(the)f(local)h(v)n(ariables)e
Fq($stack0#5)g Fy(and)300 3831 y Fq($stack0#9)p Fy(.)300
4169 y Fp(3.3.3)121 b(P)l(ac)n(k)35 b(local)g(v)n(ariab)o(les)300
4401 y Fy(In)d(bytecode,)i(the)e(local)g(v)n(ariables)g(are)h(untyped,)
g(whereas)g(in)g(B)q Ft(A)t(F)38 b Fy(there)32 b(are)h(tw)o(o)f(types)g
(\()p Fq(word)300 4517 y Fy(and)24 b Fq(dword)p Fy(\).)30
b(This)23 b(step)h(consists)f(of)h(performing)g(a)g(form)g(of)h(re)o
(gister)e(allocation)h(which)f(attempts)300 4632 y(to)h(minimize)g(the)
g(number)h(of)g(local)f(v)n(ariables)g(used)h(at)g(the)h(B)q
Ft(A)t(F)k Fy(le)n(v)o(el.)446 4797 y(The)f(allocation)e(scheme)i(that)
f(we)h(use)f(is)g(based)h(on)f(a)h(greedy)g(graph)f(coloring)g(using)g
(interfer)n(-)300 4913 y(ence)21 b(graphs)f(to)f(assure)i(that)e
(locals)h(with)g(o)o(v)o(erlapping)e(lifespans)h(are)i(gi)n(v)o(en)e
(distinct)g(colors.)28 b(Colors)300 5028 y(are)j(then)e(used)h(as)g
(the)g(basis)f(for)i(ne)n(w)e(v)n(ariable)h(names.)46
b(T)-8 b(w)o(o)30 b(packings)f(are)i(actually)e(performed,)300
5144 y(one)k(for)g(v)n(ariables)f(of)h(type)g Fq(word)f
Fy(and)h(another)f(for)i(v)n(ariables)e(of)h(type)f Fq(dword)p
Fy(.)54 b(This)32 b(pre)n(v)o(ents)300 5260 y(the)23
b(interchange)g(of)h(64-bit)e(wide)h(local)g(v)n(ariable)g(slots)f
(with)g(tw)o(o)h(32-bit)g(wide)g(local)g(v)n(ariable)f(slots.)2050
5509 y(58)p eop
%%Page: 59 67
59 66 bop 420 794 a Fb(public)39 b(int)g(runningExample\(\))420
858 y({)579 923 y(word)h(l0,)f(l2,)g(l3,)h(l1,)f($stack0#3,)659
988 y($stack0#5,)f(l3#2,)i(l3#3,)659 1052 y($stack0#9,)e($stack0#11,)
659 1117 y($stack0#12;)579 1246 y(l0)i(:=)g(@this:)e(Test;)579
1311 y(push)i(0;)579 1376 y(store.i)f(l2;)579 1440 y(load.r)g(l0;)579
1505 y(fieldget)739 1570 y(<Test:)g(boolean)g(condition>;)579
1634 y(store.i)g($stack0#3;)579 1699 y(load.i)g($stack0#3;)579
1764 y(ifeq)h(label0;)579 1893 y(push)g(5;)579 1958 y(store.i)f(l3;)579
2022 y(new)h(B;)579 2087 y(store.r)f($stack0#5;)579 2152
y(load.r)g($stack0#5;)579 2216 y(specialinvoke)739 2281
y(<B:)g(void)g(<init>\(\)>;)579 2346 y(load.r)g($stack0#5;)579
2410 y(store.r)g(l1;)579 2475 y(load.i)g(l3;)579 2540
y(push)h(1;)579 2605 y(add.i;)579 2669 y(store.i)f(l3#2;)579
2734 y(load.i)g(l2;)579 2799 y(load.i)g(l3;)579 2863
y(add.i;)579 2928 y(store.i)g(l2;)579 2993 y(goto)h(label1;)460
3122 y(label0:)579 3187 y(push)g("four";)579 3251 y(store.r)f(l3#3;)579
3316 y(new)h(C;)579 3381 y(store.r)f($stack0#9;)579 3445
y(load.r)g($stack0#9;)579 3510 y(load.r)g(l3#3;)579 3575
y(specialinvoke)f(<C:)i(void)739 3639 y(<init>\(java.lang.String\)>;)
579 3704 y(load.r)f($stack0#9;)579 3769 y(store.r)g(l1;)460
3898 y(label1:)579 3963 y(load.r)g(l1;)579 4027 y(fieldget)739
4092 y(<A:)g(int)h(value>;)579 4157 y(store.i)f($stack0#11;)579
4221 y(load.i)g($stack0#11;)579 4286 y(load.i)g(l2;)579
4351 y(add.i;)579 4415 y(store.i)g($stack0#12;)579 4480
y(load.i)g($stack0#12;)579 4545 y(return.i;)420 4609
y(})p 2158 4617 4 3868 v 2280 1343 a(public)g(int)g(runningExample\(\))
2280 1408 y({)2439 1473 y(word)h(l0,)f(l2,)g(l1,)h(l3#2;)2439
1602 y(l0)g(:=)f(@this:)g(Test;)2439 1667 y(push)h(0;)2439
1731 y(store.i)f(l2;)2439 1796 y(load.r)g(l0;)2439 1861
y(fieldget)2599 1925 y(<Test:)g(boolean)g(condition>;)2439
1990 y(ifeq)h(label0;)2439 2119 y(load.i)f(l2;)2439 2184
y(push)h(5;)2439 2249 y(dup1.i;)2439 2313 y(new)g(B;)2439
2378 y(dup1.r;)2439 2443 y(specialinvoke)2599 2508 y(<B:)f(void)g
(<init>\(\)>;)2439 2572 y(store.r)g(l1;)2439 2637 y(push)h(1;)2439
2702 y(add.i;)2439 2766 y(store.i)f(l3#2;)2439 2831 y(add.i;)2439
2896 y(store.i)g(l2;)2439 2960 y(goto)h(label1;)2320
3090 y(label0:)2439 3154 y(new)g(C;)2439 3219 y(dup1.r;)2439
3284 y(push)g("four";)2439 3348 y(specialinvoke)e(<C:)i(void)2599
3413 y(<init>\(java.lang.String\)>;)2439 3478 y(store.r)f(l1;)2320
3607 y(label1:)2439 3672 y(load.r)g(l1;)2439 3736 y(fieldget)2599
3801 y(<A:)g(int)h(value>;)2439 3866 y(load.i)f(l2;)2439
3930 y(add.i;)2439 3995 y(return.i;)2280 4060 y(})654
4701 y Fy(before)26 b(load/store)e(elimination)p 2158
4737 4 121 v 772 w(after)i(load/store)e(elimination)443
4896 y(Figure)h(3.17:)32 b(B)q Ft(A)t(F)e Fy(code)25
b(of)g(running)f(e)o(xample,)g(before)h(and)g(after)g(load)g(store)f
(elimination.)2050 5509 y(59)p eop
%%Page: 60 68
60 67 bop 300 499 a Fy(F)o(or)26 b(e)o(xample,)g(in)g(\002gure)h(3.18)e
(we)i(see)f(that)g(when)g Fq(l0)g Fy(is)g(used)g Fq(i0)g
Fy(and)g Fq(i1)g Fy(are)h(no)f(longer)g(needed.)300 615
y(But)f(in)f(practice,)i(separating)e(the)h(cases)g(into)f(tw)o(o)h
(types)f(produces)g(reasonably)h(small)f(sets)g(of)h(local)300
730 y(v)n(ariables)f(which)g(are)i(acceptable.)300 1014
y Fo(word)49 b(r0,)g(i0,)h(i1;)300 1096 y(dword)f(l0;)300
1259 y(r0)g(:=)h(@this:)f(Test2;)300 1341 y(push)g(0;)300
1423 y(store.i)g(i0;)300 1504 y(push)g(1;)300 1586 y(store.i)g(i1;)300
1668 y(load.i)g(i0;)300 1750 y(staticinvoke)f(<Test2:)g(void)h
(useInt\(int\)>;)300 1831 y(load.i)g(i1;)300 1913 y(staticinvoke)f
(<Test2:)g(void)h(useInt\(int\)>;)300 1995 y(push)g(1L;)300
2076 y(store.l)g(l0;)300 2158 y(load.l)g(l0;)300 2240
y(staticinvoke)f(<Test2:)g(void)h(useLong\(long\)>;)300
2321 y(return;)300 2520 y Fy(Figure)20 b(3.18:)27 b(Example)19
b(of)j(B)q Ft(A)t(F)j Fy(code)20 b(which)f(could)g(pro\002t)h(from)f
(untyped)g(local)g(v)n(ariable)g(coloring;)300 2636 y(when)25
b Fq(l0)f Fy(is)h(used,)f Fq(i0)g Fy(and)h Fq(i1)g Fy(are)g(no)g
(longer)f(needed.)446 2959 y(In)29 b(our)g(running)e(e)o(xample)h
(\(\002gure)i(3.19\),)f(we)g(see)g(that)f(v)n(ariables)g
Fq(l3#2)g Fy(and)h Fq(l1)f Fy(are)i(mapped)300 3074 y(to)24
b Fq(l2)h Fy(and)g Fq(l0)f Fy(respecti)n(v)o(ely)-6 b(,)23
b(thus)h(sa)n(ving)g(tw)o(o)g(local)h(v)n(ariables.)300
3404 y Fp(3.3.4)121 b(Direct)34 b(translation)h(and)f(calculate)i
(maxim)n(um)e(height)300 3633 y Fy(The)19 b(Ja)n(v)n(a)f(V)-6
b(irtual)19 b(Machine)f(requires)h(that)f(the)h(maximum)e(stack)i
(height)f(be)h(gi)n(v)o(en)e(for)i(each)g(method.)300
3748 y(This)33 b(can)h(be)g(computed)f(by)g(performing)g(a)h(simple)f
(depth)g(\002rst)h(tra)n(v)o(ersal)f(of)h(the)h(B)q Ft(A)t(F)k
Fy(code)34 b(and)300 3864 y(recording)25 b(the)f(accumulated)h(ef)n
(fect)g(that)f(each)i(Baf)f(instruction)f(has)g(on)h(the)f(stack)h
(height.)446 4025 y(Ev)o(ery)d(B)q Ft(A)t(F)j Fy(instruction)18
b(is)h(then)h(con)l(v)o(erted)f(to)g(the)h(corresponding)f(bytecode)h
(instruction.)27 b(This)300 4141 y(is)d(a)h(straightforw)o(ard)g
(mapping)e(which)i(consists)e(of)i(tw)o(o)f(steps:)420
4376 y(1.)49 b Fz(Map)37 b(the)g(local)g(variables.)67
b Fy(Since)37 b(the)g(local)h(v)n(ariables)e(are)i(already)g(pack)o(ed)
f(we)h(simply)544 4492 y(associate)30 b(each)i(B)q Ft(A)t(F)j
Fy(local)30 b(v)n(ariable)g(with)f(a)h(Ja)n(v)n(a)g(bytecode)g(v)n
(ariable.)45 b(Note)30 b(that)g(speci\002c)544 4607 y(local)k(v)n
(ariables)f(in)h(the)g(Ja)n(v)n(a)g(bytecode)g(ha)n(v)o(e)g(special)g
(meaning,)i(and)e(these)g(are)h(allocated)544 4723 y(by)25
b(parsing)f(the)j(B)q Ft(A)t(F)j Fy(code)25 b(for)g(identity)f
(instructions)f(which)h(associate)h(speci\002c)h(local)e(v)n(ari-)544
4838 y(ables)32 b(with)g(special)h(roles,)h(such)f(as)g
Fq(l0)59 b(:=)g(@this:)g(Test)32 b Fy(which)g(indicates)g(that)g
Fq(l0)544 4954 y Fy(corresponds)24 b(to)h Fq(@this)e
Fy(and)i(thus)f(should)g(be)h(assigned)f(to)g(local)h(v)n(ariable)f
(slot)g(0.)420 5144 y(2.)49 b Fz(Map)34 b(the)h(bytecode)f
(instructions.)58 b Fy(Each)36 b(B)q Ft(A)t(F)k Fy(instruction)33
b(corresponds)h(to)g(one)h(or)f(more)544 5260 y(bytecode)28
b(instructions.)39 b(This)27 b(is)h(a)h(straightforw)o(ard)e
(association.)40 b(F)o(or)28 b(e)o(xample,)g Fq(push)59
b(0)2050 5509 y Fy(60)p eop
%%Page: 61 69
61 68 bop 360 909 a Fo(public)49 b(int)g(runningExample\(\))360
990 y({)559 1072 y(word)g(l0,)h(l2,)f(l1,)g(l3#2;)559
1236 y(l0)h(:=)f(@this:)g(Test;)559 1317 y(push)g(0;)559
1399 y(store.i)g(l2;)559 1481 y(load.r)g(l0;)559 1562
y(fieldget)659 1644 y(<Test:)g(boolean)f(condition>;)559
1726 y(ifeq)h(label0;)559 1889 y(load.i)g(l2;)559 1971
y(push)g(5;)559 2053 y(dup1.i;)559 2134 y(new)h(B;)559
2216 y(dup1.r;)559 2298 y(specialinvoke)659 2379 y(<B:)f(void)g
(<init>\(\)>;)559 2461 y(store.r)g(l1;)559 2543 y(push)g(1;)559
2624 y(add.i;)559 2706 y(store.i)g(l3#2;)559 2788 y(add.i;)559
2869 y(store.i)g(l2;)559 2951 y(goto)g(label1;)410 3115
y(label0:)559 3196 y(new)h(C;)559 3278 y(dup1.r;)559
3360 y(push)f("four";)559 3441 y(specialinvoke)f(<C:)h(void)659
3523 y(<init>\(java.lang.String\)>;)559 3605 y(store.r)g(l1;)410
3768 y(label1:)559 3850 y(load.r)g(l1;)559 3931 y(fieldget)g(<A:)g(int)
g(value>;)559 4013 y(load.i)g(l2;)559 4095 y(add.i;)559
4177 y(return.i;)360 4258 y(})p 2098 4267 4 3414 v 2160
909 a(public)g(int)g(runningExample\(\))2160 990 y({)2359
1072 y(word)g(l0,)h(l2;)2359 1236 y(l0)g(:=)f(@this:)g(Test;)2359
1317 y(push)g(0;)2359 1399 y(store.i)g(l2;)2359 1481
y(load.r)g(l0;)2359 1562 y(fieldget)2459 1644 y(<Test:)g(boolean)f
(condition>;)2359 1726 y(ifeq)h(label0;)2359 1889 y(load.i)g(l2;)2359
1971 y(push)g(5;)2359 2053 y(dup1.i;)2359 2134 y(new)h(B;)2359
2216 y(dup1.r;)2359 2298 y(specialinvoke)2459 2379 y(<B:)f(void)g
(<init>\(\)>;)2359 2461 y(store.r)g(l0;)2359 2543 y(push)g(1;)2359
2624 y(add.i;)2359 2706 y(store.i)g(l2;)2359 2788 y(add.i;)2359
2869 y(store.i)g(l2;)2359 2951 y(goto)g(label1;)2210
3115 y(label0:)2359 3196 y(new)h(C;)2359 3278 y(dup1.r;)2359
3360 y(push)f("four";)2359 3441 y(specialinvoke)f(<C:)h(void)2459
3523 y(<init>\(java.lang.String\)>;)2359 3605 y(store.r)g(l0;)2210
3768 y(label1:)2359 3850 y(load.r)g(l0;)2359 3931 y(fieldget)g(<A:)g
(int)g(value>;)2359 4013 y(load.i)g(l2;)2359 4095 y(add.i;)2359
4177 y(return.i;)2160 4258 y(})p 2098 4388 4 121 v 894
4472 a Fy(Before)26 b(packing)p 2098 4508 V 1219 w(After)f(packing)300
4667 y(Figure)36 b(3.19:)53 b(B)q Ft(A)t(F)41 b Fy(code)36
b(of)f(running)g(e)o(xample)g(before)h(and)f(after)h(local)g(packing.)
62 b(\(subsection)300 4788 y(3.3.3\))2050 5509 y(61)p
eop
%%Page: 62 70
62 69 bop 544 499 a Fy(corresponds)22 b(to)h Fq(iconst_0)e
Fy(and)h Fq(load.i)59 b(l0)22 b Fy(may)h(correspond)f(to)h
Fq(iload)58 b(0)23 b Fy(depend-)544 615 y(ing)h(on)h(the)f(mapping)g
(of)h(the)f(local)h(v)n(ariables.)300 997 y Fr(3.4)143
b(Summar)q(y)300 1265 y Fy(This)23 b(chapter)i(described)f(the)g
(transformations)e(present)i(in)i(S)t Ft(O)t(O)q(T)j
Fy(which)23 b(allo)n(w)g(code)h(in)g(one)g(inter)n(-)300
1381 y(mediate)h(representation)h(to)f(be)i(transformed)e(to)g
(intermediate)h(representation.)33 b(W)-8 b(e)26 b(presented)g(the)300
1497 y(steps)c(required)g(to)g(transform)g(bytecode)g(to)j(J)t
Ft(I)t(M)t(P)t(L)t(E)r Fy(,)i(and)22 b(then)i(J)t Ft(I)t(M)t(P)t(L)t(E)
29 b Fy(back)23 b(to)f(bytecode)g(via)h(tw)o(o)300 1612
y(dif)n(ferent)h(paths.)2050 5509 y(62)p eop
%%Page: 63 71
63 70 bop 300 1203 a Fu(Chapter)58 b(4)300 1658 y(Experimental)g
(Results)300 2156 y Fy(Here)27 b(we)g(present)f(the)h(results)e(of)i
(tw)o(o)f(e)o(xperiments.)34 b(The)27 b(\002rst)g(e)o(xperiment,)e
(discussed)h(in)g(section)300 2271 y(4.3,)33 b(v)n(alidates)d(that)h
(we)h(can)g(pass)f(class)h(\002les)g(through)e(the)i(frame)n(w)o(ork,)h
(without)d(optimizing)f(the)302 2387 y(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(code,)26 b(and)h(produce)f(class)g(\002les)g(that)g(ha)n(v)o(e)g
(the)g(same)g(performance)h(as)f(the)g(original)f(ones.)300
2502 y(In)i(particular)l(,)g(this)f(sho)n(ws)g(that)g(our)h(methods)f
(of)h(con)l(v)o(erting)f(from)i(J)t Ft(I)t(M)t(P)t(L)t(E)34
b Fy(to)26 b(stack-based)h(byte-)300 2618 y(code)g(are)g(acceptable.)37
b(The)27 b(second)f(e)o(xperiment,)g(discussed)g(in)g(Section)g(4.4,)h
(sho)n(ws)e(the)i(ef)n(fect)g(of)300 2734 y(applying)c(method)g
(inlining)f(on)j(J)t Ft(I)t(M)t(P)t(L)t(E)31 b Fy(code)24
b(and)g(demonstrates)f(that)g(optimizing)f(Ja)n(v)n(a)h(bytecode)300
2849 y(is)h(feasible)h(and)g(desirable.)300 3231 y Fr(4.1)143
b(Methodology)300 3500 y Fy(All)33 b(e)o(xperiments)g(were)i(performed)
f(on)g(dual)f(400Mhz)h(Pentium)f(II)2796 3464 y Fm(TM)2950
3500 y Fy(machines.)58 b(T)-8 b(w)o(o)34 b(operat-)300
3615 y(ing)d(systems)f(were)i(used,)h(Debian)f(GNU/Linux)e(\(k)o(ernel)
h(2.2.8\))h(and)f(W)l(indo)n(ws)f(NT)i(4.0)f(\(service)300
3731 y(pack)26 b(5\).)32 b(Under)26 b(GNU/Linux)e(we)i(ran)g(e)o
(xperiments)e(using)g(three)i(dif)n(ferent)f(con\002gurations)g(of)g
(the)300 3846 y(Blackdo)n(wn)34 b(Linux)g(JDK1.2,)i(pre-release)f(v)o
(ersion)f(2.)2301 3810 y Fc(1)2398 3846 y Fy(The)h(con\002gurations)e
(were:)51 b(interpreter)l(,)300 3962 y(Sun)34 b(JIT)-7
b(,)33 b(and)g(a)h(public)f(beta)g(v)o(ersion)g(of)g(Borland')-5
b(s)33 b(JIT)2406 3926 y Fc(2)2443 3962 y Fy(.)h(Under)f(W)l(indo)n(ws)
f(NT)-7 b(,)33 b(tw)o(o)g(dif)n(ferent)300 4078 y(con\002gurations)24
b(of)h(Sun')-5 b(s)24 b(JDK1.2.2)g(were)h(used:)31 b(the)24
b(JIT)-7 b(,)25 b(and)f(HotSpot)g(\(v)o(ersion)g(1.0.1\))446
4243 y(Ex)o(ecution)30 b(times)h(were)h(measured)f(by)g(running)f(the)i
(benchmarks)f(ten)g(times,)h(discarding)e(the)300 4358
y(best)h(and)h(w)o(orst)f(runs,)i(and)e(a)n(v)o(eraging)g(the)g
(remaining)g(eight.)50 b(All)31 b(e)o(x)o(ecutions)f(were)i(v)o
(eri\002ed)g(for)300 4474 y(correctness)25 b(by)g(comparing)f(the)g
(output)g(to)g(the)h(e)o(xpected)f(output.)p 300 4542
1440 4 v 416 4603 a Fa(1)449 4633 y Fd(http://www)-5
b(.blackdo)n(wn.or)o(g)416 4703 y Fa(2)449 4733 y Fd(http://www)g
(.borland.com)2050 5509 y Fy(63)p eop
%%Page: 64 72
64 71 bop 895 511 2411 4 v 893 631 4 121 v 1450 631 V
1499 595 a Fy(#)26 b(J)t Ft(I)t(M)t(P)t(L)t(E)p 1926
631 V 179 w Fy(Linux)p 2336 631 V 179 w(Linux)p 2840
631 V 297 w(NT)p 3304 631 V 893 752 V 1450 752 V 1654
716 a(Stmts)p 1926 752 V 93 w(Sun)f(Int.)p 2336 752 V
139 w Fd(Sun)94 b(Bor)-5 b(.)p 2840 752 V 94 w(Sun)110
b(Sun)p 3304 752 V 893 872 V 1450 872 V 1926 872 V 2058
836 a Fy(\(secs\))p 2336 872 V 159 w Fd(JIT)124 b(JIT)p
2840 872 V 113 w(JIT)94 b(Hot.)p 3304 872 V 895 875 2411
4 v 895 892 V 893 1012 4 121 v 942 976 a Fz(compr)l(ess)p
1450 1012 V 367 w Fy(7322)p 1926 1012 V 135 w(440.30)p
2336 1012 V 143 w(.15)110 b(.14)p 2840 1012 V 99 w Fs(.06)115
b Fy(.07)p 3304 1012 V 895 1016 2411 4 v 893 1136 4 121
v 942 1100 a Fz(db)p 1450 1136 V 640 w Fy(7293)p 1926
1136 V 135 w(259.09)p 2336 1136 V 143 w(.56)110 b(.58)p
2840 1136 V 99 w(.26)115 b Fs(.14)p 3304 1136 V 895 1139
2411 4 v 893 1260 4 121 v 942 1224 a Fz(jac)n(k)p 1450
1260 V 526 w Fy(16792)p 1926 1260 V 135 w(151.39)p 2336
1260 V 143 w(.43)110 b(.32)p 2840 1260 V 99 w Fs(.15)115
b Fy(.16)p 3304 1260 V 895 1263 2411 4 v 893 1383 4 121
v 942 1347 a Fz(javac)p 1450 1383 V 474 w Fy(31054)p
1926 1383 V 135 w(137.78)p 2336 1383 V 143 w(.52)110
b(.42)p 2840 1383 V 99 w Fs(.24)115 b Fy(.33)p 3304 1383
V 895 1387 2411 4 v 893 1507 4 121 v 942 1471 a Fz(jess)p
1450 1507 V 540 w Fy(17488)p 1926 1507 V 135 w(109.75)p
2336 1507 V 143 w(.45)110 b(.32)p 2840 1507 V 99 w(.21)115
b Fs(.12)p 3304 1507 V 895 1510 2411 4 v 893 1631 4 121
v 942 1595 a Fz(jpat-p)p 1450 1631 V 501 w Fy(1622)p
1926 1631 V 185 w(47.94)p 2336 1631 V 93 w(1.01)110 b(.96)p
2840 1631 V 99 w(.90)115 b Fs(.80)p 3304 1631 V 895 1634
2411 4 v 893 1755 4 121 v 942 1718 a Fz(mpe)l(gaudio)p
1450 1755 V 250 w Fy(19585)p 1926 1755 V 135 w(368.10)p
2336 1755 V 143 w(.15)202 b(-)p 2840 1755 V 99 w Fs(.07)115
b Fy(.10)p 3304 1755 V 895 1758 2411 4 v 893 1878 4 121
v 942 1842 a Fz(r)o(aytr)o(ace)p 1450 1878 V 354 w Fy(10037)p
1926 1878 V 135 w(121.99)p 2336 1878 V 143 w(.45)110
b(.23)p 2840 1878 V 99 w(.16)115 b Fs(.12)p 3304 1878
V 895 1882 2411 4 v 893 2002 4 121 v 942 1966 a Fz(sc)o(hr)l(oeder)n
(-s)p 1450 2002 V 276 w Fy(9713)p 1926 2002 V 185 w(48.51)p
2336 2002 V 143 w(.64)110 b(.62)p 2840 2002 V 99 w(.19)115
b Fs(.12)p 3304 2002 V 895 2005 2411 4 v 893 2126 4 121
v 942 2090 a Fz(soot-c)p 1450 2126 V 446 w Fy(42107)p
1926 2126 V 185 w(85.69)p 2336 2126 V 143 w(.58)110 b(.45)p
2840 2126 V 99 w Fs(.29)115 b Fy(.53)p 3304 2126 V 895
2129 2411 4 v 895 2146 V 893 2266 4 121 v 942 2230 a(a)n(v)o(erage)p
1450 2266 V 608 w(.)p 1926 2266 V 385 w(.)p 2336 2266
V 144 w(.49)110 b(.45)p 2840 2266 V 99 w(.25)115 b(.25)p
3304 2266 V 895 2269 2411 4 v 893 2390 4 121 v 942 2354
a(std.)30 b(de)n(v)-6 b(.)p 1450 2390 V 581 w(.)p 1926
2390 V 385 w(.)p 2336 2390 V 144 w(.23)110 b(.23)p 2840
2390 V 99 w(.23)115 b(.23)p 3304 2390 V 895 2393 2411
4 v 1119 2552 a(Figure)25 b(4.1:)30 b(Benchmarks)25 b(and)g(their)f
(characteristics.)300 2951 y Fr(4.2)143 b(Benc)o(hmarks)36
b(and)j(Baseline)f(Times)300 3219 y Fy(The)55 b(benchmarks)f(used)h
(consist)f(of)h(se)n(v)o(en)f(of)h(the)f(eight)h(standard)f(benchmarks)
h(from)f(the)300 3335 y(SPECjvm98)793 3299 y Fc(3)860
3335 y Fy(suite,)29 b(plus)g(three)h(additional)e(applications)g(from)h
(our)h(collection.)43 b(See)31 b(\002gure)f(4.1.)300
3450 y(W)-8 b(e)21 b(discarded)g(the)g Fz(mtrt)f Fy(benchmark)g(from)h
(our)g(set)f(because)i(it)e(is)g(essentially)g(the)h(same)f(benchmark)
300 3566 y(as)30 b Fz(r)o(aytr)o(ace)p Fy(.)44 b(The)29
b(program)h Fz(soot-c)f Fy(is)g(a)h(benchmark)g(based)f(on)h(an)g
(older)f(v)o(ersion)g(of)j(S)t Ft(O)t(O)q(T)r Fy(,)h(and)300
3681 y(is)g(interesting)e(because)j(it)e(is)h(hea)n(vily)f(object)h
(oriented.)55 b(The)33 b(program)f Fz(sc)o(hr)l(oeder)n(-s)g
Fy(is)g(an)i(audio)300 3797 y(editing)24 b(program)g(which)g
(manipulates)g(sound)g(\002les,)h(and)f Fz(jpat-p)g Fy(is)h(a)g
(protein)f(analysis)g(tool.)446 3962 y(Figure)32 b(4.1)f(also)h(gi)n(v)
o(es)e(basic)h(characteristics)h(such)f(as)h(size,)h(and)f(running)e
(times)h(on)g(the)h(\002)n(v)o(e)300 4078 y(platforms.)46
b(All)30 b(of)g(these)g(benchmarks)g(are)h(real)f(w)o(orld)g
(applications)f(that)h(are)g(reasonably)g(sized,)300
4193 y(and)j(the)o(y)g(all)f(ha)n(v)o(e)h(non-tri)n(vial)f(e)o(x)o
(ecution)g(times.)54 b(W)-8 b(e)34 b(used)f(the)g(Linux)f(interpreter)i
(as)f(the)g(base)300 4309 y(time,)24 b(and)h(all)f(the)h(fractional)g
(e)o(x)o(ecution)e(times)h(are)h(with)f(respect)h(to)g(this)f(base.)446
4474 y(Benchmarks)d(for)g(which)g(a)g(dash)f(is)h(gi)n(v)o(en)e(for)i
(the)g(running)e(time)h(indicates)g(that)h(the)f(benchmark)300
4589 y(f)o(ailed)30 b(v)n(alidity)e(checks.)46 b(In)29
b(all)h(these)g(cases,)h(the)f(virtual)f(machine)g(is)g(to)h(blame)f
(as)h(the)g(programs)300 4705 y(run)23 b(correctly)g(with)f(the)h
(interpreter)g(with)f(the)h(v)o(eri\002er)g(e)o(xplicitly)e(turned)i
(on.)29 b(Arithmetic)22 b(a)n(v)o(erages)300 4820 y(and)f(standard)f
(de)n(viations)f(are)j(also)e(gi)n(v)o(en,)g(and)h(these)g
(automatically)e(e)o(xclude)h(those)g(running)g(times)300
4936 y(which)k(are)i(not)e(v)n(alid.)446 5101 y(F)o(or)34
b(this)e(set)i(of)f(benchmarks,)i(we)f(can)g(dra)o(w)f(the)h(follo)n
(wing)d(observ)n(ations.)55 b(The)34 b(Linux)e(JIT)p
300 5168 1440 4 v 416 5230 a Fa(3)449 5260 y Fd(http://www)-5
b(.spec.or)o(g/)2050 5509 y Fy(64)p eop
%%Page: 65 73
65 72 bop 300 499 a Fy(is)30 b(about)g(twice)h(as)f(f)o(ast)h(as)f(the)
h(interpreter)f(b)n(ut)g(it)g(v)n(aries)g(widely)g(depending)g(on)g
(the)g(benchmark.)300 615 y(F)o(or)40 b(e)o(xample,)i(with)d
Fz(compr)l(ess)g Fy(it)h(is)f(more)g(than)h(six)f(times)f(f)o(aster)l
(,)44 b(b)n(ut)39 b(for)h(a)g(benchmark)g(lik)o(e)300
730 y Fz(sc)o(hr)l(oeder)n(-s)31 b Fy(it)h(is)h(only)f(56\045)g(f)o
(aster)-5 b(.)54 b(The)33 b(NT)g(virtual)f(machines)g(also)g(tend)h(to)
f(be)h(twice)f(as)h(f)o(ast)300 846 y(as)26 b(the)f(Linux)g(JIT)-7
b(.)25 b(Furthermore,)h(the)g(performance)g(of)g(the)f(HotSpot)g
(performance)h(engine)g(seems)300 962 y(to)h(be,)g(on)g(a)n(v)o(erage,)
h(not)e(that)h(dif)n(ferent)f(from)h(the)g(standard)f(Sun)h(JIT)-7
b(.)27 b(Perhaps)g(this)f(is)h(because)g(the)300 1077
y(benchmarks)d(are)i(not)e(long)g(running)g(serv)o(er)h(side)f
(applications.)300 1459 y Fr(4.3)143 b(Straight)38 b(thr)m(ough)k(S)8
b Fn(O)g(O)s(T)300 1728 y Fy(Figure)21 b(4.2)f(compares)g(the)g(ef)n
(fect)h(of)g(processing)e(applications)g(with)j(S)t Ft(O)t(O)q(T)j
Fy(with)d(B)q Ft(A)t(F)j Fy(and)e(G)t Ft(R)t(I)t(M)t(P)r
Fy(,)300 1843 y(without)i(performing)g(an)o(y)h(optimizations.)33
b(Fractional)26 b(e)o(x)o(ecution)f(times)g(are)i(gi)n(v)o(en,)e(and)h
(these)g(are)300 1959 y(with)20 b(respect)i(to)f(the)g(original)f(e)o
(x)o(ecution)g(time)g(of)i(the)f(benchmark)g(for)g(a)h(gi)n(v)o(en)d
(platform.)29 b(The)21 b(ideal)300 2074 y(result)g(is)g(1.00.)29
b(This)21 b(means)g(that)g(the)g(same)g(performance)h(is)f(obtained)g
(as)h(the)f(original)f(application.)300 2190 y(F)o(or)28
b Fz(javac)g Fy(the)g(ratio)g(is)g(.98)g(which)g(indicates)g(that)f
Fz(javac)p Fy(')-5 b(s)28 b(e)o(x)o(ecution)f(time)g(has)h(been)h
(reduced)f(by)300 2305 y(2\045.)38 b(The)27 b(benchmark)g
Fz(r)o(aytr)o(ace)f Fy(has)i(a)f(ratio)g(of)h(1.02)e(which)h(indicates)
g(that)g(it)g(w)o(as)g(made)g(slightly)300 2421 y(slo)n(wer;)39
b(its)34 b(e)o(x)o(ecution)f(time)h(has)h(been)g(increased)g(by)g
(2\045.)60 b(The)35 b(ideal)g(arithmetic)f(a)n(v)o(erages)h(for)300
2537 y(these)24 b(tables)h(is)f(1.00)g(because)h(we)g(are)g(trying)f
(to)g(simply)f(reproduce)i(the)g(program)f(as)h(is.)30
b(The)24 b(ideal)300 2652 y(standard)e(de)n(viation)e(is)i(0)g(which)g
(w)o(ould)f(indicate)g(that)h(the)g(transformation)f(has)h(a)g
(consistent)f(ef)n(fect,)300 2768 y(and)k(the)f(results)g(do)h(not)f
(de)n(viate)g(from)h(1.00.)446 2933 y(On)31 b(a)n(v)o(erage,)j(using)e
(B)q Ft(A)t(F)k Fy(tends)31 b(to)g(reproduce)g(the)h(original)e(e)o(x)o
(ecution)g(time.)49 b(Its)31 b(a)n(v)o(erage)h(is)300
3049 y(lo)n(wer)k(than)i(G)t Ft(R)t(I)t(M)t(P)r Fy(')-5
b(s,)43 b(and)36 b(the)g(standard)g(de)n(viation)e(is)i(lo)n(wer)g(as)g
(well.)65 b(F)o(or)36 b(the)g(f)o(aster)h(virtual)300
3164 y(machines)28 b(\(the)h(ones)f(on)g(NT\),)h(this)f(dif)n(ference)h
(disappears.)42 b(The)28 b(main)g(disadv)n(antage)g(of)i(G)t
Ft(R)t(I)t(M)t(P)300 3280 y Fy(is)35 b(that)g(it)g(can)i(produce)e(a)h
(noticeable)f(slo)n(wdo)n(wn)f(for)i(benchmarks)f(lik)o(e)g
Fz(compr)l(ess)g Fy(which)g(ha)n(v)o(e)300 3395 y(tight)24
b(loops)f(on)i(Ja)n(v)n(a)f(statements)g(containing)f(side)i(ef)n
(fects,)g(which)f(it)g(does)h(not)f(al)o(w)o(ays)h(catch.)446
3561 y(Both)33 b(techniques)e(ha)n(v)o(e)h(similar)f(running)h(times,)h
(b)n(ut)f(implementing)g(G)t Ft(R)t(I)t(M)t(P)39 b Fy(and)32
b(its)g(aggre-)300 3676 y(gation)c(is)g(conceptually)h(simpler)-5
b(.)42 b(In)29 b(terms)g(of)g(code)g(generation)g(for)g(Ja)n(v)n(a)g
(virtual)f(machines,)i(we)300 3792 y(belie)n(v)o(e)j(that)g(if)h(one)g
(is)g(interested)f(in)h(generating)g(code)g(for)g(slo)n(w)f(VMs,)j
(then)d(the)j(B)q Ft(A)t(F)r Fy(-lik)o(e)h(ap-)300 3907
y(proach)c(is)g(best.)55 b(F)o(or)32 b(f)o(ast)h(VMs,)i(or)e(if)g(one)g
(desires)f(a)i(simpler)e(compiler)g(implementation,)g(then)302
4023 y(G)t Ft(R)t(I)t(M)t(P)f Fy(is)25 b(more)f(suitable.)300
4405 y Fr(4.4)143 b(Optimization)37 b(via)i(Inlining)300
4674 y Fy(W)-8 b(e)20 b(ha)n(v)o(e)g(selected)g(to)g(in)l(v)o(estigate)
d(the)j(feasibility)f(of)h(optimizing)d(Ja)n(v)n(a)j(bytecode)g(by)f
(implementing)300 4789 y(method)27 b(inlining.)37 b(Our)28
b(approach)g(is)f(simple.)39 b(W)-8 b(e)28 b(b)n(uild)e(an)i(in)l(v)n
(ok)o(e)f(graph)h(using)f(class)g(hierarchy)300 4905
y(analysis[7)o(])h(and)g(inline)e(method)h(calls)g(whene)n(v)o(er)g
(the)o(y)g(resolv)o(e)g(to)g(one)h(method.)38 b(Our)28
b(inliner)f(is)g(a)300 5020 y(bottom-up)f(inliner)l(,)h(and)h(attempts)
e(to)h(inline)g(all)g(call)h(sites)e(subject)h(to)h(the)f(follo)n(wing)
f(restrictions:)300 5136 y(1\))21 b(the)f(method)g(to)h(be)f(inlined)g
(must)g(contain)g(less)g(than)g(20)j(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(statements,)20 b(2\))h(no)g(method)e(may)2050 5509
y(65)p eop
%%Page: 66 74
66 73 bop 469 1678 3262 4 v 467 1798 4 121 v 1024 1798
V 1618 1762 a Fy(B)q Ft(A)t(F)p 2385 1798 V 1124 w Fy(G)t
Ft(R)t(I)t(M)t(P)p 3729 1798 V 469 1801 3262 4 v 467
1922 4 121 v 1024 1922 V 1310 1886 a Fy(Linux)p 1831
1922 V 494 w(NT)p 2385 1922 V 495 w(Linux)p 3192 1922
V 486 w(NT)p 3729 1922 V 467 2042 V 1024 2042 V 1118
2006 a Fd(Sun)139 b(Sun)127 b(Bor)-5 b(.)p 1831 2042
V 140 w(Sun)139 b(Sun)p 2368 2042 V 2385 2042 V 155 w(Sun)g(Sun)127
b(Bor)-5 b(.)p 3192 2042 V 140 w(Sun)138 b(Sun)p 3729
2042 V 467 2163 V 1024 2163 V 1135 2127 a(Int.)157 b(JIT)h(JIT)p
1831 2163 V 157 w(JIT)124 b(Hot.)p 2368 2163 V 2385 2163
V 171 w(Int.)157 b(JIT)h(JIT)p 3192 2163 V 158 w(JIT)123
b(Hot.)p 3729 2163 V 469 2166 3262 4 v 469 2183 V 467
2303 4 121 v 516 2267 a Fz(compr)l(ess)p 1024 2303 V
184 w Fy(1.01)94 b(1.00)144 b(.99)p 1831 2303 V 144 w(.99)94
b(1.00)p 2368 2303 V 2385 2303 V 110 w(1.07)g(1.02)g(1.04)p
3192 2303 V 93 w(1.00)g(1.01)p 3729 2303 V 469 2306 3262
4 v 467 2427 4 121 v 516 2391 a Fz(db)p 1024 2427 V 507
w Fy(.99)g(1.01)g(1.00)p 1831 2427 V 94 w(1.00)g(1.00)p
2368 2427 V 2385 2427 V 110 w(1.01)g(1.05)g(1.01)p 3192
2427 V 93 w(1.01)g(1.02)p 3729 2427 V 469 2430 3262 4
v 467 2550 4 121 v 516 2514 a Fz(jac)n(k)p 1024 2550
V 393 w Fy(1.00)g(1.00)g(1.00)p 1831 2550 V 235 w(-)h(1.00)p
2368 2550 V 2385 2550 V 110 w(1.01)144 b(.99)94 b(1.00)p
3192 2550 V 235 w(-)g(1.00)p 3729 2550 V 469 2554 3262
4 v 467 2674 4 121 v 516 2638 a Fz(javac)p 1024 2674
V 341 w Fy(1.00)144 b(.98)94 b(1.00)p 1831 2674 V 94
w(1.00)143 b(.97)p 2368 2674 V 2385 2674 V 161 w(.99)94
b(1.03)g(1.00)p 3192 2674 V 93 w(1.00)144 b(.95)p 3729
2674 V 469 2677 3262 4 v 467 2798 4 121 v 516 2762 a
Fz(jess)p 1024 2798 V 407 w Fy(1.02)94 b(1.01)g(1.04)p
1831 2798 V 144 w(.99)g(1.01)p 2368 2798 V 2385 2798
V 110 w(1.01)g(1.02)g(1.04)p 3192 2798 V 143 w(.97)g(1.00)p
3729 2798 V 469 2801 3262 4 v 467 2921 4 121 v 516 2885
a Fz(jpat-p)p 1024 2921 V 318 w Fy(1.00)144 b(.99)94
b(1.00)p 1831 2921 V 94 w(1.00)g(1.00)p 2368 2921 V 2385
2921 V 160 w(.99)g(1.01)g(1.01)p 3192 2921 V 93 w(1.00)g(1.00)p
3729 2921 V 469 2925 3262 4 v 467 3045 4 121 v 516 3009
a Fz(mpe)l(gaudio)p 1024 3045 V 117 w Fy(1.05)g(1.00)235
b(-)p 1831 3045 V 236 w(-)95 b(1.00)p 2368 3045 V 2385
3045 V 110 w(1.03)f(1.00)235 b(-)p 3192 3045 V 236 w(-)94
b(1.01)p 3729 3045 V 469 3048 3262 4 v 467 3169 4 121
v 516 3133 a Fz(r)o(aytr)o(ace)p 1024 3169 V 221 w Fy(1.00)g(1.02)g
(1.00)p 1831 3169 V 144 w(.99)g(1.00)p 2368 3169 V 2385
3169 V 110 w(1.01)g(1.00)143 b(.99)p 3192 3169 V 144
w(.99)94 b(1.00)p 3729 3169 V 469 3172 3262 4 v 467 3293
4 121 v 516 3256 a Fz(sc)o(hr)l(oeder)n(-s)p 1024 3293
V 143 w Fy(.97)g(1.01)235 b(-)p 1831 3293 V 95 w(1.03)94
b(1.01)p 2368 3293 V 2385 3293 V 160 w(.98)144 b(.99)235
b(-)p 3192 3293 V 94 w(1.03)94 b(1.00)p 3729 3293 V 469
3296 3262 4 v 467 3416 4 121 v 516 3380 a Fz(soot-c)p
1024 3416 V 363 w Fy(.99)g(1.00)g(1.02)p 1831 3416 V
144 w(.99)g(1.03)p 2368 3416 V 2385 3416 V 110 w(1.00)g(1.01)g(1.00)p
3192 3416 V 93 w(1.01)g(1.01)p 3729 3416 V 469 3420 3262
4 v 469 3436 V 467 3557 4 121 v 516 3520 a(a)n(v)o(erage)p
1024 3557 V 251 w(1.00)g(1.00)g(1.01)p 1831 3557 V 94
w(1.00)g(1.00)p 2368 3557 V 2385 3557 V 110 w(1.01)g(1.01)g(1.01)p
3192 3557 V 93 w(1.00)g(1.00)p 3729 3557 V 469 3560 3262
4 v 467 3680 4 121 v 516 3644 a(std.)30 b(de)n(v)-6 b(.)p
1024 3680 V 274 w(.02)144 b(.01)g(.01)p 1831 3680 V 144
w(.01)f(.01)p 2368 3680 V 2385 3680 V 161 w(.02)h(.02)f(.02)p
3192 3680 V 144 w(.02)h(.02)p 3729 3680 V 469 3684 3262
4 v 300 3843 a(Figure)32 b(4.2:)44 b(The)31 b(ef)n(fect)h(of)g
(processing)f(class\002les)g(with)i(S)t Ft(O)t(O)q(T)k
Fy(using)32 b(B)q Ft(A)t(F)37 b Fy(or)d(G)t Ft(R)t(I)t(M)t(P)r
Fy(,)k(without)300 3963 y(optimization.)2050 5509 y(66)p
eop
%%Page: 67 75
67 74 bop 300 499 a Fy(contain)29 b(more)h(than)g(5000)h(J)t
Ft(I)t(M)t(P)t(L)t(E)36 b Fy(statements,)30 b(and)g(3\))g(no)g(method)e
(may)i(ha)n(v)o(e)g(its)f(size)h(increase)300 615 y(more)25
b(than)f(by)h(a)g(f)o(actor)g(of)g(3.)446 780 y(After)h(inlining,)d
(the)i(follo)n(wing)e(traditional)h(intraprocedural)h(optimizations)d
(are)k(performed)f(to)300 896 y(maximize)f(the)g(bene\002t)i(from)e
(inlining,)445 1144 y Fv(\017)49 b Fy(cop)o(y)24 b(propagation)445
1343 y Fv(\017)49 b Fy(constant)24 b(propagation)f(and)i(folding)445
1541 y Fv(\017)49 b Fy(conditional)23 b(and)i(unconditional)e(branch)i
(folding)445 1740 y Fv(\017)49 b Fy(dead)25 b(assignment)e(elimination)
445 1939 y Fv(\017)49 b Fy(unreachable)25 b(code)g(elimination)300
2187 y(These)g(are)g(described)g(in)f([2])i(and)e(were)i(implemented)d
(in)j(S)t Ft(O)t(O)q(T)k Fy(using)24 b(the)i(S)t Ft(O)t(O)q(T)k
Fy(API.)446 2352 y(Figure)c(4.3)f(gi)n(v)o(es)f(the)h(result)g(of)h
(performing)f(this)f(optimization.)31 b(The)25 b(numbers)g(presented)g
(are)300 2468 y(fractional)g(e)o(x)o(ecution)e(times)h(with)g(respect)h
(to)g(the)f(original)g(e)o(x)o(ecution)f(time)i(of)g(the)f(benchmark)h
(for)300 2583 y(a)k(gi)n(v)o(en)d(platform.)40 b(F)o(or)29
b(the)f(Linux)f(virtual)h(machines,)g(we)g(obtain)g(a)g(signi\002cant)g
(impro)o(v)o(ement)d(in)300 2699 y(speed.)32 b(In)25
b(particular)l(,)g(for)g(the)g(Linux)g(Sun)g(JIT)-7 b(,)25
b(the)g(a)n(v)o(erage)g(ratio)g(is)g(.92)f(which)h(indicates)g(that)f
(the)300 2815 y(a)n(v)o(erage)31 b(running)g(time)f(is)h(reduced)g(by)g
(8\045.)50 b(F)o(or)31 b(raytrace,)i(the)e(results)g(are)h(quite)e
(signi\002cant,)i(as)300 2930 y(we)25 b(obtain)f(a)h(ratio)g(of)g(.62,)
f(a)h(reduction)f(of)h(38\045.)446 3096 y(F)o(or)g(the)g(virtual)g
(machines)f(under)h(NT)-7 b(,)24 b(the)h(a)n(v)o(erage)h(is)e(1.00)h
(or)g(1.01,)f(b)n(ut)h(a)g(number)g(of)g(bench-)300 3211
y(marks)36 b(e)o(xperience)g(a)g(signi\002cant)f(impro)o(v)o(ement.)62
b(F)o(or)36 b(e)o(xample,)h(under)f(the)g(Sun)g(JIT)-7
b(,)35 b Fz(r)o(aytr)o(ace)300 3327 y Fy(yields)42 b(a)h(ratio)g(of)g
(.89,)k(and)c(under)g(HotSpot,)k Fz(javac)p Fy(,)g Fz(jac)n(k)c
Fy(and)g Fz(mpe)l(gaudio)f Fy(yield)g(signi\002cant)300
3442 y(impro)o(v)o(ements.)64 b(Gi)n(v)o(en)35 b(that)i(HotSpot)f
(itself)g(performs)h(dynamic)f(inlining,)i(this)d(indicates)i(that)300
3558 y(our)30 b(static)f(inlining)g(heuristics)g(sometimes)f(capture)i
(opportunities)e(that)i(HotSpot)f(does)h(not.)46 b(Our)300
3673 y(heuristics)31 b(for)h(inlining)e(were)i(also)f(tuned)g(the)h
(Linux)f(VMs,)h(and)g(future)g(e)o(xperimentation)e(could)300
3789 y(produce)25 b(v)n(alues)f(which)g(are)i(better)e(suited)g(for)h
(the)g(NT)g(virtual)f(machines.)446 3954 y(These)h(results)f(are)i
(highly)e(encouraging)g(as)h(the)o(y)g(strongly)e(suggest)h(that)h(a)g
(signi\002cant)f(amount)300 4070 y(of)37 b(impro)o(v)o(ement)d(can)k
(be)f(achie)n(v)o(ed)f(by)g(performing)h(aggressi)n(v)o(e)e
(optimizations)g(which)h(are)i(not)300 4185 y(performed)25
b(by)f(the)h(virtual)f(machines.)2050 5509 y(67)p eop
%%Page: 68 76
68 75 bop 1149 1800 1902 4 v 1147 1920 4 121 v 1705 1920
V 1991 1884 a Fy(Linux)p 2511 1920 V 485 w(NT)p 3049
1920 V 1147 2041 V 1705 2041 V 1799 2004 a Fd(Sun)139
b(Sun)127 b(Bor)-5 b(.)p 2511 2041 V 139 w(Sun)139 b(Sun)p
3049 2041 V 1147 2161 V 1705 2161 V 1815 2125 a(Int.)157
b(JIT)h(JIT)p 2511 2161 V 158 w(JIT)123 b(Hot.)p 3049
2161 V 1149 2164 1902 4 v 1149 2181 V 1147 2301 4 121
v 1197 2265 a Fz(compr)l(ess)p 1705 2301 V 184 w Fy(1.01)143
b(.78)94 b(1.00)p 2511 2301 V 94 w(1.01)144 b(.99)p 3049
2301 V 1149 2305 1902 4 v 1147 2425 4 121 v 1197 2389
a Fz(db)p 1705 2425 V 506 w Fy(.99)94 b(1.01)g(1.00)p
2511 2425 V 94 w(1.00)g(1.00)p 3049 2425 V 1149 2428
1902 4 v 1147 2549 4 121 v 1197 2513 a Fz(jac)n(k)p 1705
2549 V 393 w Fy(1.00)143 b(.98)h(.99)p 2511 2549 V 235
w(-)h(.97)p 3049 2549 V 1149 2552 1902 4 v 1147 2672
4 121 v 1197 2636 a Fz(javac)p 1705 2672 V 390 w Fy(.97)f(.96)g(.97)p
2511 2672 V 94 w(1.11)g(.93)p 3049 2672 V 1149 2676 1902
4 v 1147 2796 4 121 v 1197 2760 a Fz(jess)p 1705 2796
V 456 w Fy(.93)g(.93)94 b(1.01)p 2511 2796 V 144 w(.99)g(1.00)p
3049 2796 V 1149 2799 1902 4 v 1147 2920 4 121 v 1197
2884 a Fz(jpat-p)p 1705 2920 V 367 w Fy(.99)144 b(.99)94
b(1.00)p 2511 2920 V 94 w(1.00)g(1.00)p 3049 2920 V 1149
2923 1902 4 v 1147 3043 4 121 v 1197 3007 a Fz(mpe)l(gaudio)p
1705 3043 V 117 w Fy(1.04)143 b(.96)235 b(-)p 2511 3043
V 236 w(-)145 b(.97)p 3049 3043 V 1149 3047 1902 4 v
1147 3167 4 121 v 1197 3131 a Fz(r)o(aytr)o(ace)p 1705
3167 V 270 w Fy(.76)f(.62)g(.74)p 2511 3167 V 144 w(.89)94
b(1.01)p 3049 3167 V 1149 3171 1902 4 v 1147 3291 4 121
v 1197 3255 a Fz(sc)o(hr)l(oeder)n(-s)p 1705 3291 V 142
w Fy(.97)g(1.00)144 b(.97)p 2511 3291 V 94 w(1.02)94
b(1.06)p 3049 3291 V 1149 3294 1902 4 v 1147 3415 4 121
v 1197 3378 a Fz(soot-c)p 1705 3415 V 362 w Fy(.94)144
b(.94)g(.96)p 2511 3415 V 94 w(1.03)94 b(1.05)p 3049
3415 V 1149 3418 1902 4 v 1149 3435 V 1147 3555 4 121
v 1197 3519 a(a)n(v)o(erage)p 1705 3555 V 300 w(.96)144
b(.92)g(.96)p 2511 3555 V 94 w(1.01)94 b(1.00)p 3049
3555 V 1149 3558 1902 4 v 1147 3679 4 121 v 1197 3642
a(std.)30 b(de)n(v)-6 b(.)p 1705 3679 V 273 w(.07)144
b(.12)g(.08)p 2511 3679 V 144 w(.06)g(.04)p 3049 3679
V 1149 3682 1902 4 v 846 3841 a(Figure)25 b(4.3:)31 b(The)24
b(ef)n(fect)i(of)e(inlining)f(with)h(class)h(hierarchy)g(analysis.)2050
5509 y(68)p eop
%%Page: 69 77
69 76 bop 300 1201 a Fu(Chapter)58 b(5)300 1653 y(The)g(API)300
2208 y Fr(5.1)143 b(Motiv)m(ation)300 2474 y Fy(Much)35
b(of)g(the)g(ef)n(fort)g(in)g(designing)h(S)t Ft(O)t(O)q(T)k
Fy(w)o(as)35 b(spent)g(de\002ning)g(\(and)g(re)n(vising\))f(the)h
(application)300 2590 y(programming)21 b(interf)o(ace)i(\(API\).)g(In)g
(particular)l(,)g(we)f(w)o(anted)h(to)f(design)f(an)i(API)g(with)f(the)
g(follo)n(wing)300 2705 y(attrib)n(utes:)300 2956 y Fs(Useable)49
b Fy(The)35 b(API)h(should)f(be)g(structured)g(in)g(a)h(w)o(ay)g(which)
f(is)g(natural)g(and)h(easy)f(to)g(use.)63 b(The)544
3072 y(comple)o(xity)23 b(of)i(the)g(base)g(system)f(should)g(be)h(k)o
(ept)f(at)i(a)f(minimum,)e(since)h(in)h(compiler)f(w)o(ork)544
3187 y(there)h(is)f(already)h(a)h(great)f(deal)f(of)h(comple)o(xity)-6
b(.)300 3381 y Fs(Extendable)50 b Fy(The)39 b(API)h(should)e(be)h
(structured)f(such)h(that)g(it)f(is)h(easily)f(e)o(xtended,)k(in)c(the)
h(sense)544 3496 y(that)29 b(additional)f(concepts)h(can)g(be)h(added)f
(without)f(interfering)h(with)g(the)g(concepts)g(already)544
3612 y(present.)300 3806 y Fs(General)49 b Fy(The)26
b(API)h(should)e(allo)n(w)g(as)h(much)f(code)i(re-use)f(as)g(possible.)
34 b(In)26 b(particular)l(,)g(we)g(w)o(anted)544 3921
y(an)g(API)h(which)f(allo)n(ws)f(analyses)g(and)h(transformations)f(to)
h(be)g(performed)g(on)g(code)h(without)544 4037 y(kno)n(wing)c(the)i
(speci\002cs)g(of)g(the)f(intermediate)g(representation)g(or)h(as)g
(little)f(as)h(possible.)446 4288 y(W)-8 b(e)26 b(belie)n(v)o(e)e(that)
h(we)h(ha)n(v)o(e)f(achie)n(v)o(ed)g(our)g(goals)g(with)g(the)g(API)h
(presented)g(in)f(this)f(chapter)-5 b(.)33 b(W)-8 b(e)300
4403 y(ha)n(v)o(e)27 b(created)i(an)e(API)h(which)f(we)h(use)g(at)f
(McGill)g(Uni)n(v)o(ersity)e(and)j(which)f(is)g(being)g(used)g(by)g
(other)300 4519 y(institutions)21 b(as)j(well.)30 b(W)-8
b(e)25 b(hope)e(it)h(will)f(be)h(adopted)g(by)f(more)h(research)h
(groups)e(which)h(will)f(enable)300 4634 y(the)j(widespread)g(sharing)g
(of)g(code)h(and)f(e)o(xperimental)f(results)h(to)g(further)g(the)h
(state)f(of)g(research)h(on)300 4750 y(optimizing)c(Ja)n(v)n(a)h
(bytecode.)446 4913 y(This)36 b(chapter)g(is)g(or)n(ganized)g(as)h
(follo)n(ws.)63 b(First,)39 b(we)e(e)o(xplain)e(a)i(fe)n(w)f
(fundamental)f(concepts)300 5028 y(relating)23 b(to)h(the)g(o)o(v)o
(erall)f(API,)h(and)g(then)g(we)g(describe)g(each)g(concept)g(of)g(the)
g(API)h(in)e(detail.)30 b(Finally)-6 b(,)300 5144 y(we)32
b(gi)n(v)o(e)f(\002)n(v)o(e)h(e)o(xample)g(programs)f(written)h(with)h
(S)t Ft(O)t(O)q(T)k Fy(and)32 b(pro)o(vides)f(simple)g(w)o(alkthroughs)
g(of)300 5260 y(the)25 b(code.)2050 5509 y(69)p eop
%%Page: 70 78
70 77 bop 300 502 a Fr(5.2)143 b(Fundamentals)300 771
y Fy(This)22 b(section)g(describes)h(tw)o(o)f(concepts)h(in)h(S)t
Ft(O)t(O)q(T)k Fy(which)22 b(are)i(not)e(speci\002c)i(to)g(S)t
Ft(O)t(O)q(T)k Fy(per)23 b(se,)g(b)n(ut)f(are)300 886
y(important)h(to)i(understand)f(to)g(use)j(S)t Ft(O)t(O)q(T)r
Fy(.)300 1225 y Fp(5.2.1)121 b(V)-7 b(alue)34 b(factories)302
1458 y Fy(S)t Ft(O)t(O)q(T)40 b Fy(mak)o(es)35 b(hea)n(vy)h(use)f(of)h
(the)f Fz(value)h(factory)f Fy(design)f(pattern)i(which)f(is)g
(de\002ned)h(here.)63 b(This)300 1574 y(pattern)23 b(is)f(similar)f(to)
i(the)f(f)o(actory)i(pattern)e([11])h(e)o(xcept)f(we)h(add)g(the)g
(additional)e(restriction)h(that)g(the)300 1689 y(instances)i(returned)
h(are)g(unmodi\002able.)k(This)24 b(mak)o(es)h(the)f(v)n(alues)g(more)g
(important)f(then)i(the)f(actual)300 1805 y(instances.)446
1970 y(The)d(standard)e(name)i(of)f Fq(v\(\))g Fy(is)f(used)h(for)h
(the)f(f)o(actory)g(method)f(which)h(generates)h(the)f(instances.)300
2086 y(The)h Fq(v)g Fy(stands)f(for)h(v)n(alue.)29 b(V)-11
b(alue)21 b(f)o(actories)g(are)g(used)g(in)f(at)h(least)g(tw)o(o)f(dif)
n(ferent)h(w)o(ays:)28 b(to)21 b(implement)300 2201 y(types)d(and)h(to)
f(implement)g(constants.)27 b(F)o(or)19 b(e)o(xample,)g
Fq(RefType.v\("java.lang.String"\))300 2317 y Fy(refers)36
b(to)e(the)h(reference)i(type)e(for)g(strings,)h(and)f
Fq(IntConstant.v\(5\))d Fy(refers)j(to)g(the)g(inte)o(ger)300
2432 y(constant)24 b(5.)446 2598 y(Note)31 b(that)f(the)g(singleton)f
(pattern)h(is)g(a)h(special)f(case)h(of)g(the)f(v)n(alue)g(f)o(actory)h
(pattern)f(that)g(tak)o(es)300 2713 y(no)23 b(ar)n(guments,)h(and)f
(which)g(has)h(the)f(property)h(that)f(the)g(same)h(object)f(is)g
(guaranteed)h(to)f(be)h(returned)300 2829 y(each)h(time.)300
3168 y Fp(5.2.2)121 b(Chain)300 3400 y Fy(The)37 b Fq(Chain)e
Fy(is)i(probably)f(the)g(most)g(useful)g(basic)g(data)h(structure)g(in)
h(S)t Ft(O)t(O)q(T)r Fy(.)69 b(It)37 b(combines)e(the)300
3516 y(functionality)c(of)h(the)g Fq(List)g Fy(and)g(the)h
Fq(Set)f Fy(to)g(pro)o(vide)f(a)i(natural)f(representation)g(of)g(an)h
(ordered)300 3632 y(collection)d(of)g(unique)g(elements.)48
b(T)-8 b(o)30 b(ar)n(gue)i(the)e(necessity)g(of)h(the)g
Fq(Chain)p Fy(,)g(let)f(us)g(consider)h(rep-)300 3747
y(resenting)36 b(a)i(list)d(of)i(statements)f(in)h(a)g(Ja)n(v)n(a)f
(method)g(with)g(a)i Fq(List)p Fy(.)66 b(The)37 b(tw)o(o)f(standard)h
(imple-)300 3863 y(mentations)24 b(of)i Fq(List)g Fy(are)g
Fq(ArrayList)e Fy(and)i Fq(LinkedList)p Fy(.)32 b(Both)26
b(of)g(these)g(implementations)300 3978 y(are)37 b(inadequate)f
(because)h(the)o(y)f(pro)o(vide)f(w)o(orst-case)i(linear)f(time)g
Fq(contains\(Object\))d Fy(and)300 4094 y Fq(remove\(Object\))p
Fy(,)25 b(the)i(latter)f(being)h(used)g(v)o(ery)g(frequently)f(in)h
(order)h(to)e(delete)h(arbitrary)h(ele-)300 4209 y(ments,)c(for)h(e)o
(xample,)f(when)g(performing)h(dead)g(code)g(elimination.)446
4375 y(T)-8 b(o)19 b(achie)n(v)o(e)f(our)h(goals)f(of)h(constant)f
(time)g Fq(add\(Object\))p Fy(,)g Fq(remove\(Object\))p
Fy(,)f(and)h Fq(con-)300 4490 y(tains\(Object\))24 b
Fy(methods,)i(we)h(de\002ne)g(the)g Fq(Chain)f Fy(to)g(be)h
(essentially)f(an)h(ordered)g(collection)300 4606 y(of)34
b(elements)f(which)g(are)i(guaranteed)f(to)f(be)h(unique.)57
b(The)34 b Fq(HashChain)e Fy(is)i(our)f(def)o(ault)h(imple-)300
4722 y(mentation)29 b(of)h(the)g Fq(Chain)p Fy(.)46 b(It)31
b(is)e(essentially)g(a)i Fq(LinkedList)d Fy(augmented)i(with)f(a)i
Fq(HashMap)p Fy(.)300 4837 y(By)d(guaranteeing)g(that)g(the)g(elements)
f(are)i(unique,)f(the)g Fq(HashMap)f Fy(can)h(contain)g(a)g(mapping)f
(from)300 4953 y(element)d(to)f(the)h(link)f(node)h(in)f(the)h
Fq(LinkedList)e Fy(which)i(allo)n(ws)e(for)j(a)f(constant)f(time)g
(implemen-)300 5068 y(tation)h(of)h Fq(contains)e Fy(and)i
Fq(remove)p Fy(.)k(See)d(\002gure)f(5.1)g(for)g(an)g(illustration.)2050
5509 y(70)p eop
%%Page: 71 79
71 78 bop 721 2041 a @beginspecial 0 @llx 0 @lly 331
@urx 184 @ury 3310 @rwi @setspecial
%%BeginDocument: chainPicture.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: chainPicture.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Mon May 15 11:58:47 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 331 184
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-10.0 203.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 4207 m -1000 -1000 l 6412 -1000 l 6412 4207 l cp clip
 0.06299 0.06299 sc
% Arc
7.500 slw
gs  clippath
4900 2351 m 4995 2430 l 4874 2405 l 4996 2464 l 5022 2409 l cp
clip
n 763.9 10975.4 9535.5 -89.7 -63.7 arc
gs col0 s gr
 gr

% arrowhead
n 4900 2351 m 4995 2430 l 4874 2405 l 4887 2378 l 4900 2351 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
3610 2266 m 3645 2385 l 3558 2297 l 3627 2413 l 3678 2383 l cp
clip
n 956.8 3884.8 3078.3 -92.7 -29.2 arc
gs col0 s gr
 gr

% arrowhead
n 3610 2266 m 3645 2385 l 3558 2297 l 3584 2282 l 3610 2266 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
2422 2262 m 2430 2385 l 2365 2280 l 2406 2408 l 2463 2390 l cp
clip
n 771.8 2845.6 1721.0 -88.7 -15.5 arc
gs col0 s gr
 gr

% arrowhead
n 2422 2262 m 2430 2385 l 2365 2280 l 2393 2271 l 2422 2262 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
1111 2357 m 990 2385 l 1083 2304 l 963 2365 l 990 2419 l cp
clip
n 608.2 1467.8 993.5 -78.3 67.4 arc
gs col0 s gr
 gr

% arrowhead
n 1111 2357 m 990 2385 l 1083 2304 l 1097 2331 l 1111 2357 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1035 2835 m 1305 2835 l 1305 3105 l 1035 3105 l cp gs col0 s gr 
% Polyline
n 2025 2835 m 2295 2835 l 2295 3105 l 2025 3105 l cp gs col0 s gr 
% Polyline
n 630 2835 m 900 2835 l 900 3105 l 630 3105 l cp gs col0 s gr 
% Polyline
n 2385 2835 m 2655 2835 l 2655 3105 l 2385 3105 l cp gs col0 s gr 
% Polyline
n 2205 2520 m 2475 2520 l 2475 2790 l 2205 2790 l cp gs col0 s gr 
% Polyline
n 810 2520 m 1080 2520 l 1080 2790 l 810 2790 l cp gs col0 s gr 
% Polyline
n 3510 2520 m 3780 2520 l 3780 2790 l 3510 2790 l cp gs col0 s gr 
% Polyline
n 3330 2835 m 3600 2835 l 3600 3105 l 3330 3105 l cp gs col0 s gr 
% Polyline
n 3690 2835 m 3960 2835 l 3960 3105 l 3690 3105 l cp gs col0 s gr 
% Polyline
n 4680 2835 m 4950 2835 l 4950 3105 l 4680 3105 l cp gs col0 s gr 
% Polyline
n 4995 2835 m 5265 2835 l 5265 3105 l 4995 3105 l cp gs col0 s gr 
% Polyline
n 4815 2520 m 5085 2520 l 5085 2790 l 4815 2790 l cp gs col0 s gr 
% Polyline
gs  clippath
1812 2826 m 1935 2835 l 1822 2885 l 1955 2862 l 1945 2803 l cp
clip
n 1170 2970 m 1935 2835 l gs col0 s gr gr

% arrowhead
n 1812 2826 m 1935 2835 l 1822 2885 l 1817 2856 l 1812 2826 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 540 2385 m 1440 2385 l 1440 3195 l 540 3195 l cp gs col0 s gr 
% Polyline
n 3240 2385 m 4095 2385 l 4095 3195 l 3240 3195 l cp gs col0 s gr 
% Polyline
n 1935 2385 m 2790 2385 l 2790 3195 l 1935 3195 l cp gs col0 s gr 
% Polyline
n 4590 2430 m 5400 2430 l 5400 3195 l 4590 3195 l cp gs col0 s gr 
% Polyline
gs  clippath
3116 2790 m 3240 2790 l 3131 2848 l 3262 2815 l 3247 2757 l cp
clip
n 2520 2970 m 3240 2790 l gs col0 s gr gr

% arrowhead
n 3116 2790 m 3240 2790 l 3131 2848 l 3124 2819 l 3116 2790 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
4466 2788 m 4590 2790 l 4480 2847 l 4611 2816 l 4598 2757 l cp
clip
n 3825 2970 m 4590 2790 l gs col0 s gr gr

% arrowhead
n 4466 2788 m 4590 2790 l 4480 2847 l 4473 2817 l 4466 2788 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
4204 2848 m 4095 2790 l 4219 2790 l 4088 2757 l 4073 2815 l cp
clip
n 4815 2970 m 4095 2790 l gs col0 s gr gr

% arrowhead
n 4204 2848 m 4095 2790 l 4219 2790 l 4211 2819 l 4204 2848 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2898 2895 m 2790 2835 l 2914 2837 l 2783 2802 l 2768 2860 l cp
clip
n 3465 3015 m 2790 2835 l gs col0 s gr gr

% arrowhead
n 2898 2895 m 2790 2835 l 2914 2837 l 2906 2866 l 2898 2895 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
1549 2893 m 1440 2835 l 1564 2835 l 1433 2802 l 1418 2860 l cp
clip
n 2160 3015 m 1440 2835 l gs col0 s gr gr

% arrowhead
n 1549 2893 m 1440 2835 l 1564 2835 l 1556 2864 l 1549 2893 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 585 315 m 585 1890 l gs col0 s gr 
% Polyline
n 180 630 m 1035 630 l gs col0 s gr 
% Polyline
n 180 1575 m 1035 1575 l gs col0 s gr 
% Polyline
n 180 1260 m 1035 1260 l gs col0 s gr 
% Polyline
n 180 945 m 1035 945 l gs col0 s gr 
% Polyline
n 180 315 m 1035 315 l 1035 1890 l 180 1890 l cp gs col0 s gr 
/Times-Roman ff 180.00 scf sf
2295 2745 m
gs 1 -1 sc (B) col0 sh gr
/Times-Roman ff 180.00 scf sf
4905 2745 m
gs 1 -1 sc (D) col0 sh gr
/Times-Roman ff 180.00 scf sf
900 2745 m
gs 1 -1 sc (C) col0 sh gr
/Times-Roman ff 180.00 scf sf
3600 2745 m
gs 1 -1 sc (A) col0 sh gr
/Times-Roman ff 180.00 scf sf
315 540 m
gs 1 -1 sc (C) col0 sh gr
/Times-Roman ff 180.00 scf sf
360 1800 m
gs 1 -1 sc (...) col0 sh gr
/Times-Roman ff 180.00 scf sf
315 855 m
gs 1 -1 sc (A) col0 sh gr
/Times-Roman ff 180.00 scf sf
315 1215 m
gs 1 -1 sc (B) col0 sh gr
/Times-Roman ff 180.00 scf sf
315 1530 m
gs 1 -1 sc (D) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 300 2352 a Fy(Figure)26 b(5.1:)31 b(An)25
b(e)o(xample)g(of)g(a)h Fq(Chain)f Fy(and)g(its)g(implementation)e
(using)h(a)i(doubly)e(link)o(ed)h(list)f(and)300 2473
y(a)h(hash)g(table.)446 2725 y(In)30 b(addition)f(to)h(being)f(a)h
(nice)g(representation)g(for)g(the)g(contents)f(of)h(method)f(bodies)g
(in)i(S)t Ft(O)t(O)q(T)r Fy(,)300 2841 y Fq(Chain)p Fy(s)24
b(are)h(also)g(con)l(v)o(enient)f(for)h(implementing)e(man)o(y)h
(algorithms)f(in)h(compilers.)31 b(A)25 b(prime)f(e)o(x-)300
2956 y(ample)f(of)h(this)e(is)i(the)f(w)o(orklist)f(algorithm)g(for)i
(performing)f(data)h(\003o)n(w)f(analysis.)29 b(In)24
b(this)f(algorithm,)300 3072 y(one)k(must)e(store)h(a)h(list)f(of)g
(nodes)g(to)h(visit)e(in)h(some)g(sort)g(of)h(list.)35
b(When)26 b(visiting)f(a)i(particular)f(node,)300 3187
y(ho)n(we)n(v)o(er)l(,)36 b(one)e(must)g(add)h(all)f(the)h(successors)f
(of)h(that)f(node)h(to)f(the)h(list)e(of)i(nodes)f(to)h(visit.)59
b(It)35 b(is)300 3303 y(preferable)24 b(to)e(not)g(add)h(the)g(same)f
(node)h(twice,)g(thus)f(one)g(must)g(\002rst)h(check)g(for)g
(containment)f(which)300 3418 y(is)j(a)i(linear)f(time)f(operation)g
(on)h(a)g(re)o(gular)g(list,)f(or)h(alternati)n(v)o(ely)-6
b(,)24 b(one)i(must)e(manually)h(maintain)g(an)300 3534
y(additional)h Fq(HashSet)f Fy(with)i(pro)o(vides)e(an)j(alternati)n(v)
o(e)d(representation)i(of)g(the)g(nodes)f(to)h(visit)f(with)300
3649 y(constant)e(time)g Fq(contains\(\))p Fy(.)446 3811
y(W)-8 b(e)29 b(ha)n(v)o(e)g(also)f(noticed)g(that)g(one)h(often)f(w)o
(ants)g(to)g(modify)g(a)h Fq(Chain)e Fy(as)i(it)f(is)g(being)g(tra)n(v)
o(ersed)300 3927 y(with)h(an)h(iterator)-5 b(.)45 b(In)29
b(general,)j(modifying)c(a)i(collection)e(while)i(iterating)e(through)h
(it)g(is)h(bad)f(prac-)300 4042 y(tice)k(because)g(of)g(the)f
(confusing)g(consequences)h(it)f(can)h(ha)n(v)o(e)f(on)h(the)f(current)
h(iterators.)54 b(F)o(or)33 b(this)300 4158 y(reason,)i(if)f(this)e
(occurs,)j(a)f Fq(ConcurrentModificationExcept)o(ion)27
b Fy(is)33 b(thro)n(wn.)55 b(W)-8 b(e)33 b(do)300 4274
y(pro)o(vide,)22 b(ho)n(we)n(v)o(er)l(,)f(a)h(method)f(called)h
Fq(snapshotIterator\(\))c Fy(which)k(copies)g(the)g(contents)f(of)300
4389 y(the)27 b Fq(Chain)e Fy(to)i(a)g(b)n(uf)n(fer)l(,)g(and)g
(returns)f(an)h(iterator)g(of)f(the)h(b)n(uf)n(fer)-5
b(.)36 b(This)26 b(allo)n(ws)g(one)g(to)h(modify)e(the)300
4505 y Fq(Chain)f Fy(while)g(iterating)g(through)g(a)h(static)f(cop)o
(y)h(of)g(it.)300 4879 y Fr(5.3)143 b(API)39 b(Over)q(vie)n(w)300
5144 y Fy(This)30 b(section)f(gi)n(v)o(es)g(an)h(o)o(v)o(ervie)n(w)f
(of)h(the)h(application)e(programming)g(interf)o(ace)h(\(API\).)i(Only)
d(the)300 5260 y(subset)35 b(required)g(to)h(understand)f(the)g(\002)n
(v)o(e)g(e)o(xamples)g(at)g(the)h(end)f(of)h(the)f(chapter)h(is)f(gi)n
(v)o(en.)62 b(The)2050 5509 y(71)p eop
%%Page: 72 80
72 79 bop 300 499 a Fy(complete)24 b(API,)h(which)g(is)f(quite)g(e)o
(xtensi)n(v)o(e,)f(can)i(be)g(found)f(online)g(on)h(our)g(web)g
(site[22)o(].)300 838 y Fp(5.3.1)121 b(Scene)300 1071
y Fy(In)37 b(S)t Ft(O)t(O)q(T)i Fy(the)c(application)e(which)h(is)g
(being)h(analyzed)f(is)g(represented)h(by)g(a)g Fq(Scene)e
Fy(object.)60 b(In)300 1186 y(f)o(act,)28 b(we)g(ha)n(v)o(e)f(made)h
(the)f(simplifying)e(assumption)g(that)i(only)g(one)g(application)g
(will)f(be)i(analyzed)300 1302 y(at)c(a)g(time)f(and)h(so)g(the)g
Fq(Scene)f Fy(object)g(is)h(represented)g(by)g(a)g(singleton)e
(accessed)j(through)e(the)h(static)300 1418 y(method)g
Fq(Scene.v\(\))p Fy(.)29 b(The)24 b Fq(Scene)g Fy(pro)o(vides)g(the)g
(follo)n(wing)f(functionality)-6 b(.)300 1691 y Fq(SootClass)58
b(loadClassAndSupport\(String)c(className\))544 1806
y Fy(Loads)23 b(the)g(gi)n(v)o(en)g(class)g(and)g(resolv)o(es)g(all)g
(the)h(classes)f(necessary)h(to)f(support)g(that)g(class,)h(that)544
1922 y(is,)k(the)g(transiti)n(v)o(e)f(closure)h(of)g(all)g(the)g
(references)i(of)e(classes)g(within)f(the)h(class.)41
b(If)28 b(the)g(class)544 2038 y(cannot)22 b(be)h(found,)g(it)g
(returns)f(a)h(phantom)f(class)h(reference)h(\(phantom)e(classes)h(are)
g(de\002ned)g(in)544 2153 y(the)i(ne)o(xt)e(subsection.\))300
2352 y Fq(Chain)59 b(getApplicationClasses\(\),)54 b(Chain)59
b(getLibraryClasses\(\),)544 2467 y(Chain)g(getContextClasses\(\),)c
(Chain)j(getPhantomClasses\(\))544 2583 y Fy(Returns)30
b(a)h(back)o(ed)f Fq(Chain)f Fy(of)h(application,)h(library)-6
b(,)30 b(conte)o(xt)f(or)h(phantom)f(classes)h(in)g(this)544
2698 y(scene.)h(These)25 b(four)g(types)f(of)h(classes)f(are)i
(described)f(in)f(the)h(ne)o(xt)f(subsection.)300 2897
y Fq(SootClass)58 b(getSootClass\(String)d(className\))544
3013 y Fy(Attempts)22 b(to)h(\002nd)h(and)f(return)h(the)f(gi)n(v)o(en)
f(class)i(within)e(the)h Fq(Scene)p Fy(.)30 b(Thro)n(ws)22
b(an)i(instance)f(of)544 3128 y Fq(RuntimeException)e
Fy(if)k(the)g(class)f(can)h(not)g(be)g(found.)300 3327
y Fq(void)59 b(addClass\(SootClass)d(class\))544 3442
y Fy(Adds)28 b(the)g(gi)n(v)o(en)f(class)h(to)h(the)f
Fq(Scene)p Fy(.)41 b(Thro)n(ws)27 b(an)i(instance)f(of)h
Fq(RuntimeException)544 3558 y Fy(if)c(the)f(class)h(is)f(already)h
(present.)300 3756 y Fq(SootMethod)58 b(getMethod\(String)e
(methodSignature\))544 3872 y Fy(Returns)29 b(the)g Fq(SootMethod)e
Fy(corresponding)h(to)g(the)h(gi)n(v)o(en)e(method)h(signature.)43
b(Thro)n(ws)28 b(a)544 3988 y(runtime)d(e)o(xception)g(if)h(the)g
(method)f(can)i(not)f(be)g(found.)34 b(Method)25 b(signatures)h(are)g
(de\002ned)h(as)544 4103 y(follo)n(ws:)586 4361 y Fk(<)g(cl)r(assN)10
b(ame)29 b Fj(:)f Fk(r)s(etur)s(nT)14 b(y)t(pe)22 b(methodN)10
b(ame)p Fj(\()p Fk(par)s(amT)k(y)t(pe)2911 4376 y Fm(1)2952
4361 y Fk(;)j(:)g(:)g(:)f(;)h(par)s(amT)d(y)t(pe)3671
4376 y Fl(n)3717 4361 y Fj(\))27 b Fk(>)544 4618 y Fy(F)o(or)e(e)o
(xample:)544 4863 y Fo(<java.lang.String:)46 b(java.lang.String)h
(valueOf\(char[],)g(int,)i(int\)>)544 5128 y Fy(is)37
b(the)h(signature)f(for)h(the)g(method)e Fq(valueOf\(\))g
Fy(in)h(the)h(class)g Fq(java.lang.String)544 5244 y
Fy(which)24 b(tak)o(es)h(an)f(array)i(of)f(characters,)g(an)g(inte)o
(ger)l(,)f(and)h(an)f(inte)o(ger)g(and)h(returns)f(a)h
Fq(String)p Fy(.)2050 5509 y(72)p eop
%%Page: 73 81
73 80 bop 300 499 a Fq(SootField)58 b(getField\(String)e
(fieldSignature\))544 615 y Fy(Returns)28 b(the)g Fq(SootField)e
Fy(corresponding)h(to)g(the)h(gi)n(v)o(en)e(\002eld)i(signature.)40
b(Thro)n(ws)27 b(a)h(run-)544 730 y(time)c(e)o(xception)g(if)g(the)h
(\002eld)g(can)g(not)g(be)g(found.)30 b(Field)24 b(signatures)g(are)i
(de\002ned)f(as)g(follo)n(ws:)1475 1005 y Fk(<)j(cl)r(assN)10
b(ame)29 b Fj(:)51 b Fk(ty)t(pe)24 b(f)11 b(iel)r(dN)f(ame)29
b(>)544 1258 y Fy(F)o(or)c(e)o(xample:)1184 1533 y Fk(<)i(j)6
b(av)t(a:l)r(ang)t(:S)g(tr)s(ing)32 b Fj(:)51 b Fk(l)r(ong)27
b(ser)s(ial)r(V)22 b(er)s(sionU)10 b(I)e(D)31 b(>)544
1786 y Fy(is)24 b(a)h(\002eld)g(named)g Fq(serialVersionUID)c
Fy(in)k Fq(String)p Fy(.)300 1984 y Fq(SootClass)58 b(getMainClass\(\))
544 2100 y Fy(Returns)34 b(the)g Fq(SootClass)f Fy(which)g(contains)h
(the)g(entry)g(point)f(for)h(the)h(application)e(being)544
2215 y(analyzed.)e(Thro)n(ws)24 b(a)h(null)f(pointer)g(e)o(xception)f
(if)i(there)g(is)g(no)f(main)g(class)h(set.)300 2413
y Fq(Pack)59 b(getPack\(String)e(packName\))544 2529
y Fy(Returns)25 b(the)g Fq(Pack)f Fy(of)h(transformations)f(by)h(this)f
(name.)31 b(A)25 b Fq(Pack)f Fy(is)h(list)f(of)h Fq(Transform)p
Fy(s)544 2644 y(which)f(encapsulate)h(transformations.)300
2982 y Fp(5.3.2)121 b(SootClass)300 3214 y Fy(Indi)n(vidual)32
b(classes)i(in)g(the)g Fq(Scene)f Fy(are)i(represented)g(by)e
(instances)h(of)g(the)g Fq(SootClass)e Fy(class.)300
3330 y(Note)e(that)g(this)f(includes)g(interf)o(aces)i(as)f(well.)47
b(A)30 b Fq(SootClass)f Fy(contains)g(all)h(the)g(rele)n(v)n(ant)f
(infor)n(-)300 3446 y(mation)24 b(about)g(a)h(Ja)n(v)n(a)g(class,)f
(such)h(as:)300 3715 y Fq(new)59 b(SootClass\(String)d(name,)j(int)g
(modifiers\))544 3830 y Fy(Creates)28 b(a)h Fq(SootClass)c
Fy(with)i(the)h(gi)n(v)o(en)e(name)i(and)f(the)h(set)f(of)h
(modi\002ers.)39 b(Modi\002ers)27 b(are)544 3946 y(described)e(in)f
(section)g(5.3.11.)300 4144 y Fq(int)59 b(getModifiers\(\)/void)d
(setModifiers\(int)g(mods\))544 4259 y Fy(Sets)25 b(the)g(modi\002ers)f
(for)h(this)f(class.)300 4457 y Fq(int)59 b(getName\(\)/void)e
(setName\(String)f(name\))544 4573 y Fy(Sets)25 b(the)g(name)f(for)h
(this)f(class.)300 4770 y Fq(Chain)59 b(getInterfaces\(\))544
4886 y Fy(Returns)40 b(a)h(back)o(ed)1301 4850 y Fc(1)1379
4886 y Fq(Chain)f Fy(of)g(interf)o(aces)h(which)f(are)h(implemented)e
(by)i(this)e Fq(Soot-)544 5001 y(Class)p Fy(.)p 300 5069
1440 4 v 416 5130 a Fa(1)449 5160 y Fd(A)25 b(back)o(ed)e
Fo(Chain)g Fd(is)i(a)f(Chain)g(which,)g(if)g(modi\002ed)f(will)i
(modify)d(the)i(collection)f(of)g(objects)h(that)g(it)h(represents.)300
5260 y(Modifying)18 b(this)j Fo(Chain)e Fd(will)i(modify)e(the)h(set)h
(of)f(interf)o(aces)g(for)f(this)i Fo(SootClass)p Fd(.)2050
5509 y Fy(73)p eop
%%Page: 74 82
74 81 bop 300 499 a Fq(SootClass)58 b(getSuperclass\(\)/void)d
(setSuperclass\(SootClass)g(s\))544 615 y Fy(Returns)25
b(or)g(sets)f(the)h(superclass)f(of)h(this)f(class.)300
813 y Fq(Chain)59 b(getFields\(\))544 929 y Fy(Returns)25
b(a)g(back)o(ed)g Fq(Chain)f Fy(of)h Fq(SootField)p Fy(s)d(which)j(are)
g(present)g(in)f(this)g(class.)300 1127 y Fq(Chain)59
b(getMethods\(\))544 1243 y Fy(Returns)25 b(a)g(back)o(ed)g
Fq(Chain)f Fy(of)h Fq(SootMethod)p Fy(s)d(which)i(are)i(members)e(of)h
(this)f(class.)300 1442 y Fq(void)59 b(addMethod\(SootMethod)c(m\))544
1557 y Fy(Adds)37 b(the)g(gi)n(v)o(en)g(method)f(to)h(this)g(class.)69
b(Thro)n(ws)37 b(a)h(runtime)e(e)o(xception)h(if)g(this)g(method)544
1673 y(already)25 b(belongs)f(to)g Fq(SootClass)p Fy(.)300
1871 y Fq(SootField)58 b(getFieldByName\(String)d(s\))544
1987 y Fy(Returns)29 b(the)f(\002eld)h(gi)n(v)o(en)e(by)h(name.)43
b(Thro)n(ws)27 b(a)i(runtime)f(e)o(xception)f(if)i(there)g(is)f(no)g
(\002eld)h(by)544 2102 y(the)c(gi)n(v)o(en)e(name,)h(or)h(if)g(there)g
(are)h(tw)o(o)e(\002elds)h(with)f(the)h(same)f(name)2996
2066 y Fc(2)300 2301 y Fq(void)59 b(write\(\))544 2417
y Fy(Writes)24 b(this)g(class)h(out)f(to)g(a)i(class\002le)e(named)h
Fq('className.class')300 2728 y Fi(T)-6 b(ypes)29 b(of)e(Classes)300
2960 y Fy(There)j(are)g(four)f(dif)n(ferent)g(types)g(of)h(classes:)39
b(application,)29 b(library)-6 b(,)30 b(conte)o(xt)e(and)i(phantom.)43
b(Each)300 3076 y(type)25 b(of)h(class)f(has)g(a)h(dif)n(ferent)f(role)
g(to)g(play)g(with)g(respect)g(to)g(optimizations)e(and)j
(transformations.)300 3191 y(These)f(role)g(of)g(each)g(class)g(is)f
(set)g(upon)j(S)t Ft(O)t(O)q(T)r Fy(')-5 b(s)27 b(start-up.)445
3464 y Fv(\017)49 b Fy(Application)23 b(classes)i(can)g(be)g(fully)f
(inspected)g(and)h(modi\002ed.)445 3663 y Fv(\017)49
b Fy(Library)33 b(classes)f(can)i(be)f(fully)f(inspected,)i(b)n(ut)e
(not)h(modi\002ed.)54 b(These)33 b(classes)f(are)i(not)e(re-)544
3779 y(generated)26 b(when)g(optimizing)e(the)i(application,)f(b)n(ut)g
(are)i(assumed)e(to)h(be)g(present)g(e)o(xactly)f(as)544
3894 y(is)f(when)h(the)g(application)e(is)i(run.)445
4093 y Fv(\017)49 b Fy(Conte)o(xt)36 b(classes)h(represent)g(classes)g
(for)g(which)g(the)g(implementation)e(is)h(unkno)n(wn.)66
b(The)544 4208 y(signatures)33 b(of)h(all)g(the)g(\002elds,)i(methods)d
(and)h(of)g(the)g(class)g(itself)f(are)i(kno)n(wn,)g(b)n(ut)f(nothing)
544 4324 y(can)j(assumed)e(about)h(the)h(actual)f(implementation)e(of)j
(each)g(method.)64 b(This)36 b(restriction)g(is)544 4439
y(enforced)27 b(in)h(S)t Ft(O)t(O)q(T)r Fy(;)h(accessing)d(the)h
(implementation)c(of)k(a)f(method)g(of)g(a)h(conte)o(xt)e(class)h(will)
544 4555 y(thro)n(w)e(an)h(e)o(xception.)445 4754 y Fv(\017)49
b Fy(Phantom)35 b(classes)h(are)h(those)f(which)f(are)i(kno)n(wn)e(to)h
(e)o(xist)f(\(because)i(the)o(y)e(are)i(referenced)544
4869 y(in)30 b(the)g(constant)g(pool)g(of)g(class\002les\),)i(b)n(ut)g
(S)t Ft(O)t(O)q(T)k Fy(w)o(as)30 b(unable)g(to)g(load)h(.)47
b(This)30 b(occurs)h(with)544 4985 y(obfuscated)c(code,)g(for)h(e)o
(xample.)36 b(Phantom)27 b(classes)g(and)g(re)o(gular)g(classes)g(can)g
(also)g(contain)544 5100 y(phantom)35 b(\002elds)h(and)f(phantom)g
(methods.)63 b(These)36 b(are)h(created)f(whene)n(v)o(er)g(a)g(class)g
(which)p 300 5168 1440 4 v 416 5230 a Fa(2)449 5260 y
Fd(T)-7 b(w)o(o)21 b(\002elds)g(with)f(the)g(name)g(can)g(occur)f(in)h
(a)h Fo(SootClass)p Fd(,)e(as)i(long)e(as)i(the)o(y)e(ha)n(v)o(e)h(dif)
n(ferent)e(types.)2050 5509 y Fy(74)p eop
%%Page: 75 83
75 82 bop 546 499 a Fy(S)t Ft(O)t(O)q(T)29 b Fy(has)c(loaded)g(refers)g
(to)g(\002elds)f(or)h(methods)f(which)g(do)g(not)h(e)o(xist)e(in)i(e)o
(xisting)d(classes)j(or)544 615 y(in)f(a)h(phantom)f(class.)300
954 y Fp(5.3.3)121 b(SootField)300 1186 y Fy(Instances)26
b(of)g(the)f Fq(SootField)f Fy(class)i(represent)g(Ja)n(v)n(a)f
(\002elds.)34 b(The)o(y)25 b(possess)g(at)h(least)g(the)f(follo)n(w-)
300 1302 y(ing)f(methods:)300 1575 y Fq(SootField\(java.lang.String)54
b(name,)59 b(Type)f(type,)h(int)g(modifiers\))544 1691
y Fy(Constructs)30 b(a)h Fq(SootField)e Fy(with)h(the)g(gi)n(v)o(en)g
(name,)i(type)e(and)h(modi\002ers.)48 b(T)-8 b(ypes)30
b(are)i(de-)544 1806 y(scribed)24 b(in)h(subsection)e(5.3.10.)300
2005 y Fq(String)58 b(getName\(\)/void)f(setName\(String\))544
2121 y Fy(Gets)24 b(or)h(sets)g(the)f(name)h(for)g(this)f
Fq(SootField)p Fy(.)300 2319 y Fq(Type)59 b(getType\(\)/void)e
(setType\(Type)g(t\))544 2435 y Fy(Gets)24 b(or)h(sets)g(the)f(type)h
(for)g(this)f Fq(SootField)p Fy(.)300 2633 y Fq(int)59
b(getModifiers\(\)/void)d(setModifiers\(int)g(m\))544
2749 y Fy(Gets)24 b(or)h(sets)g(the)f(modi\002ers)h(for)g(this)f
Fq(SootField)p Fy(.)300 3088 y Fp(5.3.4)121 b(SootMethod)300
3321 y Fy(Instances)27 b(of)g(the)g Fq(SootMethod)e Fy(class)i
(represent)g(Ja)n(v)n(a)g(methods.)37 b(There)27 b(is)g(only)f(one)h
(code)h(rep-)300 3436 y(resentation)k(at)h(gi)n(v)o(en)f(time)g(for)h
(methods)f(and)h(this)f(is)h(represented)g(by)g(the)g(acti)n(v)o(e)f
Fq(Body)g Fy(for)h(the)300 3552 y Fq(SootMethod)p Fy(.)e
Fq(Body)p Fy(s)25 b(are)h(described)g(in)f(subsection)f(5.3.6.)33
b Fq(SootMethod)p Fy(s)23 b(possess)i(the)g(fol-)300
3667 y(lo)n(wing)e(methods:)300 3941 y Fq(SootMethod\(java.lang.String)
54 b(name,)k(java.util.List)f(paramTypes,)544 4056 y(Type)i
(returnType,)e(int)i(modifiers\))544 4172 y Fy(Constructs)24
b(a)h Fq(SootMethod)e Fy(with)h(the)g(gi)n(v)o(en)g(name,)g(type)h(and)
g(modi\002ers.)300 4370 y Fq(String)58 b(getName\(\)/void)f
(setName\(String\))544 4486 y Fy(Gets/sets)24 b(the)g(name)h(for)g
(this)f Fq(SootMethod)p Fy(.)300 4684 y Fq(Type)59 b
(getReturnType\(\)/void)c(setReturnType\(Type)h(t\))544
4800 y Fy(Gets/sets)24 b(the)g(return)h(type)f(for)i(this)d
Fq(SootMethod)p Fy(.)300 4999 y Fq(List)59 b(getParameterTypes\(\))544
5114 y Fy(Returns)25 b(a)g(back)o(ed)g(list)f(of)h(parameters)g(types)f
(for)h(this)f Fq(SootMethod)p Fy(.)2050 5509 y(75)p eop
%%Page: 76 84
76 83 bop 300 499 a Fq(int)59 b(getModifiers\(\)/void)d
(setModifiers\(int)g(m\))544 615 y Fy(Gets/sets)24 b(the)g(modi\002ers)
g(for)i(this)d Fq(SootMethod)p Fy(.)300 813 y Fq(boolean)58
b(isConcrete\(\))544 929 y Fy(Returns)25 b(true)g(if)f(this)g(method)g
(can)h(ha)n(v)o(e)g(a)g(body)-6 b(.)300 1128 y Fq(Body)59
b(getActiveBody\(\)/void)c(setActiveBody\(Body)h(b\))544
1243 y Fy(Returns)42 b(the)g(current)g(acti)n(v)o(e)f(body)g(for)h
(this)f(method,)k(thro)n(ws)c(an)h(e)o(xception)f(if)g(there)i(is)544
1359 y(none/sets)24 b(the)g(acti)n(v)o(e)g(body)g(to)h(the)f(gi)n(v)o
(en)g(body)-6 b(.)300 1557 y Fq(Body)59 b(retrieveActiveBody\(\))544
1673 y Fy(Returns)22 b(the)g(current)g(acti)n(v)o(e)f(body)g(for)h
(this)f(method,)h(or)g(the)f(def)o(ault)h Fq(JimpleBody)e
Fy(if)i(there)544 1788 y(is)i(none.)300 2127 y Fp(5.3.5)121
b(Intermediate)36 b(representations)300 2360 y Fy(The)25
b(three)g(intermediate)e(representations)j(B)q Ft(A)t(F)r
Fy(,)k(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)h(G)t Ft(R)t(I)t(M)t(P)h
Fy(are)25 b(referred)h(by)f(the)f(follo)n(wing)300 2476
y(three)k(singletons:)35 b Fq(Baf.v\(\))p Fy(,)28 b Fq(Jimple.v\(\))e
Fy(and)i Fq(Grimp.v\(\))p Fy(.)38 b(These)28 b(intermediate)f(repre-)
300 2591 y(sentation)21 b(singletons)g(are)i(used)g(to)f(create)h
(objects)f(belonging)f(to)i(the)f(intermediate)g(representation,)300
2707 y(such)d(as)g Fq(Local)p Fy(s,)f Fq(Trap)p Fy(s,)h(or)g(e)o
(xpressions.)27 b(F)o(or)19 b(e)o(xample,)g Fq
(Jimple.v\(\).newLocal\("a",)300 2822 y(IntType.v\(\)\))j
Fy(creates)k(a)f Fq(Jimple)e Fy(local)i(v)n(ariable)f(of)h(type)g(inte)
o(ger)-5 b(.)300 3161 y Fp(5.3.6)121 b(Bod)n(y)300 3394
y Fy(The)24 b(implementation)e(of)i(the)g(method)f(is)g(represented)h
(by)g(an)g(implementation)e(of)i(the)g Fq(Body)f Fy(inter)n(-)300
3509 y(f)o(ace.)35 b(There)27 b(are)g(multiple)d(implementations)f(for)
k Fq(Body)p Fy(,)e(one)h(for)h(each)f(intermediate)f(representa-)300
3625 y(tion:)42 b Fq(JimpleBody)p Fy(,)30 b Fq(BafBody)f
Fy(and)i Fq(GrimpBody)p Fy(.)46 b(There)32 b(is)e(also)g(a)h
Fq(StmtBody)f Fy(interf)o(ace)300 3741 y(which)22 b(is)g(implemented)f
(by)h Fq(JimpleBody)f Fy(and)h Fq(GrimpBody)f Fy(which)h(allo)n(ws)f
(methods)h(to)g(tar)n(get)300 3856 y(both)k(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(code)25 b(and)i(G)t Ft(R)t(I)t(M)t(P)32 b Fy(code)25
b(simultaneously)-6 b(.)300 4129 y Fq(Chain)59 b(getLocals\(\))544
4245 y Fy(Returns)25 b(a)g(back)o(ed)g(chain)g(of)f(the)h
Fq(Local)p Fy(s)f(in)g(this)g(method.)300 4444 y Fq(Chain)59
b(getTraps\(\))544 4559 y Fy(Returns)25 b(a)g(back)o(ed)g(chain)g(of)f
(the)h Fq(Trap)p Fy(s)f(in)g(this)g(method.)300 4758
y Fq(PatchingChain)57 b(getUnits\(\))544 4873 y Fy(Returns)28
b(a)g(back)o(ed)g(patching)f(chain)g(of)h(the)g Fq(Unit)p
Fy(s)e(in)i(this)f(method.)38 b Fq(PatchingChain)p Fy(s)544
4989 y(are)25 b(described)g(in)g(subsection)e(5.3.15.)2050
5509 y(76)p eop
%%Page: 77 85
77 84 bop 300 499 a Fp(5.3.7)121 b(Local)300 732 y Fy(Instances)25
b(of)g(the)f Fq(Local)g Fy(class)h(represent)g(local)f(v)n(ariables.)
300 1005 y Fq(String)58 b(getName\(\)/)g(void)h(setName\(String)d(s\))
544 1121 y Fy(Gets)24 b(or)h(sets)g(the)f(name)h(of)g(the)g(local)f(v)n
(ariable.)300 1319 y Fq(Type)59 b(getType\(\)/)e(void)i(setType\(Type)e
(t\))544 1435 y Fy(Gets)18 b(or)h(sets)g(the)g(type)f(of)h(the)g(local)
g(v)n(ariable.)28 b(The)19 b(types)f(a)n(v)n(ailable)g(depend)h(on)g
(the)f(particular)544 1550 y(intermediate)24 b(representation)g(used.)
446 1824 y(Locals)30 b(are)g(created)h(with)e(the)h(method)f
Fq(newLocal\(String)56 b(name,)j(Type)g(t\))29 b Fy(called)300
1939 y(on)23 b(the)h(intermediate)e(representation)i(singleton.)k(F)o
(or)c(e)o(xample,)f Fq(Baf.v\(\).newLocal\("a",)300 2055
y(WordType.v\(\)\))f Fy(creates)j(a)j(B)q Ft(A)t(F)i
Fy(local)24 b(v)n(ariable)g(named)h(\224a\224)h(with)e(type)g
Fq(word.)300 2394 y Fp(5.3.8)121 b(T)-10 b(rap)300 2627
y Fy(Instances)21 b(of)h(the)f Fq(Trap)g Fy(class)g(represent)h(e)o
(xception)f(handler)g(traps.)30 b(At)21 b(the)g(Ja)n(v)n(a)g(le)n(v)o
(el,)g(e)o(xceptions)300 2742 y(are)31 b(represented)f(by)g(try-catch)g
(blocks.)46 b(At)30 b(the)g(bytecode)f(le)n(v)o(el,)h(e)o(xceptions)f
(are)i(represented)f(by)300 2858 y(e)o(xplicit)d(be)o(gin/end)g(catch)i
(ranges.)41 b Fq(Trap)p Fy(s)28 b(represent)g(these)h(e)o(xplicit)e
(ranges.)41 b(See)30 b(\002gure)f(5.2)f(for)300 2973
y(an)d(illustration.)300 3247 y Fq(Unit)59 b(getBeginUnit\(\),)d(void)j
(setBeginUnit\(Unit)d(u\))544 3362 y Fy(Gets)24 b(or)h(sets)g(the)f(be)
o(ginning)f(unit)h(of)h(the)g(e)o(xception)e(trap.)300
3561 y Fq(Unit)59 b(getEndUnit\(\),)e(void)i(setEndUnit\(Unit)d(u\))544
3676 y Fy(Gets)24 b(or)h(sets)g(the)f(ending)g(unit)g(of)h(the)g(e)o
(xception)f(trap.)300 3875 y Fq(Unit)59 b(getHandlerUnit\(\),)d(void)j
(setHandlerUnit\(Unit)c(u\))544 3990 y Fy(Gets)24 b(or)h(sets)g(the)f
(handling)g(unit)g(of)h(the)f(e)o(xception)g(trap.)300
4189 y Fq(SootClass)58 b(getException\(\),)e(void)j
(setException\(SootClass)c(c\))544 4305 y Fy(Gets)24
b(or)h(sets)g(the)f(e)o(xception)g(class)h(to)f(trap.)446
4578 y(T)m(raps)d(are)h(created)g(with)e(the)h(method)g
Fq(newTrap\(a,)57 b(b,)j(c,)f(d\))21 b Fy(called)g(on)g(the)g
(intermedi-)300 4693 y(ate)h(representation)g(singleton.)28
b(F)o(or)22 b(e)o(xample,)f Fq(Baf.v\(\).newTrap\(a,)56
b(b,)j(c,)h(d\))21 b Fy(creates)300 4809 y(a)27 b(B)q
Ft(A)t(F)j Fy(trap)25 b(which)f(catches)h(e)o(xceptions)f(of)h(type)f
Fq(d)h Fy(thro)n(wn)f(between)g Fq(a)h Fy(and)g Fq(b)g
Fy(with)f(handler)g Fq(c)p Fy(.)2050 5509 y(77)p eop
%%Page: 78 86
78 85 bop 420 2233 a Fo(public)49 b(void)g(f\(\))420
2315 y({)520 2397 y(try)g({)619 2478 y(System.out.)819
2560 y(println\("trying..."\);)520 2642 y(})g(catch\(Exception)e(e\))
520 2723 y({)619 2805 y(System.out.)819 2887 y
(println\("Exception!"\);)520 2969 y(})420 3050 y(})p
2038 3672 4 2107 v 2160 1621 a(public)i(void)g(f\(\))2160
1702 y({)2359 1784 y(Test)g(r0;)2359 1866 y(java.io.PrintStream)e($r1,)
i($r3;)2359 1947 y(java.lang.Exception)e($r2;)2359 2111
y(r0)j(:=)f(@this;)2210 2274 y(label0:)2359 2356 y($r1)g(=)h
(java.lang.System.out;)2359 2438 y($r1.println\("trying..."\);)2210
2601 y(label1:)2359 2683 y(goto)f(label3;)2210 2846 y(label2:)2359
2928 y($r2)g(:=)h(@caughtexception;)2359 3009 y($r3)f(=)h
(java.lang.System.out;)2359 3091 y($r3.println\("Exception!"\);)2210
3254 y(label3:)2359 3336 y(return;)2359 3500 y(catch)f
(java.lang.Exception)d(from)2459 3581 y(label0)j(to)g(label1)g(with)g
(label2;)2160 3663 y(})p 2038 3792 4 121 v 990 3877 a
Fy(bytecode)p 2038 3913 V 1452 w(J)t Ft(I)t(M)t(P)t(L)t(E)31
b Fy(code)1203 4072 y(Figure)25 b(5.2:)31 b(An)24 b(e)o(xample)g(of)h
(an)g(e)o(xception)f(trap.)2050 5509 y(78)p eop
%%Page: 79 87
79 86 bop 300 499 a Fp(5.3.9)121 b(Unit)300 729 y Fy(The)32
b Fq(Unit)g Fy(interf)o(ace)h(is)f(the)g(most)g(fundamental)f(interf)o
(ace)i(in)h(S)t Ft(O)t(O)q(T)j Fy(as)c(it)f(is)g(used)g(to)g(represent)
300 845 y(instructions)c(or)i(statements.)45 b(In)32
b(B)q Ft(A)t(F)j Fy(these)30 b(are)g(stack)g(based)g(instructions)e
(such)i(as)g Fq(PushInst)300 960 y Fy(and)39 b Fq(AddInst)p
Fy(,)i(and)f(in)h(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(the)39
b(le)o(gal)f Fq(Unit)p Fy(s)h(are)h(3-address)f(code)g(statements)f
(such)h(as)300 1076 y Fq(AssignStmt)23 b Fy(and)h Fq(InvokeStmt)p
Fy(.)446 1239 y(These)f(are)g(created)h(through)e(methods)f(such)i(as)f
Fq(newXXX)g Fy(on)g(the)h(intermediate)f(representation)300
1354 y(singleton.)29 b(F)o(or)c(e)o(xample,)f(on)g(the)h
Fq(Baf.v\(\))e Fy(singleton)h(the)g(follo)n(wing)f(methods)h(can)h(be)g
(called:)300 1603 y Fq(AddInst)58 b(newAddInst\(Type)f(opType\))544
1719 y Fy(Creates)26 b(a)h(B)q Ft(A)t(F)j Fy(add)24 b(instruction)f
(which)i(deals)g(with)f(operands)g(of)h(type)f Fq(opType)p
Fy(.)300 1912 y Fq(DivInst)58 b(newDivInst\(Type)f(opType\))544
2027 y Fy(Creates)26 b(a)h(B)q Ft(A)t(F)j Fy(di)n(vide)23
b(instruction)g(which)i(deals)f(with)g(operands)h(of)g(type)f
Fq(opType)p Fy(.)300 2276 y(And)g(on)h(the)g Fq(Jimple.v\(\))d
Fy(singleton)i(we)h(can)g(call)g(methods)e(such)i(as:)300
2525 y Fq(IdentityStmt)57 b(newIdentityStmt\(Value)e(local,)k(Value)f
(identityRef\))544 2756 y Fy(Creates)26 b(an)f(identity)e(statement)h
(of)h(the)f(form)h Fq(local)58 b(:=)i(identityRef)p Fy(.)300
2949 y Fq(AssignStmt)e(newAssignStmt\(Value)d(lvalue,)j(Value)h
(rvalue\))544 3065 y Fy(Creates)26 b(an)f(assignment)e(statement)g(of)i
(the)g(form)g Fq(lvalue)58 b(=)i(rvalue)p Fy(.)300 3258
y Fq(InvokeStmt)e(newInvokeStmt\(InvokeExpr)c(e\))544
3374 y Fy(Creates)26 b(an)f(in)l(v)n(ok)o(e)f(statement)f(for)i(the)g
(gi)n(v)o(en)e(in)l(v)n(ok)o(e)i(e)o(xpression.)300 3567
y Fq(ReturnVoidStmt)57 b(newReturnVoidStmt\(\))544 3682
y Fy(Creates)26 b(a)f(return)g(v)n(oid)f(statement.)300
3931 y(The)h Fq(Unit)f Fy(interf)o(ace)h(contains)f(the)h(follo)n(wing)
e(methods:)300 4180 y Fq(boolean)58 b(branches\(\))544
4295 y Fy(Returns)28 b(true)f(if)h(this)f Fq(Unit)g Fy(has)g(the)h
(possibility)d(of)j(branching)f(to)g(another)h Fq(Unit)p
Fy(,)g(such)f(as)544 4411 y(is)d(the)h(case)g(with)f
Fq(goto)p Fy(s.)300 4604 y Fq(Object)58 b(clone\(\))544
4720 y Fy(Returns)25 b(a)g(clone)g(of)f(this)g Fq(Unit.)300
4913 y(boolean)58 b(fallsThrough\(\))544 5028 y Fy(Returns)29
b(true)g(if)h(this)e Fq(Unit)g Fy(has)h(the)g(possibility)e(of)i(f)o
(alling)g(through)f(to)h(the)g(ne)o(xt)f Fq(Unit)g Fy(in)544
5144 y(the)f Fq(Chain)p Fy(,)f(such)h(as)h(is)e(the)h(case)h(with)e(an)
i(if-statement)e(or)h(a)h Fq(nop)e Fy(statement,)h(as)g(opposed)544
5260 y(to)d(a)h Fq(goto)f Fy(statement)g(which)h(does)f(not)g(f)o(all)h
(through.)2050 5509 y(79)p eop
%%Page: 80 88
80 87 bop 300 499 a Fq(List)59 b(getBoxesPointingToThis\(\))544
615 y Fy(Returns)29 b(a)g(list)f(of)h Fq(Unit)f(Box)p
Fy(es)g(containing)g(pointers)g(to)h(this)f Fq(Unit)p
Fy(.)42 b Fq(Box)p Fy(es)28 b(are)i(de\002ned)544 730
y(in)24 b(subsection)g(5.3.14.)300 929 y Fq(List)59 b(getDefBoxes\(\))
544 1045 y Fy(Returns)25 b(a)g(list)f(of)g Fq(Value)g(Box)p
Fy(es)h(which)f(contain)g(de\002nitions)g(of)h(v)n(alues)f(in)g(this)g
Fq(Unit)p Fy(.)300 1243 y Fq(List)59 b(getUnitBoxes\(\))544
1359 y Fy(Returns)25 b(the)f(list)g(of)h Fq(Unit)f(Box)p
Fy(es)g(which)h(contains)f Fq(Unit)p Fy(s)f(referenced)k(in)d(this)g
Fq(Unit)p Fy(.)300 1557 y Fq(List)59 b(getUseAndDefBoxes\(\))544
1673 y Fy(Returns)24 b(a)g(list)f(of)g Fq(Value)g(Box)p
Fy(es)g(which)h(contains)f(both)g(de\002nitions)f(and)i(uses)g(of)g(v)n
(alues)e(in)544 1788 y(this)i Fq(Unit)p Fy(.)300 1987
y Fq(List)59 b(getUseBoxes\(\))544 2103 y Fy(Returns)25
b(a)g(list)f(of)g Fq(Value)g(Box)p Fy(es)h(which)f(contains)g(v)n(alue)
g(uses)h(in)f(this)g Fq(Unit)p Fy(.)300 2301 y Fq(List)59
b(redirectJumpsToThisTo\(Unit)54 b(newLocation\))544
2417 y Fy(Redirects)31 b(all)f(jumps)f(to)i(this)e Fq(Unit)h
Fy(to)g(the)g(gi)n(v)o(en)g Fq(Unit)p Fy(.)47 b(This)29
b(functionality)g(is)h(possible)544 2532 y(because)25
b(backpointers)f(to)h(this)e Fq(Unit)h Fy(are)i(k)o(ept.)446
2806 y(Being)39 b(able)f(to)g(in)l(v)n(ok)o(e)g(these)g(methods)g(on)g
Fq(Unit)p Fy(s)f(without)g(kno)n(wing)g(the)h(particular)g(type)300
2921 y(of)d Fq(Unit)e Fy(is)i(one)f(of)h(the)f(features)h(of)i(S)t
Ft(O)t(O)q(T)i Fy(which)34 b(allo)n(ws)g(us)g(to)g(write)g(compact)g
(analysis)g(and)300 3037 y(optimization)23 b(code)i(which)f(is)g(also)h
(general.)300 3376 y Fp(5.3.10)122 b(T)-7 b(ype)300 3608
y Fy(T)f(ypes)36 b(in)i(S)t Ft(O)t(O)q(T)i Fy(are)d(represented)g(with)
e(the)h(v)n(alue)g(f)o(actory)g(pattern.)64 b(Dif)n(ferent)36
b(conte)o(xts)f(allo)n(w)300 3724 y(dif)n(ferent)24 b(types)h(to)f(be)h
(used.)30 b(In)d(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)j(we)25
b(ha)n(v)o(e)f(the)h(follo)n(wing)e(types:)445 3997 y
Fv(\017)49 b Fz(Base)24 b(types:)544 4237 y Fq(BooleanType.v\(\))p
Fy(,)d Fq(ByteType.v\(\))p Fy(,)h Fq(CharType.v\(\))p
Fy(,)h Fq(DoubleType.v\(\))p Fy(,)544 4353 y Fq(FloatType.v\(\))p
Fy(,)f Fq(IntType.v\(\))p Fy(,)g Fq(LongType.v\(\))p
Fy(,)g Fq(ShortType.v\(\))p Fy(,)544 4468 y Fq(VoidType.v\(\))445
4709 y Fv(\017)49 b Fq(ArrayType.v\(a,b\))21 b Fy(where)k
Fq(a)g Fy(is)f(the)g(base)h(type)f(of)h(the)g(array)g(and)g
Fq(b)f Fy(is)g(the)h(number)f(of)544 4824 y(dimensions.)1025
4788 y Fc(3)p 300 4892 1440 4 v 416 4953 a Fa(3)449 4984
y Fd(Unfortunately)-5 b(,)15 b(when)h(the)g(types)h(were)f(designed)g
Fo(ArrayType)f Fd(w)o(as)j(not)e(made)g(a)h(sub)g(class)h(of)e
Fo(RefType)g Fd(which)300 5083 y(it)26 b(turns)g(out)f(to)h(ha)n(v)o(e)
f(been)g(a)i(mistak)o(e.)41 b(Ho)n(we)n(v)o(er)m(,)25
b(since)h(there)f(are)h(man)o(y)f(users)h(of)h(S)t Fc(O)t(O)q(T)r
Fd(,)h(we)e(ha)n(v)o(e)f(chosen)g(not)g(to)300 5183 y(change)19
b(the)h(API)h(at)f(this)h(time.)2050 5509 y Fy(80)p eop
%%Page: 81 89
81 88 bop 445 499 a Fv(\017)49 b Fq(RefType.v\(a\))27
b Fy(where)j Fq(a)g Fy(is)f(the)g(name)h(of)f(the)h(class)f(for)h
(which)f(this)g(is)g(a)h(reference)i(to.)544 615 y(Note)24
b(this)g(is)h(distinct)e(from)i(a)g(reference)h(to)f(a)g
Fq(SootClass)e Fy(object.)446 888 y(P)o(arameters)28
b(of)g(methods)f(and)h(\002elds)f(can)i(ha)n(v)o(e)e(an)o(y)g(of)h(the)
g(abo)o(v)o(e)f(types.)39 b(A)28 b(local)f(v)n(ariable)g(in)302
1004 y(J)t Ft(I)t(M)t(P)t(L)t(E)35 b Fy(may)27 b(only)h(be)g(gi)n(v)o
(en)f(basic)h(Ja)n(v)n(a)g(V)-6 b(irtual)27 b(Machine)h(types;)h
(booleans,)f(shorts,)g(bytes,)g(and)300 1119 y(chars)i(are)g(not)f
(allo)n(wed.)45 b(But)29 b(there)h(is)g(an)f(additional)g(type)g
(called)h(null)e(\()p Fq(NullType.v\(\)\))p Fy(.)43 b(In)302
1235 y(B)q Ft(A)t(F)r Fy(,)26 b(local)21 b(v)n(ariables)h(can)g(only)f
(ha)n(v)o(e)h(one)g(of)g(tw)o(o)f(types:)29 b Fq(WordType.v\(\))19
b Fy(or)j Fq(DoubleWord-)300 1350 y(Type.v\(\))p Fy(.)300
1689 y Fp(5.3.11)122 b(Modi\002er)300 1922 y Fy(Modi\002ers)24
b(are)i(represented)f(by)g(\002nal)g(static)f(inte)o(ger)g(constants:)
445 2195 y Fv(\017)49 b Fy(Modi\002er)-5 b(.ABSTRA)l(CT)445
2394 y Fv(\017)49 b Fy(Modi\002er)-5 b(.FIN)m(AL)445
2592 y Fv(\017)49 b Fy(Modi\002er)-5 b(.INTERF)e(A)l(CE)445
2791 y Fv(\017)49 b Fy(Modi\002er)-5 b(.N)m(A)-11 b(TIVE)445
2990 y Fv(\017)49 b Fy(Modi\002er)-5 b(.PRIV)-13 b(A)i(TE)445
3188 y Fv(\017)49 b Fy(Modi\002er)-5 b(.PR)l(O)l(TECTED)445
3387 y Fv(\017)49 b Fy(Modi\002er)-5 b(.PUBLIC)445 3585
y Fv(\017)49 b Fy(Modi\002er)-5 b(.ST)c(A)e(TIC)445 3784
y Fv(\017)49 b Fy(Modi\002er)-5 b(.SYNCHR)l(ONIZED)445
3983 y Fv(\017)49 b Fy(Modi\002er)-5 b(.TRANSIENT)445
4181 y Fv(\017)49 b Fy(Modi\002er)-5 b(.V)l(OLA)-11 b(TILE)446
4455 y(Modi\002ers)25 b(can)g(be)g(mer)n(ged)g(together)f(by)h
(\224or\224ing)f(their)h(v)n(alues.)2050 5509 y(81)p
eop
%%Page: 82 90
82 89 bop 300 499 a Fp(5.3.12)122 b(V)-7 b(alue)300 732
y Fy(The)29 b Fq(Value)f Fy(is)g(an)h(interf)o(ace)g(which)g(is)f
(implemented)f(by)i(objects)f(which)h(represent)g(productions)300
847 y(or)37 b(lea)n(v)o(es)f(in)g(the)h(grammar)f(of)h(the)g
(intermediate)f(representation,)j(and)d(which)h(are)g(not)f
Fq(Unit)p Fy(s.)300 963 y(In)c(J)t Ft(I)t(M)t(P)t(L)t(E)r
Fy(,)k(some)30 b(e)o(xamples)f(of)h Fq(Value)p Fy(s)e(are)j
Fq(Constant)p Fy(s)d(and)j(subclasses)e(of)h Fq(Expr)f
Fy(such)h(as)300 1079 y Fq(AddExpr)24 b Fy(which)h(represent)h(the)g
(addition)e(of)h(tw)o(o)h(dif)n(ferent)f Fq(Value)p Fy(s.)32
b(Instances)25 b(of)h(the)f Fq(Value)300 1194 y Fy(can)g(be)g(created)h
(through)e(the)g(singleton)f Fq(Jimple.v\(\))p Fy(:)300
1467 y Fq(newParameterRef\(Type)55 b(type,)k(int)g(n\))544
1583 y Fy(Constructs)34 b(a)h(parameter)g(reference)i(v)n(alue)d(of)h
(the)g(gi)n(v)o(en)e(type)h(with)h(the)f(gi)n(v)o(en)g(ar)n(gument)544
1699 y(number)l(,)24 b(where)h(the)g(ar)n(guments)f(are)i(numbered)e
(starting)g(at)h(0.)300 1897 y Fq(newStaticFieldRef\(SootField)54
b(f\))544 2013 y Fy(Constructs)24 b(a)h(static)f(\002eld)h(reference)i
(v)n(alue)d(to)g(the)h(gi)n(v)o(en)e(\002eld.)300 2211
y Fq(newVirtualInvokeExpr\(Local)54 b(base,)59 b(SootMethod)e(method,)h
(List)h(args\))544 2442 y Fy(Constructs)38 b(a)h(virtual)f(in)l(v)n(ok)
o(e)g(e)o(xpression)f(on)i(the)f(gi)n(v)o(en)f(recei)n(v)o(er)i(to)f
(the)h(gi)n(v)o(en)e(method)544 2558 y(with)24 b(the)h(gi)n(v)o(en)e
(ar)n(guments.)300 2757 y Fq(newVirtualInvokeExpr\(Local)54
b(base,)59 b(SootMethod)e(m,)i(Value)g(arg\))544 2872
y Fy(Constructs)21 b(a)i(virtual)e(in)l(v)n(ok)o(e)g(e)o(xpression)g
(on)h(the)g(gi)n(v)o(en)f(recei)n(v)o(er)h(to)f(the)h(gi)n(v)o(en)f
(method)g(with)544 2988 y(a)k(single)f(parameter)-5 b(.)300
3186 y Fq(newAddExpr\(Value)56 b(leftOp,)i(Value)h(rightOp\))544
3302 y Fy(Constructs)24 b(an)h(add)g(e)o(xpression)e(v)n(alue)h(for)h
(the)g(gi)n(v)o(en)e(v)n(alues.)300 3575 y(The)i(follo)n(wing)e
(methods)g(are)j(pro)o(vided)d(for)i(all)g Fq(Value)p
Fy(s:)300 3849 y Fq(Object)58 b(clone\(\))544 3964 y
Fy(Returns)25 b(a)g(clone)g(of)f(this)g Fq(Value)p Fy(.)300
4163 y Fq(Type)59 b(getType\(\))544 4278 y Fy(Returns)25
b(the)h(S)t Ft(O)t(O)q(T)k Fy(type)24 b(for)i(this)d
Fq(Value)p Fy(.)300 4477 y Fq(List)59 b(getUseBoxes\(\))544
4592 y Fy(Returns)25 b(a)g(list)f(of)g Fq(ValueBox)p
Fy(es)g(containing)f(the)i(v)n(alues)f(used)g(in)h(this)f
Fq(Value)p Fy(.)446 4866 y(Note)32 b(that)g(there)g(is)f(no)h(method)f
(named)h Fq(getDefBoxes\(\))d Fy(for)j Fq(Value)p Fy(.)51
b(This)31 b(is)h(because)300 4981 y Fq(Value)p Fy(s)24
b(ne)n(v)o(er)g(ha)n(v)o(e)g(an)o(y)h(de\002nition)e(side)i(ef)n
(fects,)g(unlik)o(e)f Fq(Unit)p Fy(s.)2050 5509 y(82)p
eop
%%Page: 83 91
83 90 bop 300 499 a Fp(5.3.13)122 b(Constants)300 732
y Fy(Constants)37 b(are)h(represented)g(with)f(the)g(v)n(alue)g(f)o
(actory)h(pattern.)69 b(These)38 b(implement)e(the)h
Fq(Value)300 847 y Fy(interf)o(ace.)349 1121 y Fq(IntConstant.v\(a\))
349 1319 y(FloatConstant.v\(a\))349 1518 y(DoubleConstant.v\(a\))349
1717 y(LongConstant.v\(a\))349 1915 y(NullConstant.v\(\))349
2114 y(StringConstant.v\(a\))p Fy(.)300 2453 y Fp(5.3.14)122
b(Bo)l(x)300 2685 y Fy(One)30 b(of)h(the)f(fundamental)g(concepts)g(in)
i(S)t Ft(O)t(O)q(T)j Fy(is)30 b(the)g(notion)f(of)i(the)f
Fq(Box)p Fy(.)47 b(There)31 b(are)g(tw)o(o)f(types)300
2801 y(of)k Fq(Box)p Fy(es:)47 b Fq(UnitBox)32 b Fy(and)i
Fq(ValueBox)p Fy(.)55 b(These)34 b(contain)f Fq(Unit)p
Fy(s)f(and)i Fq(Value)p Fy(s)e(respecti)n(v)o(ely)-6
b(.)300 2916 y(Whene)n(v)o(er)22 b(a)g Fq(Unit)p Fy(,)g
Fq(Value)p Fy(,)f(or)h(an)o(y)g(other)g(object)f(contains)g(a)i
(reference)g(to)f(a)g Fq(Value)f Fy(or)i(a)f Fq(Unit)300
3032 y Fy(it)i(is)g(done)g(so)f(indirectly)h(through)f(a)h
Fq(Box)g Fy(of)g(the)g(appropriate)h(type.)30 b(Figure)24
b(5.3)g(demonstrates)f(this)300 3148 y(e)o(xplicitly)-6
b(.)300 4752 y @beginspecial 0 @llx 0 @lly 448 @urx 162
@ury 4480 @rwi @setspecial
%%BeginDocument: boxPicture.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: boxPicture.eps
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Thu May 25 18:45:39 2000
%%For: kor@cannanore.cs.mcgill.ca (Raja VALLEE-RAI)
%%Orientation: Portrait
%%BoundingBox: 0 0 448 162
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-24.0 203.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 4207 m -1000 -1000 l 8482 -1000 l 8482 4207 l cp clip
 0.06299 0.06299 sc
% Arc
7.500 slw
gs  clippath
3724 2770 m 3780 2880 l 3679 2809 l 3767 2911 l 3812 2872 l cp
clip
n 4427.4 2221.4 923.5 -127.1 134.5 arcn
gs col0 s gr
 gr

% arrowhead
n 3724 2770 m 3780 2880 l 3679 2809 l 3701 2789 l 3724 2770 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
5099 2771 m 5040 2880 l 5041 2756 l 5007 2887 l 5065 2902 l cp
clip
n -6.1 1519.8 5226.3 -0.4 15.1 arc
gs col0 s gr
 gr

% arrowhead
n 5099 2771 m 5040 2880 l 5041 2756 l 5070 2764 l 5099 2771 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
5865 2814 m 5760 2880 l 5822 2773 l 5728 2870 l 5771 2912 l cp
clip
n 4549.9 1609.6 1754.5 -4.1 46.4 arc
gs col0 s gr
 gr

% arrowhead
n 5865 2814 m 5760 2880 l 5822 2773 l 5843 2794 l 5865 2814 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
903 2899 m 945 3015 l 853 2932 l 929 3044 l 978 3011 l cp
clip
n 1982.0 2218.8 1307.4 -145.9 142.5 arcn
gs col0 s gr
 gr

% arrowhead
n 903 2899 m 945 3015 l 853 2932 l 878 2916 l 903 2899 l  cp gs 0.00 setgray ef gr  col0 s
% Arc
gs  clippath
2168 2672 m 2205 2790 l 2117 2703 l 2187 2818 l 2238 2787 l cp
clip
n 3266.4 2061.2 1287.5 -153.4 145.5 arcn
gs col0 s gr
 gr

% arrowhead
n 2168 2672 m 2205 2790 l 2117 2703 l 2143 2688 l 2168 2672 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 405 900 m 2970 900 l 2970 1935 l 405 1935 l cp gs col0 s gr 
% Polyline
n 1935 1305 m 2385 1305 l 2385 1665 l 1935 1665 l cp gs col0 s gr 
% Polyline
n 675 1305 m 1125 1305 l 1125 1665 l 675 1665 l cp gs col0 s gr 
% Polyline
n 945 2790 m 1395 2790 l 1395 3195 l 945 3195 l cp gs col0 s gr 
% Polyline
n 2205 2790 m 2655 2790 l 2655 3195 l 2205 3195 l cp gs col0 s gr 
% Polyline
n 3690 1305 m 4050 1305 l 4050 1620 l 3690 1620 l cp gs col0 s gr 
% Polyline
n 3780 2745 m 4140 2745 l 4140 3060 l 3780 3060 l cp gs col0 s gr 
% Polyline
n 4635 2700 m 5040 2700 l 5040 3015 l 4635 3015 l cp gs col0 s gr 
% Polyline
n 5400 2700 m 5760 2700 l 5760 3015 l 5400 3015 l cp gs col0 s gr 
% Polyline
n 5085 1305 m 5490 1305 l 5490 1620 l 5085 1620 l cp gs col0 s gr 
% Polyline
n 6120 1305 m 6480 1305 l 6480 1620 l 6120 1620 l cp gs col0 s gr 
% Polyline
n 3420 855 m 7470 855 l 7470 1935 l 3420 1935 l cp gs col0 s gr 
/Times-Roman ff 180.00 scf sf
405 810 m
gs 1 -1 sc (AssignStmt) col0 sh gr
/Times-Roman ff 180.00 scf sf
450 1125 m
gs 1 -1 sc (lhs: ValueBox    rhs: ValueBox) col0 sh gr
/Times-Roman ff 180.00 scf sf
1080 3060 m
gs 1 -1 sc (x) col0 sh gr
/Times-Roman ff 180.00 scf sf
2385 3060 m
gs 1 -1 sc (y) col0 sh gr
/Times-Roman ff 180.00 scf sf
3465 810 m
gs 1 -1 sc (InvokeStmt) col0 sh gr
/Times-Roman ff 180.00 scf sf
3510 1125 m
gs 1 -1 sc (base: ValueBox) col0 sh gr
/Times-Roman ff 180.00 scf sf
4770 2925 m
gs 1 -1 sc (x1) col0 sh gr
/Times-Roman ff 180.00 scf sf
5535 2925 m
gs 1 -1 sc (x2) col0 sh gr
/Times-Roman ff 180.00 scf sf
3915 2970 m
gs 1 -1 sc (r) col0 sh gr
/Times-Roman ff 180.00 scf sf
990 2745 m
gs 1 -1 sc (Local) col0 sh gr
/Times-Roman ff 180.00 scf sf
2295 2745 m
gs 1 -1 sc (Local) col0 sh gr
/Times-Roman ff 180.00 scf sf
3780 2700 m
gs 1 -1 sc (Local) col0 sh gr
/Times-Roman ff 180.00 scf sf
4680 2655 m
gs 1 -1 sc (Local) col0 sh gr
/Times-Roman ff 180.00 scf sf
5400 2655 m
gs 1 -1 sc (Local) col0 sh gr
/Times-Roman ff 180.00 scf sf
4950 1215 m
gs 1 -1 sc (arg1: ValueBox   arg2: Value) col0 sh gr
/Times-Roman ff 180.00 scf sf
7155 1215 m
gs 1 -1 sc (Box) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 311 x(Figure)20 b(5.3:)27 b(A)20 b(layer)f(of)h(box)o(es)e
(is)h(used)h(between)f(the)h(containers)f(and)g(the)g
Fq(Value)p Fy(s.)28 b(Box)o(es)19 b(pro)o(vide)300 5183
y(a)25 b(de-referencing)h(mechanism.)2050 5509 y(83)p
eop
%%Page: 84 92
84 91 bop 446 499 a Fy(Box)o(es)25 b(serv)o(e)f(tw)o(o)h(fundamental)f
(roles.)446 665 y(The)29 b(\002rst)h(role)f(is)f(to)h(pro)o(vide)f(a)h
(de-referencing)h(mechanism)e(for)h(references)i(to)d
Fq(Value)p Fy(s)g(and)300 780 y Fq(Unit)p Fy(s.)35 b(A)27
b Fq(Box)f Fy(is)g(essentially)f(a)i(pointer)-5 b(.)35
b(W)-8 b(e)27 b(ha)n(v)o(e)g(noticed)f(during)g(the)g(de)n(v)o
(elopment)f(of)j(S)t Ft(O)t(O)q(T)300 896 y Fy(that)20
b(it)f(is)h(con)l(v)o(enient)f(to)g(be)i(able)f(to)f(inspect)h(and)g
(change)g(references)i(to)d(other)h Fq(Value)p Fy(s)f(and)h
Fq(Unit)p Fy(s)300 1011 y(without)27 b(kno)n(wing)g(where)i(the)o(y)f
(occur)g(in)h(a)f Fq(Body)p Fy(,)h(or)f(in)h(a)f Fq(Unit)p
Fy(.)41 b(Perhaps)29 b(the)g(simplest)e(e)o(xam-)300
1127 y(ple)k(occurs)g(when)g(performing)f(constant)g(propagation)f(in)k
(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(.)53 b(In)31 b(constant)f(propagation,)h
(if)300 1242 y(there)25 b(is)f(a)h(use)f(of)h(a)g(local)f(v)n(ariable)g
(for)h(which)f(only)g(one)h(de\002nition)e(e)o(xists)g(and)i(that)f
(de\002nition)g(is)g(a)300 1358 y(constant,)h(then)g(we)h(can)f
(replace)i(the)e(use)g(of)h(the)f(local)g(with)g(a)h(reference)h(to)e
(the)g(constant.)32 b(Clearly)-6 b(,)300 1474 y(we)28
b(do)e(not)h(care)h(where)g(the)f(use)g(occurs:)36 b(it)27
b(can)g(occur)h(in)f(a)g Fq(InvokeExpr)e Fy(or)j(a)f
Fq(AssignStmt)300 1589 y Fy(and)h(in)f(both)g(cases)i(the)e(constant)g
(propagation)g(should)g(tak)o(e)h(place.)40 b(T)-8 b(o)27
b(f)o(acilitate)h(these)g(construct)300 1705 y(independent)h
(transformations)g(or)h(inspections)e(we)i(added)g(methods)f(to)h(the)g
Fq(Body)p Fy(,)g Fq(Value)p Fy(,)g(and)300 1820 y Fq(Unit)23
b Fy(classes)h(such)g(as)g Fq(getUseBoxes\(\))e Fy(which)h(returns)h(a)
h(list)e(of)h Fq(ValueBox)p Fy(es)e(which)i(con-)300
1936 y(tain)37 b Fq(Value)p Fy(s)f(which)h(are)h(considered)g(to)f(be)g
(used)g(as)h(opposed)f(to)g(de\002ned.)69 b(Similarly)-6
b(,)39 b Fq(Body)300 2051 y Fy(and)24 b Fq(Unit)f Fy(ha)n(v)o(e)h(a)g
(method)f(named)g Fq(getUnitBoxes\(\))e Fy(which)j(returns)f(a)h(list)f
(of)h Fq(Box)p Fy(es)g(which)300 2167 y(contains)35 b(references)i(to)e
(other)h Fq(Unit)p Fy(s.)62 b(These)36 b(are)g(e)o(xtremely)f(useful)g
(when)h(performing)f(code)300 2283 y(migration)22 b(from)i(one)f
(method)g(to)g(another)l(,)h(for)g(e)o(xample,)e(in)i(order)g(to)f
(preserv)o(e)g(the)h(consistenc)o(y)e(of)300 2398 y(the)j(branches)g
(amongst)e(the)i Fq(Unit)p Fy(s.)446 2564 y(The)g(second)f(role)g(is)g
(to)g(enforce)i(the)e(grammar)g(on)g(the)h(actual)f(object)g
(representations.)30 b(F)o(or)24 b(e)o(x-)300 2679 y(ample,)d(in)g(J)t
Ft(I)t(M)t(P)t(L)t(E)27 b Fy(the)20 b(ar)n(guments)g(of)g(an)g
Fq(InvokeExpr)f Fy(can)h(only)g(be)g Fq(Local)p Fy(s)f(or)h
Fq(Constant)p Fy(s.)300 2795 y(Changing)25 b(the)g(ar)n(guments)g(is)g
(done)h(through)e(a)i(method)f(on)g(the)g Fq(InvokeExpr)f
Fy(which)h(in)g(turn)g(at-)300 2910 y(tempts)j(to)h(change)g(the)g
(contents)f(of)h(the)g Fq(ValueBox)p Fy(es)f(which)g(represent)i(the)f
(ar)n(guments.)43 b(Since)300 3026 y(the)27 b Fq(ValueBox)p
Fy(es)f(in)h(this)g(case)h(are)g Fq(ImmediateBox)p Fy(es,)d(the)o(y)i
(will)f(only)h(accept)h Fq(Constant)p Fy(s)300 3141 y(or)h
Fq(Local)p Fy(s)e(\(and)i(thro)n(w)e(an)i(e)o(xception)e(if)i(an)g
(object)f(of)g(a)h(dif)n(ferent)f(type)h(is)f(inserted.\))41
b(Note)29 b(that)300 3257 y(by)i(changing)f(the)h Fq(ValueBox)e
Fy(to)i(something)e(more)i(\003e)o(xible)g(which)f(accepts)i
Fq(Expr)p Fy(s)e(as)h(well)g(is)300 3372 y(ho)n(w)24
b(we)h(implement)e(the)i Fq(InvokeExpr)d Fy(for)k Fq(Grimp)p
Fy(.)300 3711 y Fp(5.3.15)122 b(P)l(atc)o(hing)34 b(Chains)300
3944 y Fy(The)c Fq(Unit)p Fy(s)f(in)g(a)h Fq(Body)f Fy(are)i(contained)
e(in)g(a)h Fq(PatchingChain)p Fy(,)f(a)h(subclass)f(of)g
Fq(Chain)p Fy(.)45 b(The)300 4060 y Fq(PatchingChain)40
b Fy(has)i(some)g(special)g(properties)g(which)g(are)h(desired)f(when)g
(implementing)300 4175 y(compiler)30 b(transformations.)47
b(In)31 b(particular)l(,)h(a)f(common)e(operation)h(that)g(one)h
(performs)g(on)f(a)h(col-)300 4291 y(lection)24 b(of)i
Fq(Unit)p Fy(s)e(is)h(to)g(delete)g(a)g(particular)g
Fq(Unit)p Fy(.)31 b(But)26 b(what)f(happens)g(to)f(all)h(the)g
Fq(Unit)p Fy(s)g(which)300 4406 y(are)f(referring)f(to)g(this)f
Fq(Unit)p Fy(?)30 b(The)o(y)22 b(must)g(someho)n(w)f(be)j(patched)e(in)
h(order)g(to)g(refer)h(to)f(the)g(element)300 4522 y(which)k(comes)f
(after)i(the)f Fq(Unit)g Fy(remo)o(v)o(ed.)36 b(Similarly)-6
b(,)26 b(one)h(often)g(wishes)g(to)f(insert)h(a)g Fq(Unit)g
Fz(a)g Fy(be-)300 4638 y(fore)32 b(another)e Fq(Unit)h
Fz(b)p Fy(,)h(and)f(that)g(the)f(ne)n(wly)h(inserted)f
Fq(Unit)g Fy(is)h(in)g(the)f(same)h(basic)g(block.)49
b(This)300 4753 y(is)28 b(achie)n(v)o(ed)g(by)g(changing)f(all)h
(references)i(of)f Fz(b)f Fy(to)g Fz(a)p Fy(.)41 b(The)29
b Fq(PatchingChain)c Fy(tak)o(es)k(care)g(of)f(all)300
4869 y(these)d(details)f(automatically)-6 b(.)2050 5509
y(84)p eop
%%Page: 85 93
85 92 bop 300 499 a Fp(5.3.16)122 b(P)l(ac)n(ka)o(g)q(es)36
b(and)e(T)-10 b(oolkits)300 732 y Fy(T)i(o)22 b(structure)j(S)t
Ft(O)t(O)q(T)r Fy(,)h(the)c(API)h(has)g(been)g(split)e(into)h(se)n(v)o
(eral)g(packages.)30 b(There)23 b(is)f(at)h(least)f(one)h(pack-)300
847 y(age)k(per)h(intermediate)e(representation,)g(and)h(code)g
(containing)f(transformations)g(or)h(optimizations)300
963 y(is)d(usually)g(stored)g(in)h(a)g(toolkit)e(package.)31
b(Here)26 b(is)e(a)h(list)f(of)h(the)g(current)g(packages)g(a)n(v)n
(ailable:)300 1236 y Fq(soot)544 1352 y Fy(Base)i(S)t
Ft(O)t(O)q(T)j Fy(classes,)25 b(shared)f(by)h(dif)n(ferent)f
(intermediate)g(representations.)300 1550 y Fq(soot.baf)544
1666 y Fy(Public)g(classes)h(for)g(the)i(B)q Ft(A)t(F)j
Fy(intermediate)24 b(representation.)300 1865 y Fq(soot.baf.internal)
544 1980 y Fy(Internal)h(implementation-speci\002c)d(classes)j(for)g
(the)i(B)q Ft(A)t(F)j Fy(intermediate)24 b(representation.)300
2179 y Fq(soot.baf.toolkits.base)544 2294 y Fy(A)h(toolkit)e(to)h
(optimize)g(the)i(B)q Ft(A)t(F)k Fy(IR.)300 2493 y Fq(soot.coffi)544
2609 y Fy(Contains)24 b(classes)h(from)f(the)h(Cof)n(\002)g(tool,)f(by)
g(Clark)i(V)-11 b(erbrugge.)300 2807 y Fq(soot.grimp)544
2923 y Fy(Public)24 b(classes)h(for)g(the)i(G)t Ft(R)t(I)t(M)t(P)k
Fy(intermediate)24 b(representation.)300 3121 y Fq(soot.grimp.internal)
544 3237 y Fy(Internal)h(implementation-speci\002c)d(classes)j(for)g
(the)i(G)t Ft(R)t(I)t(M)t(P)k Fy(intermediate)24 b(representation.)300
3435 y Fq(soot.grimp.toolkits.base)544 3551 y Fy(A)h(toolkit)e(to)h
(optimize)g(the)i(G)t Ft(R)t(I)t(M)t(P)32 b Fy(IR.)300
3750 y Fq(soot.jimple)544 3865 y Fy(Public)24 b(classes)h(for)g(the)i
(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(intermediate)24 b(representation.)300
4064 y Fq(soot.jimple.internal)544 4179 y Fy(Internal)h
(implementation-speci\002c)d(classes)j(for)g(the)i(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(intermediate)24 b(representation.)300
4378 y Fq(soot.jimple.parser)544 4493 y Fy(An)h(interf)o(ace)g(to)f
(the)j(J)t Ft(I)t(M)t(P)t(L)t(E)k Fy(parser)-5 b(.)300
4692 y Fq(soot.jimple.toolkits.base)544 4808 y Fy(A)25
b(toolkit)e(to)h(optimize)g(the)i(J)t Ft(I)t(M)t(P)t(L)t(E)32
b Fy(IR.)300 5006 y Fq(soot.jimple.toolkits.invoke)544
5122 y Fy(A)25 b(toolkit)e(to)h(deal)h(with)h(J)t Ft(I)t(M)t(P)t(L)t(E)
32 b Fy(and)24 b(in)l(v)n(ok)o(e)g(statements.)2050 5509
y(85)p eop
%%Page: 86 94
86 93 bop 300 499 a Fq(soot.jimple.toolkits.scalar)544
615 y Fy(A)25 b(toolkit)e(for)i(scalar)g(optimization)e(of)k(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(.)300 813 y Fq(soot.jimple.toolkits.typing)
544 929 y Fy(Implements)23 b(a)i(typing)f(algorithm)f(for)k(J)t
Ft(I)t(M)t(P)t(L)t(E)32 b Fy(.)300 1128 y Fq(soot.toolkits.graph)544
1243 y Fy(T)-8 b(oolkit)23 b(to)i(produce)f(and)h(manipulate)f(v)n
(arious)g(types)g(of)h(control)f(\003o)n(w)g(graphs.)300
1442 y Fq(soot.toolkits.scalar)544 1557 y Fy(A)i(number)g(of)g(scalar)h
(optimizations)c(which)j(are)h(not)f(intermediate)f(representation)h
(speci\002c)544 1673 y(and)f(the)f(\003o)n(w)h(analysis)f(frame)n(w)o
(ork.)300 1871 y Fq(soot.util)544 1987 y Fy(Generally)h(useful)f
(utility)f(classes)i(for)i(S)t Ft(O)t(O)q(T)r Fy(.)300
2260 y(The)e(complete)f(API)h(for)g(these)g(can)g(be)g(found)g(online)f
(on)g(the)j(S)t Ft(O)t(O)q(T)i Fy(website[22)o(].)300
2599 y Fp(5.3.17)122 b(Anal)n(yses)36 b(and)e(T)-10 b(ransf)n
(ormations)300 2832 y Fy(As)36 b(much)h(as)f(possible)g(analyses)g(and)
h(transformations)e(are)i(represented)g(by)f(singleton)f(classes.)300
2947 y(This)28 b(occurs)h(more)f(frequently)g(for)h(transformations)e
(than)h(for)h(analyses.)42 b(In)29 b(particular)l(,)g(transfor)n(-)300
3063 y(mations)19 b(for)h(the)g Fq(Body)g Fy(must)f(e)o(xtend)g(the)i
Fq(BodyTransformer)16 b Fy(class.)29 b(And)20 b(transformations)f(of)
300 3179 y(the)29 b(entire)g Fq(Scene)f Fy(\(all)i(the)f(classes,)h
(\002elds)f(and)g(methods\))f(e)o(xtend)h(the)g Fq(SceneTransformer)300
3294 y Fy(class.)64 b(Representing)36 b(transformations)f(in)h(this)f
(w)o(ay)h(allo)n(ws)f(them)h(to)f(be)i(referred)g(to)f(in)g(a)g(w)o(ay)
300 3410 y(which)24 b(is)h(useful)f(for)h(enabling)f(and)h(disabling)e
(speci\002c)i(optimizations.)300 3749 y Fp(5.3.18)122
b(Graph)33 b(representation)i(of)e(Bod)n(y)302 3981 y
Fy(S)t Ft(O)t(O)q(T)j Fy(pro)o(vides)30 b(a)i(basic)f(infrastructure)g
(for)g(inspecting)f(and)h(modifying)f Fq(Chain)p Fy(s)g(of)h
Fq(Unit)p Fy(s)f(in)300 4097 y(the)e(form)h(of)f(control)g(\003o)n(w)g
(graphs.)41 b(There)29 b(are)h(tw)o(o)e(types)f(of)i(graphs,)g(the)f
Fq(UnitGraph)f Fy(and)h(the)300 4213 y Fq(BlockGraph)p
Fy(.)49 b(The)32 b(latter)g(represents)f(control)g(\003o)n(w)h(graphs)f
(as)h(the)o(y)f(are)h(usually)f(represented)300 4328
y(in)h(traditional)g(compiler)g(te)o(xtbooks[2)n(].)55
b(The)33 b Fq(BlockGraph)d Fy(contains)i(nodes)h(called)f
Fq(Blocks)300 4444 y Fy(which)e(are)h(basic)f(blocks.)46
b(The)30 b Fq(UnitGraph)p Fy(,)g(ho)n(we)n(v)o(er)l(,)g(is)g(a)g
(control)g(\003o)n(w)g(graph)g(in)g(which)f(in-)300 4559
y(di)n(vidual)c(nodes)h(are)h Fq(Units)p Fy(.)35 b(This)26
b(has)h(adv)n(antages)e(and)i(disadv)n(antages.)35 b(One)26
b(adv)n(antage)g(is)h(that)300 4675 y(it)32 b(simpli\002es)g(the)h
(control)f(\003o)n(w)h(graphs;)j(there)e(is)e(no)h(notion)e(of)j(a)f
(basic)g(block.)54 b(This)32 b(simpli\002es)300 4790
y(implementing)26 b(traditional)h(and)h(nontraditional)e(\002x)o(ed)i
(point)g(data)g(\003o)n(w)g(analyses.)41 b(The)28 b(main)g(dis-)300
4906 y(adv)n(antage,)36 b(ho)n(we)n(v)o(er)l(,)f(is)f(that)g(without)f
(basic)h(blocks)f(these)h(data)g(\003o)n(w)g(analyses)g(tak)o(e)h
(longer)e(to)300 5021 y(run)g(because)h(basic)f(blocks)f(normally)g
(pro)o(vide)g(short)h(cuts)g(by)g(summing)e(the)i(ef)n(fect)h(of)f
(multiple)300 5137 y(instructions.)2050 5509 y(86)p eop
%%Page: 87 95
87 94 bop 446 499 a Fy(Both)22 b(the)g Fq(UnitGraph)e
Fy(and)i(the)f Fq(BlockGraph)f Fy(implement)g(the)i Fq(DirectedGraph)d
Fy(inter)n(-)300 615 y(f)o(ace.)49 b(This)30 b(allo)n(ws)f(the)i(de)n
(v)o(elopment)d(of)j(methods)e(which)i(can)g(operate)f(on)h(arbitrary)g
Fq(Direct-)300 730 y(edGraphs)p Fy(,)23 b(be)h(the)o(y)f
Fq(Unit)h Fy(or)g Fq(Block)f Fy(based.)30 b(F)o(or)25
b(e)o(xample,)e(there)h(are)h(methods)e(which)h(return)300
846 y(pseudo-topological)i(orderings)j(on)f Fq(DirectedGraph)p
Fy(s)e(which)i(are)h(e)o(xtremely)f(useful)g(for)h(iter)n(-)300
962 y(ating)24 b(on)h(the)f Fq(Block)p Fy(s)g(or)h Fq(Unit)p
Fy(s)f(in)g(an)h(ef)n(\002cient)g(manner)-5 b(.)446 1126
y Fq(UnitGraph)28 b Fy(and)h Fq(BlockGraph)e Fy(are)j(in)f(f)o(act)g
(abstract)g(classes.)44 b(The)29 b(concrete)h(subclasses)300
1241 y(that)23 b(may)f(be)i(instantiated)d(are)j Fq(CompleteUnitGraph)p
Fy(,)c Fq(BriefUnitGraph)p Fy(,)g Fq(Complete-)300 1357
y(BlockGraph)g Fy(and)i Fq(BriefBlockGraph)p Fy(.)27
b(The)22 b(w)o(ords)g(complete)f(and)h(brief)h(relate)f(to)g(ho)n(w)f
(the)300 1473 y(e)o(xception)31 b(edges)h(are)g(handled.)52
b(In)32 b(the)g(brief)g(forms)f(of)h(the)g(graphs,)h(e)o(xceptions)e
(are)h(practically)300 1588 y(ignored,)k(as)f(there)g(are)g(no)f(edges)
g(between)h(an)o(y)f Fq(Unit)p Fy(s)f(and)i(e)o(xception)e(handlers.)59
b(The)35 b(e)o(xcep-)300 1704 y(tion)30 b(handler)g Fq(Unit)p
Fy(s)g(are)h(made)g(to)f(be)h(heads)f(of)h(the)f(graphs)h(in)f(this)g
(form.)47 b Fq(Complete)29 b Fy(graphs)300 1819 y(on)i(the)g(other)g
(hand)g(include)g(these)g(edges.)50 b(F)o(or)31 b(most)g(analyses)g
(the)g(complete)f(form)h(is)g(required.)300 1935 y(F)o(or)k(e)o
(xample,)h(computing)c(ud/du)i(chain)g(information)f(with)h(a)h(brief)g
(graph)f(will)g(yield)g(incorrect)300 2050 y(information,)23
b(as)i(the)g(uses)f(of)h(local)g(v)n(ariables)f(within)f(e)o(xception)h
(handlers)h(will)e(be)i(ignored.)446 2215 y(Note)36 b(that)f(most)f(of)
i(the)f(implementations)e(of)j(these)f(graphs)g(pro)o(vide)g(only)g
(static,)i(snapshot)300 2330 y(vie)n(ws)23 b(of)i(the)f
Fq(Unit)p Fy(s.)30 b(It)24 b(is)g(not)g(possible)f(to)h(modify)g(the)g
(graph)g(directly)-6 b(,)24 b(or)g(mak)o(e)h(a)f(modi\002cation)300
2446 y(in)30 b(the)h Fq(Chain)f Fy(of)h Fq(Unit)p Fy(s)e(and)i(ha)n(v)o
(e)g(that)f(change)h(be)g(re\003ected)h(in)e(the)h(graph.)48
b(This)30 b(means)h(that)300 2561 y(modi\002cations)k(in)g(the)h
Fq(Chain)f Fy(requires)h(a)h(re)o(generation)e(of)i(the)f(acti)n(v)o(e)
f(graphs)g(for)i(them)e(to)h(be)300 2677 y(correct.)30
b(The)20 b(only)g(e)o(xception)f(to)h(this)f(is)h(the)g
Fq(BlockGraph)p Fy(.)27 b(If)21 b(the)f Fq(Block)f Fy(objects)h(are)h
(modi\002ed)300 2793 y(directly)-6 b(,)30 b(the)g(modi\002cations)f
(will)g(trickle)g(do)n(wn)g(to)h(the)g Fq(Chain)f Fy(of)h
Fq(Unit)p Fy(s.)45 b(So)31 b(it)e(is)h(possible)e(in)300
2908 y(this)c(case)h(to)g(modify)e(the)i(basic)g(blocks)f(of)h(the)f
(graph)h(and)g(maintain)e(a)i(correct)h(vie)n(w)-6 b(.)300
3288 y Fr(5.4)143 b(Usa)o(g)q(e)38 b(e)n(xamples)300
3583 y Fp(5.4.1)121 b(Creating)35 b(a)e(hello)i(w)n(orld)d(pr)n(ogram)
300 3815 y Fy(This)g(\002rst)h(e)o(xample)f(on)g(ho)n(w)g(to)g(use)j(S)
t Ft(O)t(O)q(T)i Fy(consists)31 b(of)i(creating)g(a)g(hello)f(w)o(orld)
g(program)g(from)300 3931 y(scratch.)67 b(Ex)o(ecuting)35
b(the)i(program)f(will)g(create)h(a)h(class)e(called)h(\224HelloW)-8
b(orld\224,)39 b(which)d(in)h(turn,)300 4046 y(when)25
b(e)o(x)o(ecuted,)f(will)g(print)g(\224Hello)g(w)o(orld!\224.)446
4210 y(The)j(code)g(is)g(\002rst)g(gi)n(v)o(en,)f(and)h(then)f(each)i
(numbered)e(step)h(is)f(e)o(xplained.)36 b(The)27 b(basic)g(idea)g(is)f
(to)300 4326 y(create)c(an)g(empty)f(class,)h(create)g(an)g(empty)f
(body)-6 b(,)21 b(and)g(then)h(create)g(the)h(J)t Ft(I)t(M)t(P)t(L)t(E)
29 b Fy(code)21 b(for)h(that)f(body)-6 b(.)300 4548 y
Fb(public)39 b(class)g(Main)300 4613 y({)459 4678 y(public)g(static)g
(void)h(main\(String[])d(args\))459 4742 y({)619 4807
y(SootClass)h(sClass;)619 4872 y(SootMethod)g(method;)619
5001 y(//)h(Create)g(the)h(class)300 5066 y(\(1\)|)278
b(Scene.v\(\).loadClassAndSupport\("java.lang.Objec)o(t"\);)619
5195 y(//)39 b(Declare)g('public)g(class)g(HelloWorld')300
5260 y(\(2\)|)278 b(sClass)39 b(=)h(new)f(SootClass\("HelloWorld",)e
(Modifier.PUBLIC\);)2050 5509 y Fy(87)p eop
%%Page: 88 96
88 95 bop 619 564 a Fb(//)39 b('extends)g(Object')300
629 y(\(3\)|)278 b(sClass.setSuperclass\(Scene.v\(\).getSootClass\("j)o
(ava.lan)o(g.Objec)o(t"\)\);)420 703 y(|)g
(Scene.v\(\).addClass\(sClass\);)619 833 y(//)39 b(Create)g(the)h
(method,)f(public)f(static)h(void)h(main\(String[]\))420
897 y(|)318 b(method)39 b(=)h(new)f(SootMethod\("main",)300
972 y(\(4\)|)517 b(Arrays.asList\(new)38 b(Type[])h
({ArrayType.v\(RefType.v\("java.lang.String"\))o(,)34
b(1\)}\),)420 1047 y(|)517 b(VoidType.v\(\),)38 b(Modifier.PUBLIC)g(|)i
(Modifier.STATIC\);)420 1122 y(|)420 1196 y(|)278 b
(sClass.addMethod\(method\);)619 1326 y(//)39 b(Create)g(the)h(method)f
(body)619 1390 y({)778 1455 y(//)h(create)f(empty)g(body)300
1520 y(\(5\)|)318 b(JimpleBody)39 b(body)g(=)h
(Jimple.v\(\).newBody\(method\);)300 1649 y(\(6\)|)318
b(method.setActiveBody\(body\);)778 1714 y(Chain)39 b(units)g(=)h
(body.getUnits\(\);)778 1778 y(Local)f(arg,)h(tmpRef;)778
1908 y(//)g(Add)f(some)g(locals,)g(java.lang.String[])e(l0)300
1972 y(\(7\)|)478 b(arg)39 b(=)h(Jimple.v\(\).newLocal\("l0",)c
(ArrayType.v\(RefType.v\("java.lang.String"\),)d(1\)\);)938
2037 y(body.getLocals\(\).add\(arg\);)300 2166 y(\(8\)|)318
b(//)40 b(Add)f(locals,)g(java.io.printStream)e(tmpRef)938
2231 y(tmpRef)i(=)g(Jimple.v\(\).newLocal\("tmpRef",)d
(RefType.v\("java.io.PrintStream"\)\);)938 2296 y
(body.getLocals\(\).add\(tmpRef\);)300 2425 y(\(9\)|)318
b(//)40 b(add)f("l0)h(=)f(@parameter0")938 2490 y
(units.add\(Jimple.v\(\).newIdentityStmt\(arg,)1137 2554
y(Jimple.v\(\).newParameterRef\(ArrayType.v\(RefT)o(ype.v\(")o(java.l)o
(ang.Str)o(ing"\),)33 b(1\),)1256 2619 y(0\)\)\);)300
2748 y(\(10\))318 b(//)40 b(add)f("tmpRef)g(=)h(java.lang.System.out")
938 2813 y(units.add\(Jimple.v\(\).newAssignStmt\(tmpRef)o(,)34
b(Jimple.v\(\).newStaticFieldRef\()1097 2878 y
(Scene.v\(\).getField\("<java.lang.System:)g(java.io.PrintStream)j
(out>"\)\)\)\);)778 3007 y(//)j(insert)f("tmpRef.println\("Hello)d
(world!"\)")778 3072 y({)300 3136 y(\(11\)|)438 b(SootMethod)38
b(toCall)h(=)h(Scene.v\(\).getMethod\()459 3211 y(|)598
b("<java.io.PrintStream:)37 b(void)i(println\(java.lang.String\)>"\);)
300 3286 y(\(12\)|)438 b(units.add\(Jimple.v\(\).newInvokeStmt\(Jimple)
o(.v\(\).ne)o(wVirtua)o(lInvok)o(eExpr\(t)o(mpRef,)459
3361 y(|)638 b(toCall,)39 b(StringConstant.v\("Hello)d
(world!"\)\)\)\);)778 3425 y(})778 3555 y(//)k(insert)f("return")300
3619 y(\(13\)|)438 b(units.add\(Jimple.v\(\).newReturnVoidStmt\(\)\))o
(;)619 3749 y(})300 3878 y(\(14\)|)119 b(sClass.write\(\);)459
3943 y(})300 4072 y(})300 4383 y Fi(W)l(alkthr)n(ough)28
b(of)f(the)h(code)420 4607 y Fy(1.)49 b(The)34 b(\002rst)h(step)e(is)h
(load)g(the)g(class)g Fq(java.lang.Object)d Fy(into)j(the)g
Fq(Scene)p Fy(.)58 b(This)34 b(step)544 4723 y(loads)25
b(all)g(the)g(\002elds)g(and)g(methods)f(of)i(the)f(class,)g(as)g(well)
g(as)g(all)g(the)g(objects)g(needed)h(to)e(load)544 4839
y(this)g(class,)g(transiti)n(v)o(ely)-6 b(.)28 b(This)c(is)g(done)h(in)
f(order)h(to)g(reference)h(the)f Fq(java.lang.Object)544
4954 y Fy(class)f(later)h(on.)420 5153 y(2.)49 b(Creates)26
b(a)f(ne)n(w)f(public)g(class)h(with)f(the)g(name)h(\224HelloW)-8
b(orld\224.)2050 5509 y(88)p eop
%%Page: 89 97
89 96 bop 420 499 a Fy(3.)49 b(Mak)o(es)21 b(the)g(class)g
Fq(HelloWorld)e Fy(e)o(xtend)h Fq(java.lang.Object)p
Fy(,)e(and)k(adds)f(the)g(class)f(to)544 615 y(the)g
Fq(Scene)p Fy(.)28 b(All)19 b(classes)h(should)f(be)h(added)g(to)g(the)
g Fq(Scene)f Fy(once)h(created.)30 b(Note)20 b(ho)n(w)f(we)h(re-)544
730 y(trie)n(v)o(e)e(the)g(class)h Fq(java.lang.Object)c
Fy(with)j(a)i(call)e(to)h Fq(Scene.v\(\).getSootClass)544
846 y(\("java.lang.Object"\))p Fy(.)420 1045 y(4.)49
b(Create)37 b(a)g(method)e Fq(void)59 b(main\(String[])e(args\))35
b Fy(for)h(this)f(class.)65 b(Note)36 b(ho)n(w)f(the)544
1160 y Fq(ArrayType)23 b Fy(is)i(composed)f(of)h(a)g
Fq(RefType)f Fy(and)h(a)g(dimension)f(count,)g(and)h(that)g(the)g(mod-)
544 1276 y(i\002ers)g(are)h(combined)d(together)i(by)f(ORing)h(them)f
(together)-5 b(.)420 1474 y(5.)49 b(Creates)23 b(a)f(ne)n(w)g(empty)g
Fq(JimpleBody)p Fy(.)27 b(There)c(are)g(no)f(locals,)g(no)g(units)f
(and)h(no)g(traps)g(at)g(the)544 1590 y(moment.)420 1788
y(6.)49 b(Sets)28 b(the)f(body)g(that)g(w)o(as)g(created)i(to)e(be)g
(the)h(acti)n(v)o(e)e(body)h(of)h(this)e(method.)38 b(There)28
b(can)g(only)544 1904 y(be)d(one)g(acti)n(v)o(e)e(body)-6
b(.)420 2103 y(7.)49 b(Adds)26 b(a)h(local)g(of)g(type)g
Fq(java.lang.String[])c Fy(named)j Fq(l0)p Fy(.)37 b(Note)27
b(ho)n(w)f(the)g(local)h(cre-)544 2218 y(ated)95 b(must)f(be)h(e)o
(xplicitly)d(added)j(to)g(the)f Fq(Chain)g Fy(of)h(locals)f(returned)h
(by)544 2334 y Fq(body.getLocals\(\))p Fy(.)420 2532
y(8.)49 b(Adds)24 b(a)h(temporary)g(local)f Fq(java.io.PrintStream)56
b(tmpRef)p Fy(.)420 2731 y(9.)49 b(Creates)26 b(and)e(adds)h(an)g
(identity)e(statement)h(of)h(the)f(form)544 2971 y Fq(l0)59
b(:=)h(@parameter0:)d(java.lang.String[])544 3211 y Fy(This)30
b(indicates)g(that)g Fq(l0)h Fy(is)f(the)h(local)f(v)n(ariable)h(which)
f(corresponds)g(to)h(the)g(\002rst)g(ar)n(gument)544
3327 y(passed)24 b(to)h(this)f(method.)371 3525 y(10.)48
b(Creates)31 b(an)g(assignment)e(statement)h(of)g Fq
(java.lang.System.out)c Fy(to)31 b(the)f(local)g(v)n(ari-)544
3641 y(able)h Fq(tmpRef)p Fy(.)50 b(Note)31 b(ho)n(w)g(the)g(\002eld)h
(is)f(accessed)h(through)e(its)h(absolute)f(signature)h(in)g(the)544
3756 y Fq(Scene.)69 b Fy(The)37 b(signature)h(format)f(is)h
(straightforw)o(ard:)56 b(the)37 b(class)h(name)g(containing)e(the)544
3872 y(\002eld,)c(follo)n(wed)d(by)h(the)h(type)f(of)h(the)f(\002eld)h
(and)f(then)g(the)h(name)f(of)h(the)f(\002eld.)48 b(This)30
b(assign-)544 3988 y(ment)24 b(statement)g(is)g(then)h(added)f(to)h
(the)f(chain)h(of)g(units.)371 4186 y(11.)48 b(Gets)29
b(the)g(method)g(class)g(corresponding)f(to)h(the)h(gi)n(v)o(en)e
(method)g(signature.)44 b(Note)29 b(ho)n(w)g(it)g(is)544
4302 y(accessed)c(through)f(its)g(absolute)g(signature)g(in)h(the)f
Fq(Scene.)371 4500 y Fy(12.)48 b(Creates)41 b(a)g(call)f(to)g(the)g
(abo)o(v)o(e)g(method,)j(with)d(as)g(ar)n(gument)g(the)g(string)g
(constant)f(\224Hello)544 4616 y(W)-8 b(orld!\224.)371
4814 y(13.)48 b(Creates)26 b(and)e(adds)h(a)g(return)g(v)n(oid)f
(statement)g(to)g(the)h Fq(Chain)e Fy(of)i Fq(Unit)p
Fy(s.)371 5013 y(14.)48 b(Writes)24 b(the)h(class\002le)g(to)f(a)h
(\002le)h(called)f(\224HelloW)-8 b(orld.class\224.)2050
5509 y(89)p eop
%%Page: 90 98
90 97 bop 300 499 a Fp(5.4.2)121 b(Implementing)36 b(live)f(v)n(ariab)o
(les)g(anal)n(ysis)300 731 y Fy(This)29 b(second)h(usage)g(e)o(xample)f
(consists)g(of)h(implementing)d(the)j(standard)g Fz(live)g(variables)e
(analysis)300 846 y Fy(using)c(the)i(S)t Ft(O)t(O)q(T)k
Fy(frame)n(w)o(ork.)446 1010 y(T)-8 b(o)33 b(implement)e(this)i
(analysis,)h(we)f(e)o(xtend)f(the)h Fq(BackwardFlowAnalysis)c
Fy(class)k(which)300 1126 y(is)40 b(pro)o(vided)f(with)j(S)t
Ft(O)t(O)q(T)r Fy(.)81 b(Then)40 b(it)g(suf)n(\002ces)g(to)g(pro)o
(vide)g(a)h(constructor)e(for)i(the)g(analysis)e(and)300
1241 y(to)24 b(o)o(v)o(erride)f(four)h(methods:)29 b
Fq(newInitialFlow\(\),)56 b(flowThrough\(\),)h(merge\(\))22
b Fy(and)300 1357 y Fq(copy\(\))p Fy(.)27 b(There)20
b(is)e(also)h(a)g(\002fth)g(method)e(which)i(can)g(generally)g(be)g(o)o
(v)o(erriden:)26 b Fq(customizeIni-)300 1473 y(tialFlowGraph\(\))p
Fy(.)h(Although)d(we)h(do)f(not)g(use)h(this)f(method)g(here,)h(this)f
(method)f(can)i(be)g(used)300 1588 y(to)34 b(customize)g(the)g(initial)
g(\003o)n(w)g(graph)g(so)h(that,)h(for)f(e)o(xample,)h(some)e(nodes)g
(start)h(with)e(dif)n(ferent)300 1704 y(initial)23 b(\003o)n(w)i
(nodes.)446 1868 y(W)-8 b(e)23 b(\002rst)f(pro)o(vide)f(the)h(code,)h
(then)f(we)g(pro)o(vide)f(a)i(w)o(alkthrough)d(describing)i(each)g
(step)g(in)g(detail.)300 2088 y Fb(class)39 b(SimpleLiveLocalsAnalysis)
d(extends)j(BackwardFlowAnalysis)300 2153 y({)459 2217
y(FlowSet)g(emptySet;)459 2282 y(Map)h(unitToGenerateSet;)459
2347 y(Map)g(unitToPreserveSet;)459 2476 y
(SimpleLiveLocalsAnalysis\(UnitGraph)35 b(g\))459 2541
y({)619 2605 y(super\(g\);)619 2735 y(//)k(Generate)g(list)g(of)h
(locals)f(and)g(empty)g(set)619 2800 y({)778 2864 y(Chain)g(locals)g(=)
h(g.getBody\(\).getLocals\(\);)300 2929 y(\(1\)|)318
b(FlowUniverse)38 b(localUniverse)g(=)i(new)f
(FlowUniverse\(locals.toArray\(\)\);)300 3058 y(\(2\)|)318
b(emptySet)39 b(=)h(new)f(ArrayPackedSet\(localUniverse\);)619
3123 y(})420 3252 y(|)199 b(//)39 b(Create)g(preserve)g(sets.)420
3327 y(|)199 b({)420 3402 y(|)318 b(unitToPreserveSet)38
b(=)h(new)h(HashMap\(g.size\(\))d(*)j(2)f(+)h(1,)g(0.7f\);)420
3476 y(|)420 3551 y(|)318 b(Iterator)39 b(unitIt)g(=)h(g.iterator\(\);)
420 3626 y(|)420 3701 y(|)318 b(while\(unitIt.hasNext\(\)\))420
3775 y(|)g({)420 3850 y(|)478 b(Unit)39 b(s)h(=)f(\(Unit\))g
(unitIt.next\(\);)420 3925 y(|)300 3999 y(\(3\)|)g(\(a\)|)279
b(BoundedFlowSet)37 b(killSet)i(=)h(\(BoundedFlowSet\))d
(emptySet.clone\(\);)420 4074 y(|)420 4149 y(|)159 b(|)279
b(Iterator)38 b(boxIt)h(=)h(s.getDefBoxes\(\).iterator\(\);)420
4224 y(|)159 b(|)420 4298 y(|)g(|)279 b(while\(boxIt.hasNext\(\)\))420
4373 y(|)159 b(|)279 b({)420 4448 y(|)39 b(\(b\)|)438
b(ValueBox)39 b(box)g(=)h(\(ValueBox\))e(boxIt.next\(\);)420
4522 y(|)159 b(|)420 4597 y(|)g(|)438 b(if\(box.getValue\(\))37
b(instanceof)i(Local\))420 4672 y(|)159 b(|)597 b
(killSet.add\(box.getValue\(\),)36 b(killSet\);)420 4747
y(|)159 b(|)279 b(})420 4821 y(|)420 4896 y(|)159 b(|)279
b(//)39 b(Store)g(complement)420 4971 y(|)g(\(c\)|)398
b(killSet.complement\(killSet\);)420 5046 y(|)159 b(|)398
b(unitToPreserveSet.put\(s,)36 b(killSet\);)420 5120
y(|)318 b(})420 5195 y(|)159 b(})2050 5509 y Fy(90)p
eop
%%Page: 91 99
91 98 bop 420 499 a Fb(|)199 b(//)39 b(Create)g(generate)g(sets)420
574 y(|)199 b({)420 649 y(|)358 b(unitToGenerateSet)37
b(=)j(new)f(HashMap\(g.size\(\))f(*)i(2)f(+)h(1,)g(0.7f\);)420
723 y(|)420 798 y(|)358 b(Iterator)39 b(unitIt)g(=)g(g.iterator\(\);)
420 873 y(|)420 948 y(|)358 b(while\(unitIt.hasNext\(\)\))420
1022 y(|)g({)420 1097 y(|)478 b(Unit)39 b(s)h(=)f(\(Unit\))g
(unitIt.next\(\);)420 1172 y(|)420 1246 y(|)g(\(a\)|)279
b(FlowSet)38 b(genSet)h(=)h(\(FlowSet\))f(emptySet.clone\(\);)420
1321 y(|)300 1396 y(\(4\)|)159 b(|)279 b(Iterator)38
b(boxIt)h(=)h(s.getUseBoxes\(\).iterator\(\);)420 1471
y(|)159 b(|)420 1545 y(|)g(|)279 b(while\(boxIt.hasNext\(\)\))420
1620 y(|)159 b(|)279 b({)420 1695 y(|)39 b(\(b\)|)438
b(ValueBox)39 b(box)g(=)h(\(ValueBox\))e(boxIt.next\(\);)420
1769 y(|)159 b(|)420 1844 y(|)g(|)438 b(if\(box.getValue\(\))37
b(instanceof)i(Local\))420 1919 y(|)159 b(|)597 b
(genSet.add\(box.getValue\(\),)36 b(genSet\);)420 1994
y(|)159 b(|)279 b(})420 2068 y(|)420 2143 y(|)39 b(\(c\)|)279
b(unitToGenerateSet.put\(s,)36 b(genSet\);)420 2218 y(|)358
b(})619 2282 y(})300 2412 y(\(5\)|)159 b(doAnalysis\(\);)459
2477 y(})420 2606 y(|protected)38 b(Object)h(newInitialFlow\(\))420
2681 y(|{)300 2755 y(\(6\)|)159 b(return)39 b(emptySet.clone\(\);)420
2830 y(|})420 2959 y(|protected)f(void)h(flowThrough\(Object)e
(inValue,)i(Directed)g(unit,)g(Object)g(outValue\))420
3034 y(|{)420 3109 y(|)159 b(FlowSet)39 b(in)g(=)h(\(FlowSet\))e
(inValue,)h(out)g(=)h(\(FlowSet\))f(outValue;)420 3184
y(|)420 3258 y(|)159 b(//)39 b(Perform)g(kill)300 3333
y(\(7\)|)358 b(in.intersection\(\(FlowSet\))36 b
(unitToPreserveSet.get\(unit\),)g(out\);)420 3408 y(|)420
3482 y(|)159 b(//)39 b(Perform)g(generation)420 3557
y(|)318 b(out.union\(\(FlowSet\))37 b(unitToGenerateSet.get\(unit\),)f
(out\);)420 3632 y(|})420 3761 y(|protected)i(void)h(merge\(Object)f
(in1,)h(Object)g(in2,)h(Object)f(out\))420 3836 y(|{)420
3911 y(|)159 b(FlowSet)39 b(inSet1)g(=)g(\(FlowSet\))g(in1,)420
3985 y(|)358 b(inSet2)39 b(=)h(\(FlowSet\))e(in2;)300
4060 y(\(8\)|)420 4135 y(|)159 b(FlowSet)39 b(outSet)g(=)g(\(FlowSet\))
g(out;)420 4210 y(|)420 4284 y(|)159 b(inSet1.union\(inSet2,)37
b(outSet\);)420 4359 y(|})420 4488 y(|protected)h(void)h(copy\(Object)f
(source,)h(Object)g(dest\))420 4563 y(|{)420 4638 y(|)159
b(FlowSet)39 b(sourceSet)f(=)i(\(FlowSet\))e(source,)300
4712 y(\(9\)|)318 b(destSet)39 b(=)h(\(FlowSet\))e(dest;)420
4787 y(|)420 4862 y(|)159 b(sourceSet.copy\(destSet\);)420
4937 y(|})300 5001 y(})2050 5509 y Fy(91)p eop
%%Page: 92 100
92 99 bop 300 499 a Fi(Ne)o(w)27 b(c)n(lasses)300 726
y Fy(This)34 b(subsection)f(describes)i(the)f(classes)g(which)h(are)g
(speci\002c)g(to)f(this)g(e)o(xample)g(and)g(are)i(not)e(de-)300
841 y(scribed)25 b(else)n(where)f(in)h(this)f(chapter)-5
b(.)300 1060 y Fq(FlowSet)544 1176 y Fy(The)34 b(data)g(which)g(\003o)n
(ws)f(around)h(the)g(\003o)n(w)g(analysis)f(frame)n(w)o(ork)g(should)g
(\(although)g(is)h(not)544 1291 y(required)40 b(to\))f(implement)f(the)
i Fq(FlowSet)e Fy(interf)o(ace.)76 b(The)39 b Fq(FlowSet)g
Fy(interf)o(ace)h(imple-)544 1407 y(ments)23 b(methods)h(such)g(as)g
Fq(union\(\))p Fy(,)f Fq(intersection\(\))p Fy(,)e Fq(isEmpty\(\))i
Fy(and)h(so)g(forth.)544 1523 y(There)40 b(are)h(tw)o(o)f(standard)f
(implementations)f(of)i Fq(FlowSet)p Fy(:)59 b Fq(ArrayPackedSet)37
b Fy(and)544 1638 y Fq(ArraySparseSet.)55 b Fy(The)34
b(latter)f(implements)f(the)i(set)g(using)e(a)j(list,)g(whereas)f(the)g
(for)n(-)544 1754 y(mer)25 b(implements)e(the)h(set)h(using)f(a)h
(bit-data)f(v)o(ector)-5 b(.)300 1940 y Fq(BoundedFlowSet)544
2056 y Fy(A)33 b Fq(BoundedFlowSet)d Fy(is)i(a)i(special)e
Fq(FlowSet)g Fy(which)h(is)f(bounded,)i(in)f(the)g(sense)g(that)544
2171 y(the)25 b(\003o)n(w)f(set')-5 b(s)24 b(domain)g(is)g(restricted)h
(to)f(a)h Fq(FlowUniverse)e Fy(set)h(which)g(is)h(gi)n(v)o(en)e(upon)h
(the)544 2287 y(creation)e(of)f(the)h(set.)29 b Fq(BoundedFlowSet)p
Fy(s)19 b(are)j(useful)f(because)h(the)g(complement)e(method)544
2402 y(can)25 b(be)g(used.)300 2589 y Fq(FlowUniverse)544
2705 y Fy(Objects)f(of)g(this)g(class)g(are)h(arrays)g(of)f(elements)g
(which)g(are)h(gi)n(v)o(en)d(to)i Fq(BoundedFlowSet)p
Fy(s)544 2820 y(upon)18 b(their)h(creation.)28 b(The)o(y)18
b(are)i(used)f(to)f(specify)h(the)f(domain)g(of)h(the)g
Fq(BoundedFlowSet)p Fy(s.)300 3119 y Fi(W)l(alkthr)n(ough)28
b(of)f(the)h(code)420 3337 y Fy(1.)49 b(The)25 b(\002rst)g(step)f(is)h
(to)f(de\002ne)i(the)e Fq(FlowUniverse)f Fy(to)h(be)h(the)g(set)g(of)g
(local)f(v)n(ariables)h(in)f(this)544 3452 y Fq(Body)p
Fy(.)420 3639 y(2.)49 b(Create)30 b(an)g(empty)f(set)g(for)g(the)h(gi)n
(v)o(en)e Fq(FlowUniverse)e Fy(using)j(the)g Fq(ArrayPackedSet)544
3755 y Fy(representation)22 b(which)h(is)g(essentially)e(a)j(re)o
(gular)f(bit-v)o(ector)f(representation.)29 b(Note)23
b(that)g Fq(Ar-)544 3870 y(rayPackedSet)e Fy(is)j(a)g
Fq(BoundedFlowSet)p Fy(.)j Fq(ArraySparseSet)21 b Fy(is)j(the)f(other)h
(repre-)544 3986 y(sentation)g(for)h(the)f(bit-v)o(ector)g(data,)h(b)n
(ut)f(it)g(is)h(unsuitable)e(because)i(it)g(is)f(unbounded.)420
4172 y(3.)49 b(Note)29 b(that)f(normally)g(for)h(the)g(li)n(v)o(e)e(v)n
(ariable)i(\003o)n(w)f(analysis,)h(we)g(compute)f(in')-5
b(s)28 b(and)h(out')-5 b(s)28 b(as)544 4288 y(follo)n(ws:)1528
4497 y Fk(out)p Fj(\()p Fk(s)p Fj(\))f(=)h(\()p Fk(in)p
Fj(\()p Fk(s)p Fj(\))p Fv(n)p Fk(k)s(il)r(l)r Fj(\()p
Fk(s)p Fj(\)\))23 b Fv([)f Fk(g)t(en)p Fj(\()p Fk(s)p
Fj(\))544 4706 y Fy(W)-8 b(e)25 b(use)g(the)f(follo)n(wing)f(equation)h
(instead:)1385 4936 y Fk(out)p Fj(\()p Fk(s)p Fj(\))j(=)h(\()p
Fk(in)p Fj(\()p Fk(s)p Fj(\))22 b Fv(\\)h Fk(pr)s(eser)s(v)t(e)p
Fj(\()p Fk(s)p Fj(\)\))e Fv([)i Fk(g)t(en)p Fj(\()p Fk(s)p
Fj(\))544 5144 y Fy(which)29 b(simply)e(uses)i(a)g Fz(pr)l(eserve)h
(set)e Fy(instead)h(of)g(a)g Fz(kill)g Fy(set.)43 b(This)28
b(block)h(of)g(code)g(computes)544 5260 y(the)c(preserv)o(e)f(set)h
(for)g(each)g(statement)f(in)h(adv)n(ance.)2050 5509
y(92)p eop
%%Page: 93 101
93 100 bop 599 499 a Fy(\(a\))49 b(Generate)26 b(a)f(ne)n(w)f(empty)g
(set.)594 654 y(\(b\))48 b(Iterate)23 b(o)o(v)o(er)d(the)i(list)e(of)i
(de\002nitions)e(for)i(this)f(unit.)29 b(F)o(or)21 b(each)h
(de\002nition,)g(add)f(that)g(local)758 770 y(to)31 b(the)h(kill)e
(set.)50 b(This)30 b(is)h(done)g(by)g(retrie)n(ving)f(the)i
Fq(defBoxes)d Fy(and)i(then)g(inspecting)758 885 y(each)26
b Fq(defBox)d Fy(for)j(a)f(local.)599 1040 y(\(c\))49
b(Store)26 b(the)e(complement)g(of)h(the)f(kill)g(set)h(as)g(the)f
(preserv)o(e)h(set)g(for)g(this)f(unit.)420 1259 y(4.)49
b(The)25 b(ne)o(xt)f(step)g(is)g(to)h(create)h(the)e(generate)i(set)e
(for)h(each)h(statement.)599 1478 y(\(a\))49 b(Create)26
b(an)f(empty)f(set.)594 1633 y(\(b\))48 b(Iterate)25
b(o)o(v)o(er)d(the)i(use)f(box)o(es)g(in)g(this)g(statement.)29
b(If)24 b(the)g(use)f(box)g(contains)g(a)h(local,)f(then)758
1749 y(add)i(the)g(local)f(to)h(the)g(generate)g(set.)599
1903 y(\(c\))49 b(Store)26 b(the)e(resulting)g(set)h(as)f(the)h
(generate)g(set)g(for)g(this)f(statement.)420 2122 y(5.)49
b(Do)24 b(the)f(\003o)n(w)h(analysis)f(which)h(iterates)g(until)e(a)j
(\002x)o(ed)e(point)g(is)h(achie)n(v)o(ed.)29 b(This)24
b(calls)f(the)h(four)544 2238 y(follo)n(wing)f(methods.)420
2434 y(6.)49 b(This)28 b(method)g(returns)h(a)h(brand)f(ne)n(w)f(empty)
g(set.)44 b(This)28 b(is)h(used)f(to)h(decorate)h(each)f(program)544
2550 y(point)c(with)h(an)h(initial)f(\003o)n(w)g(set.)36
b(The)27 b(method)f Fq(customizeInitialFlowGraph)21 b
Fy(can)544 2665 y(be)k(used)f(if)h(dif)n(ferent)g(initial)e(\003o)n(w)i
(sets)f(must)g(be)h(put)f(on)g(each)i(program)e(point.)420
2862 y(7.)49 b(Perform)26 b(the)g(ef)n(fect)g(of)f(\003o)n(wing)g(an)h
Fq(inValue)e Fy(through)h Fq(Unit)p Fy(.)32 b(Store)26
b(the)g(result)f(in)g Fq(out-)544 2977 y(Value)p Fy(.)58
b(In)34 b(our)g(case)h(this)e(means)h(performing)g(an)g(intersection)f
(of)i(the)f Fq(in)g Fy(set)g(with)f(the)544 3093 y(preserv)o(e)25
b(set)f(and)h(then)g(a)g(union)f(with)g(the)g(generate)i(set.)420
3289 y(8.)49 b(Mer)n(ge)29 b(the)g(\003o)n(wsets)f Fq(in1)g
Fy(with)h Fq(in2)f Fy(and)h(store)g(the)f(result)h(in)f
Fq(out)p Fy(.)43 b(In)29 b(our)g(case,)h(for)g(li)n(v)o(e)544
3405 y(v)n(ariable)24 b(analysis,)g(we)h(use)g(union.)420
3601 y(9.)49 b(Implement)23 b(a)j(simple)d(cop)o(y)i(from)f
Fq(source)g Fy(to)g Fq(dest)p Fy(.)300 3938 y Fp(5.4.3)121
b(Implementing)36 b(constant)e(pr)n(opa)o(gation)300
4169 y Fy(This)19 b(e)o(xample)f(implements)g(a)h(simple)f(constant)h
(propagator)g(for)i(S)t Ft(O)t(O)q(T)j Fy(using)19 b(the)g(the)g
(results)g(of)g(the)300 4285 y Fq(SimpleLocalDefs)27
b Fy(\003o)n(w)j(analysis)f(pro)o(vided)g(with)j(S)t
Ft(O)t(O)q(T)r Fy(.)50 b(Note)30 b(that)f(this)h(e)o(xample)f(is)h
(self-)300 4401 y(contained)24 b(and)h(can)g(be)g(in)l(v)n(ok)o(ed)f
(to)h(perform)f(the)h(transformation)e(through)h(its)g
Fq(main)g Fy(method.)300 4678 y Fb(public)39 b(class)g(Main)300
4742 y({)499 4807 y(public)g(static)g(void)g(main\(String[])f(args\))
499 4872 y({)619 4936 y(if\(args.length)g(==)h(0\))619
5001 y({)778 5066 y(System.out.println\("Syntax:)d(java)j(Main)h
(<classfile>)e([soot)h(options]"\);)778 5130 y(System.exit\(0\);)619
5195 y(})2050 5509 y Fy(93)p eop
%%Page: 94 102
94 101 bop 300 499 a Fb(\(1\))39 b(|)120 b
(Scene.v\(\).getPack\("jtp"\).add\(new)35 b
(Transform\("jtp.propagator",)h(Propagator.v\(\)\)\);)619
564 y(soot.Main.main\(args\);)459 629 y(})300 693 y(})300
823 y(class)j(Propagator)f(extends)h(BodyTransformer)300
887 y({)420 952 y(|private)f(static)h(Propagator)g(instance)f(=)i(new)f
(Propagator\(\);)420 1027 y(|private)f(Propagator\(\))g({})300
1101 y(\(2\)|)420 1176 y(|public)g(static)h(Propagator)g(v\(\))g({)h
(return)f(instance;)f(})459 1305 y(static)h(String)g(oldPath;)300
1370 y(\(3\)|protected)f(void)h(internalTransform\(Body)e(b,)i(String)g
(phaseName,)g(Map)g(options\))459 1435 y({)619 1500 y(if)g
(\(soot.Main.isVerbose\))778 1564 y(System.out.println\("[")e(+)i
(b.getMethod\(\).getName\(\))e(+)j("])f(Propagating)f(constants..."\);)
619 1694 y(JimpleBody)g(body)h(=)h(\(JimpleBody\))e(b;)420
1823 y(|)159 b(Chain)39 b(units)g(=)h(body.getUnits\(\);)300
1898 y(\(4\)|)159 b(CompleteUnitGraph)37 b(stmtGraph)i(=)g(new)h
(CompleteUnitGraph\(body\);)420 1972 y(|)420 2047 y(|)159
b(LocalDefs)38 b(localDefs)h(=)h(new)f(SimpleLocalDefs\(stmtGraph\);)
619 2112 y(Iterator)f(stmtIt)h(=)h(units.iterator\(\);)420
2241 y(|)159 b(while\(stmtIt.hasNext\(\)\))420 2316 y(|)g({)420
2391 y(|)318 b(Stmt)39 b(stmt)h(=)f(\(Stmt\))g(stmtIt.next\(\);)300
2465 y(\(5\)|)318 b(Iterator)39 b(useBoxIt)g(=)g
(stmt.getUseBoxes\(\).iterator\(\);)420 2540 y(|)420
2615 y(|)318 b(while\(useBoxIt.hasNext\(\)\))420 2689
y(|)g({)420 2764 y(|)478 b(ValueBox)38 b(useBox)h(=)h(\(ValueBox\))e
(useBoxIt.next\(\);)420 2839 y(|)420 2914 y(|)478 b
(if\(useBox.getValue\(\))36 b(instanceof)j(Local\))938
2978 y({)420 3043 y(|)637 b(Local)39 b(l)h(=)g(\(Local\))e
(useBox.getValue\(\);)420 3118 y(|)637 b(List)39 b(defsOfUse)g(=)g
(localDefs.getDefsOfAt\(l,)e(stmt\);)300 3192 y(\(6\)|)420
3267 y(|)637 b(if\(defsOfUse.size\(\))37 b(==)j(1\))420
3342 y(|)637 b({)1256 3406 y(DefinitionStmt)38 b(def)i(=)f
(\(DefinitionStmt\))1416 3471 y(defsOfUse.get\(0\);)300
3600 y(\(7\))836 b(if\(def.getRightOp\(\))37 b(instanceof)i(Constant\))
1256 3665 y({)300 3730 y(\(8\))996 b
(if\(useBox.canContainValue\(def.getRightOp\(\)\))o(\))300
3794 y(\(9\))1155 b(useBox.setValue\(def.getRightOp\(\)\);)1256
3859 y(})1097 3924 y(})938 3989 y(})778 4053 y(})619
4118 y(})459 4183 y(})300 4247 y(})300 4558 y Fi(W)l(alkthr)n(ough)28
b(of)f(the)h(code)420 4783 y Fy(1.)49 b(This)36 b(hooks)g(a)h(call)g
(to)g(the)g(propagator)f(into)i(S)t Ft(O)t(O)q(T)r Fy(')-5
b(s)39 b(list)d(of)h(transformations.)65 b(The)37 b(call)544
4898 y Fq(Scene.v\(\).getPack\("jtp"\))16 b Fy(returns)21
b(the)g Fq(Pack)f Fy(which)h(corresponds)g(to)g(the)i(J)t
Ft(I)t(M)t Fy(-)546 5014 y Ft(P)t(L)t(E)j Fy(transformation)20
b(pack)i(\(which)g(is)f(a)h(list)e(of)i(all)f(the)h(transformations)e
(performed)h(on)j(J)t Ft(I)t(M)t Fy(-)546 5129 y Ft(P)t(L)t(E)r
Fy(\).)38 b(Other)26 b(packs)g(are)i Fq(jop)d Fy(and)i(wjtp)e(which)h
(stand)g(for)j(J)t Ft(I)t(M)t(P)t(L)t(E)j Fy(optimization)25
b(pack)h(and)544 5245 y(the)d(whole)i(J)t Ft(I)t(M)t(P)t(L)t(E)30
b Fy(transformation)22 b(pack.)31 b(Then)23 b(we)g(add)h(a)g
Fq(Transform)d Fy(instance)i(to)g(this)2050 5509 y(94)p
eop
%%Page: 95 103
95 102 bop 544 499 a Fy(pack)36 b(which)f(is)g(essentially)f(a)i(name)g
(for)g(the)f(transformation)g(and)g(the)h(transformer)f(class)544
615 y(implementing)22 b(the)j Fq(BodyTransformer)c Fy(interf)o(ace.)420
811 y(2.)49 b(This)24 b(code)h(implements)e(the)h(singleton)g
(functionality)f(for)i(the)f(class.)420 1008 y(3.)49
b(This)24 b(is)g(the)h(entry)g(point)e(method)h(which)g(contains)g(the)
h(body)f(of)h(the)g(transformation.)420 1204 y(4.)49
b(Retrie)n(v)o(e)34 b(the)g(list)g(of)h(units)e(for)i(this)e(body)-6
b(,)36 b(b)n(uild)e(the)g Fq(CompleteUnitGraph)d Fy(and)j(the)544
1320 y Fq(SimpleLocalDefs)21 b Fy(object)k(which)f(contains)g(use-def)h
(and)g(def-use)g(information.)420 1516 y(5.)49 b(Iterate)25
b(o)o(v)o(er)f(all)h(the)f(uses)h(in)f(the)h(program,)f(looking)g(for)h
(uses)f(of)h(local)g(v)n(ariables.)420 1712 y(6.)49 b(Get)25
b(the)f(de\002nition)g(for)h(that)g(local)f(v)n(ariable.)30
b(If)c(only)e(one)g(de\002nition)g(e)o(xists,)g(then)g(do)h(step)f(7.)
420 1909 y(7.)49 b(If)25 b(the)g(right)f(hand)g(side)h(of)g(the)f
(de\002nition)g(is)h(a)g(constant.)420 2105 y(8.)49 b(If)25
b(the)g(use)f(box)h(can)g(contain)f(a)h(constant.)420
2302 y(9.)49 b(Set)34 b(the)f(contents)f(of)i(the)f(use)g(box)g(to)g
(the)g(right)g(hand)g(side)g(of)g(the)g(de\002nition,)i(that)d(is,)j
(the)544 2417 y(constant.)300 2754 y Fp(5.4.4)121 b(Instrumenting)35
b(a)e(c)n(lass\002le)300 2985 y Fy(This)c(e)o(xample)g(instruments)e
(the)j(gi)n(v)o(en)e(application)h(so)g(that)g(when)h(it)f(is)g(e)o(x)o
(ecuted,)h(it)f(outputs)f(the)300 3101 y(number)c(of)h(gotos)f(that)g
(were)i(dynamically)d(e)o(x)o(ecuted.)30 b(The)25 b(general)g(idea)g
(is)f(to:)420 3364 y(1.)49 b(Insert)25 b(a)g(counter)f(in)h(the)g(main)
f(class)g(called)h Fq(gotoCount)p Fy(.)420 3561 y(2.)49
b(Insert)25 b(counter)f(incrementors)g(before)i(each)f(goto)f
(statement)g(present)h(in)f(the)j(J)t Ft(I)t(M)t(P)t(L)t(E)k
Fy(code.)420 3757 y(3.)49 b(Insert)36 b(a)h(print)f(of)g(the)g(counter)
h(at)f(the)g(end)h(of)f(the)h Fq(mainClass)p Fy(,)g(or)f(before)h(an)o
(y)f(call)g(to)544 3873 y Fq(System.exit\(\))p Fy(.)300
4150 y Fb(public)j(class)g(Main)300 4215 y({)459 4279
y(public)g(static)g(void)h(main\(String[])d(args\))459
4344 y({)619 4409 y(if\(args.length)h(==)h(0\))619 4473
y({)778 4538 y(System.out.println\("Syntax:)d(java)j(Main)h(--app)f
(<main_classfile>)e([soot)i(")938 4603 y(+)g("options]"\);)778
4668 y(System.exit\(0\);)619 4732 y(})300 4862 y(\(1\)|)159
b(Scene.v\(\).getPack\("jtp"\).add\(new)35 b
(Transform\("jtp.instrumenter",)420 4936 y(|)278 b
(GotoInstrumenter.v\(\)\)\);)619 5001 y(soot.Main.main\(args\);)459
5066 y(})300 5130 y(})300 5260 y(class)39 b(GotoInstrumenter)f(extends)
g(BodyTransformer)2050 5509 y Fy(95)p eop
%%Page: 96 104
96 103 bop 300 499 a Fb({)420 564 y(|private)38 b(static)h
(GotoInstrumenter)f(instance)g(=)i(new)f(GotoInstrumenter\(\);)300
639 y(\(2\)|private)f(GotoInstrumenter\(\))f({})420 713
y(|public)h(static)h(GotoInstrumenter)f(v\(\))h({)h(return)f(instance;)
f(})459 843 y(public)h(String)g(getDeclaredOptions\(\))e({)j(return)f
(super.getDeclaredOptions\(\);)d(})459 972 y(private)j(boolean)g
(addedFieldToMainClassAndLoadedPrintStream)34 b(=)39
b(false;)459 1037 y(private)g(SootClass)g(javaIoPrintStream;)420
1166 y(|private)f(Local)h(addTmpRef\(Body)f(body\))420
1241 y(|{)300 1316 y(\(3\)|)159 b(Local)39 b(tmpRef)g(=)h
(Jimple.v\(\).newLocal\("tmpRef",)35 b
(RefType.v\("java.io.PrintStream"\)\);)420 1390 y(|)159
b(body.getLocals\(\).add\(tmpRef\);)420 1465 y(|)g(return)39
b(tmpRef;)420 1540 y(|})420 1669 y(|private)f(Local)h(addTmpLong\(Body)
f(body\))420 1744 y(|{)300 1818 y(\(4\)|)159 b(Local)39
b(tmpLong)g(=)g(Jimple.v\(\).newLocal\("tmpLong",)d(LongType.v\(\)\);)
420 1893 y(|)159 b(body.getLocals\(\).add\(tmpLong\);)420
1968 y(|)g(return)39 b(tmpLong;)420 2043 y(|})459 2172
y(private)g(void)g(addStmtsToBefore\(Chain)e(units,)i(Stmt)g(s,)h
(SootField)e(gotoCounter,)g(Local)h(tmpRef,)619 2237
y(Local)g(tmpLong\))459 2301 y({)619 2366 y(//)g(insert)g("tmpRef)g(=)h
(java.lang.System.out;")420 2431 y(|)159 b
(units.insertBefore\(Jimple.v\(\).newAssignStmt)o(\()420
2505 y(|)597 b(tmpRef,)39 b(Jimple.v\(\).newStaticFieldRef\()420
2580 y(|)597 b(Scene.v\(\).getField\("<java.lang.System:)34
b(java.io.PrintStream)j(out>"\)\)\),)i(s\);)420 2655
y(|)420 2730 y(|)159 b(//)39 b(insert)g("tmpLong)g(=)h(gotoCounter;")
300 2804 y(\(5\)|)159 b(units.insertBefore\(Jimple.v\(\).newAssignStmt)
o(\(tmpLo)o(ng,)420 2879 y(|)597 b
(Jimple.v\(\).newStaticFieldRef\(gotoCounter\)\),)34
b(s\);)420 2954 y(|)420 3028 y(|)159 b(//)39 b(insert)g
("tmpRef.println\(tmpLong\);")420 3103 y(|)159 b(SootMethod)38
b(toCall)h(=)h(javaIoPrintStream.getMethod\("void)35
b(println\(long\)"\);)420 3178 y(|)159 b
(units.insertBefore\(Jimple.v\(\).newInvokeStmt)o(\()420
3253 y(|)717 b(Jimple.v\(\).newVirtualInvokeExpr\(tmpRef,)34
b(toCall,)39 b(tmpLong\)\),)f(s\);)459 3317 y(})300 3447
y(\(6\))h(protected)g(void)g(internalTransform\(Body)e(body,)i(String)g
(phaseName,)f(Map)i(options\))459 3511 y({)619 3576 y(SootClass)e
(sClass)h(=)h(body.getMethod\(\).getDeclaringClass\(\);)619
3641 y(SootField)e(gotoCounter)h(=)g(null;)619 3705 y(boolean)g
(addedLocals)f(=)i(false;)619 3770 y(Local)f(tmpRef)g(=)h(null,)f
(tmpLong)f(=)i(null;)619 3835 y(Chain)f(units)g(=)h(body.getUnits\(\);)
619 3964 y(if)f(\(!Scene.v\(\).getMainClass\(\).)778
4029 y(declaresMethod\("void)e(main\(java.lang.String[]\)"\)\))938
4093 y(throw)i(new)g(RuntimeException\("couldn't)d(find)j(main\(\))g
(in)h(mainClass"\);)300 4223 y(\(7\)|)159 b(if)39 b
(\(addedFieldToMainClassAndLoadedPrintStream\))420 4297
y(|)318 b(gotoCounter)38 b(=)i
(Scene.v\(\).getMainClass\(\).getFieldByName\("goto)o(Count")o(\);)619
4362 y(else)619 4427 y({)778 4491 y(//)g(Add)f(gotoCounter)f(field)420
4556 y(|)318 b(gotoCounter)38 b(=)i(new)g(SootField\("gotoCount",)c
(LongType.v\(\),)420 4631 y(|)1593 b(Modifier.STATIC\);)420
4706 y(|)318 b(Scene.v\(\).getMainClass\(\).addField\(gotoCounter)o
(\);)300 4780 y(\(8\)|)420 4855 y(|)g(javaIoPrintStream)38
b(=)h(Scene.v\(\).getSootClass\("java.io.PrintStream"\))o(;)420
4930 y(|)318 b(addedFieldToMainClassAndLoadedPrintStream)34
b(=)40 b(true;)619 4994 y(})619 5124 y(//)f(Add)h(code)f(to)h(increase)
e(goto)h(counter)g(each)h(time)f(a)g(goto)h(is)f(encountered)619
5188 y({)778 5253 y(boolean)g(isMainMethod)f(=)i
(body.getMethod\(\).getSubSignature\(\).equals\()o("void)34
b(")39 b(+)2050 5509 y Fy(96)p eop
%%Page: 97 105
97 104 bop 938 499 a Fb("main\(java.lang.String[]\)"\);)778
629 y(Local)39 b(tmpLocal)g(=)h(Jimple.v\(\).newLocal\("tmp",)c
(LongType.v\(\)\);)778 693 y(body.getLocals\(\).add\(tmpLocal\);)420
823 y(|)318 b(Iterator)39 b(stmtIt)g(=)h(units.snapshotIterator\(\);)
420 897 y(|)420 972 y(|)358 b(while\(stmtIt.hasNext\(\)\))300
1047 y(\(9\)|)g({)420 1122 y(|)517 b(Stmt)40 b(s)f(=)h(\(Stmt\))f
(stmtIt.next\(\);)420 1196 y(|)938 1261 y(if\(s)g(instanceof)f
(GotoStmt\))938 1326 y({)459 1390 y(|)598 b(AssignStmt)38
b(toAdd1)h(=)h(Jimple.v\(\).newAssignStmt\(tmpLocal,)459
1465 y(|)718 b(Jimple.v\(\).newStaticFieldRef\(gotoCounter\))o(\);)459
1540 y(|)598 b(AssignStmt)38 b(toAdd2)h(=)h
(Jimple.v\(\).newAssignStmt\(tmpLocal,)459 1614 y(|)757
b(Jimple.v\(\).newAddExpr\(tmpLocal,)36 b(LongConstant.v\(1L\)\)\);)459
1689 y(|)598 b(AssignStmt)38 b(toAdd3)h(=)h
(Jimple.v\(\).newAssignStmt\(Jimple.v\(\).)459 1764 y(|)757
b(newStaticFieldRef\(gotoCounter\),)36 b(tmpLocal\);)300
1839 y(\(9a\)|)459 1913 y(|)598 b(//)40 b(insert)f("tmpLocal)f(=)i
(gotoCounter;")459 1988 y(|)598 b(units.insertBefore\(toAdd1,)36
b(s\);)459 2063 y(|)459 2137 y(|)598 b(//)40 b(insert)f("tmpLocal)f(=)i
(tmpLocal)e(+)i(1L;")459 2212 y(|)598 b(units.insertBefore\(toAdd2,)36
b(s\);)459 2287 y(|)459 2362 y(|)598 b(//)40 b(insert)f("gotoCounter)f
(=)h(tmpLocal;")459 2436 y(|)598 b(units.insertBefore\(toAdd3,)36
b(s\);)938 2501 y(})938 2566 y(else)j(if)g(\(s)h(instanceof)e
(InvokeStmt\))459 2630 y(|)478 b({)459 2705 y(|)598 b(InvokeExpr)38
b(iexpr)h(=)h(\(InvokeExpr\))e(\(\(InvokeStmt\)s\).getInvokeExpr\(\);)
459 2780 y(|)598 b(if)40 b(\(iexpr)f(instanceof)f(StaticInvokeExpr\))
459 2855 y(|)598 b({)459 2929 y(|)757 b(SootMethod)39
b(target)g(=)g(\(\(StaticInvokeExpr\)iexpr\).getMethod\(\);)459
3004 y(|)459 3079 y(|)757 b(if)40 b
(\(target.getSignature\(\).equals\("<java.lang.Sy)o(stem:)33
b(void)40 b(")f(+)459 3153 y(|)917 b("exit\(int\)>"\)\))300
3228 y(\(9b\)|)756 b({)459 3303 y(|)957 b(if)39 b(\(!addedLocals\))459
3378 y(|)957 b({)459 3452 y(|)1116 b(tmpRef)39 b(=)h
(addTmpRef\(body\);)d(tmpLong)i(=)h(addTmpLong\(body\);)459
3527 y(|)1116 b(addedLocals)38 b(=)i(true;)459 3602 y(|)957
b(})459 3676 y(|)g(addStmtsToBefore\(units,)36 b(s,)k(gotoCounter,)e
(tmpRef,)g(tmpLong\);)459 3751 y(|)797 b(})459 3826 y(|)638
b(})938 3891 y(})459 3955 y(|)439 b(else)39 b(if)g(\(isMainMethod)f(&&)
i(\(s)f(instanceof)g(ReturnStmt)f(||)i(s)f(instanceof)459
4030 y(|)598 b(ReturnVoidStmt\)\))459 4105 y(|)439 b({)459
4179 y(|)598 b(if)40 b(\(!addedLocals\))459 4254 y(|)598
b({)300 4329 y(\(9c\)|)756 b(tmpRef)39 b(=)h(addTmpRef\(body\);)e
(tmpLong)g(=)i(addTmpLong\(body\);)459 4404 y(|)757 b(addedLocals)39
b(=)g(true;)459 4478 y(|)598 b(})459 4553 y(|)g
(addStmtsToBefore\(units,)36 b(s,)k(gotoCounter,)e(tmpRef,)h
(tmpLong\);)459 4628 y(|)439 b(})778 4692 y(})619 4757
y(})459 4822 y(})300 4886 y(})2050 5509 y Fy(97)p eop
%%Page: 98 106
98 105 bop 300 499 a Fi(W)l(alkthr)n(ough)28 b(of)f(the)h(code)420
723 y Fy(1.)49 b(This)36 b(hooks)g(a)h(call)g(to)g(the)g(propagator)f
(into)i(S)t Ft(O)t(O)q(T)r Fy(')-5 b(s)39 b(list)d(of)h
(transformations.)65 b(The)37 b(call)544 839 y Fq
(Scene.v\(\).getPack\("jtp"\))16 b Fy(returns)21 b(the)g
Fq(Pack)f Fy(which)h(corresponds)g(to)g(the)i(J)t Ft(I)t(M)t
Fy(-)546 955 y Ft(P)t(L)t(E)j Fy(transformation)20 b(pack)i(\(which)g
(is)f(a)h(list)e(of)i(all)f(the)h(transformations)e(performed)h(on)j(J)
t Ft(I)t(M)t Fy(-)546 1070 y Ft(P)t(L)t(E)r Fy(\).)36
b(Then)25 b(we)h(add)g(a)g Fq(Transform)d Fy(instance)j(to)f(this)g
(pack)g(which)h(is)f(essentially)f(a)i(name)544 1186
y(for)37 b(the)g(transformation)f(and)h(the)g(transformer)g(class)g
(implementing)d(the)j Fq(BodyTrans-)544 1301 y(former)23
b Fy(interf)o(ace.)420 1500 y(2.)49 b(These)25 b(\002elds)f(and)h
(methods)f(implement)f(the)i(singleton)e(functionality)-6
b(.)420 1698 y(3.)49 b(Adds)21 b(a)h(temporary)g(reference)h(local)f(v)
n(ariable)f(of)h(type)g Fq(java.io.PrintStream)c Fy(to)j(the)544
1813 y(gi)n(v)o(en)i(body)-6 b(.)420 2012 y(4.)49 b(Adds)24
b(a)h(temporary)g(long)f(local)g(v)n(ariable)h(of)f(type)h
Fq(LongType)e Fy(to)h(the)h(gi)n(v)o(en)e(body)-6 b(.)420
2210 y(5.)49 b(Inserts)24 b(the)h(follo)n(wing)e(section)h(of)h(code)g
(before)g Fq(s)p Fy(:)544 2473 y Fq(tmpRef)58 b(=)i
(java.lang.System.out;)544 2589 y(tmpLong)e(=)i(gotoCount;)544
2704 y(tmpRef.println\(tmpLong\);)544 2968 y Fy(This)24
b(is)g(used)h(to)f(just)g(print)g(out)g(the)h(contents)f(of)h(the)g
(goto)f(counter)-5 b(.)420 3166 y(6.)49 b(This)24 b(is)g(the)h(entry)g
(method)e(for)i(the)g(transformation.)420 3364 y(7.)49
b(If)25 b(the)g(goto)f(counter)h(has)f(been)h(already)g(added)g(to)g
(the)f(PrintStream)h(class,)g(then)f(retrie)n(v)o(e)g(it.)420
3563 y(8.)49 b(Else,)24 b(create)i(a)f(\002eld)g(called)g
Fq(gotoCount)e Fy(of)i(type)f(long,)g(and)h(add)g(it)f(to)g(the)h(main)
f(class.)420 3761 y(9.)49 b(Iterate)33 b(o)o(v)o(er)f(all)h(the)g
(statements)e(in)i(the)g(class.)55 b(Note)32 b(that)h(a)g(snapshot)f
(iterator)g(is)h(used)f(to)544 3877 y(allo)n(w)24 b(modi\002cations)f
(to)h(the)h Fq(Chain)f Fy(of)h(units)e(while)i(iterating.)599
4099 y(\(a\))49 b(If)32 b(the)g(statement)e(is)h(a)h(goto)f(statement,)
h(then)f(insert)g(the)h(follo)n(wing)d(code)j(before)g(the)758
4215 y(goto,)24 b(to)h(increment)f(the)h(counter:)758
4417 y Fq(tmpLocal)58 b(=)i(gotoCounter;)758 4533 y(tmpLocal)e(=)i
(tmpLocal)e(+)i(1L;)758 4648 y(gotoCounter)e(=)h(tmpLocal;)594
4850 y Fy(\(b\))48 b(If)34 b(the)e(statement)g(is)g(a)h(static)f(in)l
(v)n(ok)o(e)g(to)g(the)h(method)e Fq(System.exit\(int\))e
Fy(then)758 4966 y(call)c Fq(addStmtsToBefore)d Fy(which)i(inserts)g(a)
h(print)f(of)h(the)g(goto)f(counter)-5 b(.)599 5122 y(\(c\))49
b(If)23 b(the)g(statement)e(is)i(the)f(return)g(v)n(oid)g(of)h(the)f
(main)g(method)g(then)g(call)g Fq(addStmtsTo-)758 5238
y(Before)i Fy(which)g(inserts)g(a)i(print)e(of)h(the)f(goto)g(counter)
-5 b(.)2050 5509 y(98)p eop
%%Page: 99 107
99 106 bop 300 499 a Fp(5.4.5)121 b(Ev)n(aluating)35
b(a)f(Scene)300 730 y Fy(This)j(is)h(a)g(simple)f(e)o(xample)h(which)f
(counts)h(the)g(number)f(of)h(class\002les,)j(methods)c(and)h(\002elds)
g(in)300 845 y(the)d(acti)n(v)o(e)g Fq(Scene)p Fy(.)61
b(The)36 b(idea)f(is)g(to)h(iterate)f(o)o(v)o(er)g(all)g(of)g(these)h
(objects)e(and)i(increment)f(counts)300 961 y(whene)n(v)o(er)24
b(appropriate.)300 1174 y Fb(public)39 b(class)g(Main)300
1239 y({)459 1303 y(public)g(static)g(void)h(main\(String[])d(args\))
459 1368 y({)619 1433 y(if\(args.length)h(==)h(0\))619
1497 y({)778 1562 y(System.out.println\("Syntax:)d(java)j(Main)h(--app)
f(<main_classfile>)e([soot)i(options]"\);)778 1627 y(System.exit\(0\);)
619 1691 y(})300 1821 y(\(1\)|)159 b
(Scene.v\(\).getPack\("wjtp"\).add\(new)35 b
(Transform\("wjtp.profiler",)h(Evaluator.v\(\)\)\);)619
1885 y(soot.Main.main\(args\);)459 1950 y(})300 2015
y(})300 2144 y(class)j(Evaluator)g(extends)f(SceneTransformer)300
2209 y({)420 2273 y(|private)g(static)h(Evaluator)g(instance)f(=)i(new)
f(Evaluator\(\);)300 2348 y(\(2\)|private)f(Evaluator\(\))g({})420
2423 y(|static)g(String)h(oldPath;)459 2552 y(public)g(static)g
(Evaluator)g(v\(\))g({)h(return)f(instance;)f(})300 2681
y(\(3\)|protected)g(void)h(internalTransform\(String)d(phaseName,)j
(Map)g(options\))459 2746 y({)619 2811 y(long)g(classCount)f(=)i(0;)619
2875 y(long)f(stmtCount)g(=)g(0;)619 2940 y(long)g(methodCount)f(=)i
(0;)619 3069 y(//)f(Pre-process)g(each)g(class,)g(constructing)f(the)h
(invokeToNumberMap)619 3134 y({)420 3199 y(|)318 b(Iterator)39
b(classIt)g(=)g(Scene.v\(\).getApplicationClasses\(\).iterator\(\);)420
3274 y(|)420 3348 y(|)318 b(while\(classIt.hasNext\(\)\))300
3423 y(\(4\)|)g({)420 3498 y(|)438 b(SootClass)38 b(sClass)h(=)h
(\(SootClass\))e(classIt.next\(\);)420 3572 y(|)438 b(classCount++;)420
3702 y(|)478 b(Iterator)38 b(methodIt)h(=)h
(sClass.getMethods\(\).iterator\(\);)420 3777 y(|)300
3851 y(\(5\)|)478 b(while\(methodIt.hasNext\(\)\))420
3926 y(|)g({)420 4001 y(|)637 b(SootMethod)38 b(m)i(=)g(\(SootMethod\))
e(methodIt.next\(\);)420 4075 y(|)637 b(methodCount++;)300
4205 y(\(6\)|)g(if\(!m.isConcrete\(\)\))420 4279 y(|)796
b(continue;)300 4409 y(\(7\)|)637 b(JimpleBody)38 b(body)i(=)f
(\(JimpleBody\))f(m.retrieveActiveBody\(\);)420 4484
y(|)637 b(stmtCount)39 b(+=)g(body.getUnits\(\).size\(\);)938
4548 y(})778 4613 y(})619 4678 y(})619 4807 y(DecimalFormat)f(format)h
(=)g(new)h(DecimalFormat\("0.0"\);)619 4936 y
(System.out.println\("Classes:)35 b(\\t")40 b(+)g(classCount\);)619
5001 y(System.out.println\("Methods:)35 b(\\t")40 b(+)g(methodCount)e
(+)h(")h(\(")g(+)778 5066 y(format.format\(\(double\))d(methodCount)h
(/)i(classCount\))e(+)i(")f(methods/class\)")f(\);)619
5130 y(System.out.println\("Stmts:)115 b(\\t")40 b(+)g(stmtCount)e(+)80
b(")39 b(\(")h(+)778 5195 y(format.format\(\(double\))d(stmtCount)h(/)i
(methodCount\))e(+)i(")f(units/methods\)"\);)619 5260
y(System.exit\(0\);)2050 5509 y Fy(99)p eop
%%Page: 100 108
100 107 bop 459 499 a Fb(})300 564 y(})300 940 y Fi(W)l(alkthr)n(ough)
28 b(of)f(the)h(code)420 1164 y Fy(1.)49 b(This)36 b(hooks)g(a)h(call)g
(to)g(the)g(propagator)f(into)i(S)t Ft(O)t(O)q(T)r Fy(')-5
b(s)39 b(list)d(of)h(transformations.)65 b(The)37 b(call)544
1280 y Fq(Scene.v\(\).getPack\("wjtp"\))g Fy(returns)43
b(the)f Fq(Pack)g Fy(which)h(corresponds)f(to)g(the)546
1395 y(J)t Ft(I)t(M)t(P)t(L)t(E)27 b Fy(transformation)20
b(pack)i(\(which)e(is)h(a)g(list)f(of)i(all)e(the)h(whole)g(program)g
(transformations)544 1511 y(performed)28 b(on)i(J)t Ft(I)t(M)t(P)t(L)t
(E)r Fy(\).)46 b(Then)29 b(we)f(add)h(a)f Fq(Transform)f
Fy(instance)h(to)g(this)f(pack)i(which)f(is)544 1626
y(essentially)21 b(a)i(name)g(for)g(the)g(transformation)e(and)i(the)g
(transformer)f(class)h(implementing)d(the)544 1742 y
Fq(BodyTransformer)h Fy(interf)o(ace.)420 1940 y(2.)49
b(Implements)23 b(the)i(singleton)e(functionality)g(for)i(this)f
(interf)o(ace.)420 2139 y(3.)49 b(This)24 b(is)g(the)h(entry)g(point)e
(method)h(which)g(contains)g(the)h(body)f(of)h(the)g(analysis.)420
2338 y(4.)49 b(Iterate)25 b(o)o(v)o(er)f(the)h(application)e(classes)i
(in)f(the)h Fq(Scene)p Fy(.)420 2536 y(5.)49 b(Iterate)25
b(o)o(v)o(er)f(the)h(methods)e(in)i(each)g(class.)420
2735 y(6.)49 b(If)25 b(the)g(method)f(has)g(no)h(body)-6
b(,)23 b(skip)h(this)g(method.)420 2933 y(7.)49 b(Retrie)n(v)o(e)22
b(the)g(acti)n(v)o(e)f(body)g(for)i(this)e(method,)h(and)g(increase)g
(the)g(statement)g(count)f(by)h(the)g(size)544 3049 y(of)j(the)f
Fq(Unit)g(Chain)g Fy(in)h(the)f Fq(Body)p Fy(.)300 3388
y Fp(5.4.6)121 b(Summar)q(y)300 3621 y Fy(This)27 b(chapter)i
(presented)f(a)g(complete)f(o)o(v)o(ervie)n(w)g(of)h(the)g(basic)i(S)t
Ft(O)t(O)q(T)i Fy(Application)27 b(Programming)300 3736
y(Interf)o(ace)33 b(\(API\).)f(Fi)n(v)o(e)e(e)o(xample)h(programs)g(b)n
(uilt)f(using)h(the)i(S)t Ft(O)t(O)q(T)j Fy(frame)n(w)o(ork)31
b(were)h(presented)300 3852 y(and)25 b(w)o(alkthroughs)e(were)j(gi)n(v)
o(en)d(to)h(describe)h(them.)446 4017 y(The)g(current)g(and)g(complete)
f(API)h(can)h(be)f(found)f(online)g(on)g(our)h(web)g(site[22)o(].)2025
5509 y(100)p eop
%%Page: 101 109
101 108 bop 300 1203 a Fu(Chapter)58 b(6)300 1658 y(Experiences)300
2215 y Fr(6.1)143 b(The)39 b(Cur)n(se)f(of)h(Non-Determinism)300
2484 y Fy(While)27 b(de)n(v)o(eloping)f(S)t Ft(O)t(O)q(T)r
Fy(,)31 b(we)c(encountered)g(the)g(interesting)e(phenomenon)h(of)h
(nondeterministic)300 2600 y(optimization.)65 b(In)37
b(the)g(\002rst)g(v)o(ersion)f(of)j(S)t Ft(O)t(O)q(T)r
Fy(,)k(the)36 b(same)h(program)g(w)o(ould)f(be)h(fed)g(into)h(S)t
Ft(O)t(O)q(T)300 2715 y Fy(twice,)f(and)d(tw)o(o)g(dif)n(ferent)g
(optimized)f(v)o(ersions)g(w)o(ould)g(be)i(produced.)59
b(This)33 b(is)h(undesirable)g(for)300 2831 y(se)n(v)o(eral)22
b(reasons.)30 b(First,)22 b(it)g(mak)o(es)h(it)f(v)o(ery)g(dif)n
(\002cult)f(to)i(deb)n(ug)h(S)t Ft(O)t(O)q(T)j Fy(because)c(each)g
(time)f(you)g(run)h(it)300 2946 y(on)j(a)i(test)e(program)g(dif)n
(ferent)g(results)g(are)i(produced.)36 b(Second,)28 b(because)f(the)f
(optimized)g(programs)300 3062 y(produced)e(by)h(S)t
Ft(O)t(O)q(T)k Fy(are)c(not)e(al)o(w)o(ays)h(the)f(same,)h(it)g(mak)o
(es)f(it)h(dif)n(\002cult)f(to)g(reproduce)h(results)g(and)f(to)300
3177 y(understand)f(the)g(ef)n(fect)h(of)g(the)f(optimizations.)28
b(F)o(or)22 b(e)o(xample,)g(one)h(technique)f(which)g(is)g(commonly)300
3293 y(used)i(to)g(isolate)g(the)g(ef)n(fect)g(of)h(an)f(optimization)e
(is)i(to)g(turn)g(it)g(of)n(f)g(and)g(note)g(the)g(slo)n(wdo)n(wn.)29
b(Ha)n(ving)300 3409 y(an)o(y)39 b(of)g(the)g(optimizations)e(beha)n(v)
o(e)i(nondeterministicly)e(in)l(v)n(alidates)g(this)i(common)f
(technique.)300 3524 y(Thus)24 b(it)g(is)h(quite)f(clear)h(that)g
(nondeterminism)d(must)i(be)h(a)n(v)n(oided.)446 3689
y(So)h(where)g(is)f(the)h(nondeterminism)d(being)i(introduced?)33
b(Although)24 b(we)i(are)g(not)f(using)g(random)300 3805
y(numbers)18 b(e)o(xplicitly)-6 b(,)17 b(the)o(y)h(are)i(being)e(used)h
(implicitly)d(when)j(using)f(a)h Fq(java.util.Hashtable)300
3921 y Fy(without)h(o)o(v)o(erriding)g(the)h Fq(hashCode\(\))f
Fy(method.)28 b(The)22 b(def)o(ault)f(implementation)f(for)h(this)g
(method)300 4036 y(is)28 b(to)f(pro)o(vide)g(a)i(hash)e(code)i(based)f
(on)f(the)h(actual)g(memory)f(location)h(of)g(the)f Fq(Object)p
Fy(.)40 b(Although)300 4152 y(this)26 b(pro)o(vides)f(a)i(great)g(hash)
f(code,)h(it)f(is)g(clear)h(that)g(on)f(e)n(v)o(ery)g(e)o(x)o(ecution)f
(of)j(S)t Ft(O)t(O)q(T)k Fy(the)26 b(hash)h(tables)300
4267 y(will)22 b(be)i(dif)n(ferent.)30 b(This)22 b(dif)n(ference)i(has)
f(a)h(noticeable)f(ef)n(fect)g(when)h(one)f(iterates)g(through)f(the)h
(hash)300 4383 y(table,)h(because)i(the)e(elements)g(are)i(returned)f
(follo)n(wing)e(the)h(natural)h(order)g(of)g(the)g(table.)446
4548 y(T)-8 b(o)30 b(a)n(v)n(oid)g(nondeterminism)e(one)j(must)e
(simply)f(a)n(v)n(oid)i(iterating)g(on)g(a)g(hash)g(table,)i(or)e(pro)o
(vide)300 4664 y(a)k(deterministic)e Fq(hashCode\(\))f
Fy(method)i(for)h(the)f(objects)g(being)g(inserted)g(into)g(the)g(hash)
g(table.)300 4779 y(Sometimes)19 b(the)g(latter)g(is)g(impossible)f
(without)g(producing)h(a)h(hash)f(method)f(with)h(se)n(v)o(eral)g
(collisions.)300 4895 y(In)37 b(this)f(case,)k(if)d(you)f(absolutely)f
(need)i(some)g(sort)f(of)h(set)f(which)h(has)f(constant)g(time)g
(insertion,)300 5011 y(remo)o(v)n(al,)f(and)e(queries,)j(and)e
(produces)f(deterministic)f(enumerations)h(then)g(your)h(best)f(bet)h
(is)f(the)300 5126 y Fq(Chain)38 b Fy(described)i(in)f(subsection)f
(5.2.2.)74 b(These)39 b(techniques)g(were)h(used)f(in)g(the)g(more)h
(recent)300 5242 y(v)o(ersions)23 b(of)k(S)t Ft(O)t(O)q(T)j
Fy(and)25 b(the)f(frame)n(w)o(ork)h(is)f(deterministic.)2025
5509 y(101)p eop
%%Page: 102 110
102 109 bop 300 506 a Fr(6.2)143 b(Sentinel)38 b(T)-9
b(est)39 b(Suite)300 774 y Fy(W)-8 b(e)31 b(ha)n(v)o(e)g(coined)g(the)f
(term)h Fz(sentinel)f(test)g(suite)g Fy(to)h(denote)g(a)g(suite)f(of)h
(programs)f(which)h(are)g(used)300 890 y(to)c(v)n(alidate)f(the)g
(correctness)i(of)f(our)f(compiler)h(frame)n(w)o(ork.)36
b(Due)28 b(to)e(the)h(comple)o(xity)e(of)i(compiler)300
1006 y(w)o(ork,)c(it)f(is)g(essential)f(to)h(perform)h(re)o(gular)f
(tests)g(on)g(this)g(test)g(suite)f(to)h(ensure)h(that)f(the)g
(compiler)g(op-)300 1121 y(erates)i(properly)-6 b(,)22
b(and)h(that)g(we)h(ha)n(v)o(e)f(not)f(introduced)h(b)n(ugs)f(with)h
(the)g(latest)f(modi\002cation)h(to)h(S)t Ft(O)t(O)q(T)r
Fy(.)300 1237 y(Currently)37 b(the)g(sentinel)g(test)g(suite)f
(contains)h(266)f(dif)n(ferent)h(programs)g(of)g(v)n(arying)g(comple)o
(xity)-6 b(.)300 1352 y(Each)32 b(time)g(a)g(substantial)f(b)n(ug)h(is)
f(found)h(in)g(our)g(frame)n(w)o(ork,)i(the)e(program)g(which)f
(produces)h(the)300 1468 y(b)n(ug)24 b(is)h(isolated)f(and)g(shrunk)g
(to)h(its)f(smallest)f(size)i(and)g(added)g(to)f(the)h(sentinel)f(test)
g(suite.)2025 5509 y(102)p eop
%%Page: 103 111
103 110 bop 300 1198 a Fu(Chapter)58 b(7)300 1648 y(Conc)l(lusions)h
(and)f(Future)g(W)-12 b(ork)300 2141 y Fy(W)k(e)31 b(presented)h(S)t
Ft(O)t(O)q(T)r Fy(,)i(a)c(frame)n(w)o(ork)g(which)g(simpli\002es)f(the)
h(task)f(of)i(optimizing)d(Ja)n(v)n(a)h(bytecode.)300
2256 y(The)23 b(contrib)n(utions)e(of)i(this)f(thesis)g(are)i(the)f
(design,)g(implementation)d(and)j(e)o(xperimental)f(v)n(alidation)300
2372 y(of)k(this)g(frame)n(w)o(ork.)34 b(The)27 b(implementation)d(of)i
(the)g(frame)n(w)o(ork)g(consists)f(of)h(roughly)f(80,000)h(lines)300
2487 y(of)f(code.)446 2648 y(Ja)n(v)n(a)e(bytecode)g(is)f(a)h(poor)g
(choice)g(of)g(intermediate)f(representation)h(for)g(the)g
(implementation)d(of)300 2763 y(optimizations)26 b(because)j(it)f(is)h
(stack)f(based.)42 b(The)29 b(stack)f(implicitly)e(participates)i(in)h
(e)n(v)o(ery)f(compu-)300 2879 y(tation,)23 b(e)o(xpressions)g(are)h
(not)g(e)o(xplicit)f(and)h(the)o(y)f(can)h(be)g(arbitrarily)g(lar)n
(ge.)31 b(Ev)o(en)23 b(simple)g(optimiza-)300 2994 y(tions)33
b(and)g(transformations)g(become)g(dif)n(\002cult)g(to)h(design)f(and)h
(implement)e(in)h(this)g(form.)59 b(S)t Ft(O)t(O)q(T)300
3110 y Fy(recti\002es)25 b(this)f(situation)f(by)i(pro)o(viding)e
(three)i(intermediate)f(representations:)420 3338 y(1.)51
b(B)q Ft(A)t(F)r Fy(,)25 b(a)d(streamlined)f(representation)g(of)h
(bytecode)g(which)f(is)g(simple)g(to)g(manipulate.)29
b(This)21 b(is)544 3454 y(used)28 b(to)h(simplify)e(the)h(de)n(v)o
(elopment)f(of)i(analyses)f(and)h(transformations)e(which)h(absolutely)
544 3569 y(must)33 b(be)h(performed)g(on)g(stack)g(code.)59
b(Unlik)o(e)33 b(bytecode,)38 b(B)q Ft(A)t(F)h Fy(does)34
b(not)f(require)i(a)f(JSR-)544 3685 y(equi)n(v)n(alent)29
b(instruction)g(or)i(a)g(constant)f(pool.)47 b(Further)l(,)35
b(B)q Ft(A)t(F)h Fy(has)30 b(e)o(xplicit)f(local)i(v)n(ariables,)544
3801 y(e)o(xception)24 b(ranges)h(and)f(typed)h(instructions.)420
3989 y(2.)51 b(J)t Ft(I)t(M)t(P)t(L)t(E)r Fy(,)42 b(a)35
b(typed)g(3-address)f(code)h(intermediate)g(representation)f(suitable)g
(for)h(optimiza-)544 4105 y(tion.)29 b(It)23 b(is)g(our)g(ideal)f(form)
h(for)h(optimization)c(because)k(it)e(is)h(compact,)g(stackless,)f
(consists)g(of)544 4220 y(3-address)j(code,)f(and)h(the)g(local)f(v)n
(ariables)h(are)g(typed)f(and)h(named.)420 4409 y(3.)51
b(G)t Ft(R)t(I)t(M)t(P)r Fy(,)27 b(an)c(aggre)o(gated)f(v)o(ersion)f
(of)j(J)t Ft(I)t(M)t(P)t(L)t(E)29 b Fy(suitable)22 b(for)h
(decompilation)d(and)j(for)f(reading.)544 4524 y(It)g(allo)n(ws)g
(trees)g(to)g(be)h(constructed)f(as)g(opposed)g(to)g(the)g(\003at)h(e)o
(xpressions)e(present)i(in)h(J)t Ft(I)t(M)t(P)t(L)t(E)r
Fy(.)448 4753 y(S)t Ft(O)t(O)q(T)43 b Fy(also)37 b(pro)o(vides)f(a)i
(set)f(of)g(transformations)f(between)i(these)f(intermediate)f
(representa-)300 4868 y(tions:)49 b(from)35 b(bytecode)f(to)j(J)t
Ft(I)t(M)t(P)t(L)t(E)k Fy(via)35 b(one)f(path)h(and)h(J)t
Ft(I)t(M)t(P)t(L)t(E)42 b Fy(to)34 b(bytecode)h(via)f(tw)o(o)g(dif)n
(ferent)300 4984 y(paths)24 b(\(one)h(via)i(B)q Ft(A)t(F)r
Fy(,)h(and)c(the)h(other)g(via)h(G)t Ft(R)t(I)t(M)t(P)r
Fy(\).)446 5144 y(Extensi)n(v)o(e)31 b(results)h(of)h(tw)o(o)f(e)o
(xperiments)f(were)j(gi)n(v)o(en.)53 b(The)33 b(\002rst)f(e)o
(xperiment)g(v)n(alidated)g(that)300 5260 y(Ja)n(v)n(a)i(bytecode)g
(can)h(be)g(con)l(v)o(erted)f(to)i(J)t Ft(I)t(M)t(P)t(L)t(E)41
b Fy(code)35 b(and)f(back)h(to)f(bytecode)g(without)g(a)g(loss)g(of)
2025 5509 y(103)p eop
%%Page: 104 112
104 111 bop 300 499 a Fy(performance.)73 b(T)-8 b(w)o(o)38
b(methods)f(of)i(producing)e(bytecode)i(from)h(J)t Ft(I)t(M)t(P)t(L)t
(E)45 b Fy(code)39 b(were)g(e)o(xamined,)300 615 y(with)33
b(the)j(B)q Ft(A)t(F)j Fy(method)33 b(being)g(the)h(most)f(ef)n(fecti)n
(v)o(e.)57 b(The)34 b(second)g(e)o(xperiment)f(sho)n(wed)g(that)g(the)
300 730 y(ef)n(fect)27 b(of)f(applying)g(optimizations)e(on)k(J)t
Ft(I)t(M)t(P)t(L)t(E)33 b Fy(code)27 b(can)g(in)f(f)o(act)h(yield)e(a)i
(speed-up,)g(and)f(that)g(the)300 846 y(frame)n(w)o(ork)j(is)g(a)g(v)n
(alid)f(approach)i(to)f(optimizing)e(bytecode.)44 b(W)-8
b(e)29 b(are)h(encouraged)g(by)f(our)g(results)300 962
y(so)38 b(f)o(ar)l(,)k(and)d(we)f(ha)n(v)o(e)g(found)g(that)g(the)i(S)t
Ft(O)t(O)q(T)j Fy(API)c(has)f(been)h(ef)n(fecti)n(v)o(e)e(for)i(a)g(v)n
(ariety)e(of)i(tasks)300 1077 y(including)25 b(the)i(de)n
(virtualization)d(of)j(methods)e(using)h(v)n(ariable)g(type)g
(analysis,)g(decompilation,)f(and)300 1193 y(the)g(optimizations)d
(presented)j(in)f(this)g(thesis,)g(as)h(up)f(to)h(38\045)f(speed-up)h
(is)f(achie)n(v)o(ed.)448 1358 y(S)t Ft(O)t(O)q(T)32
b Fy(pro)o(vides)25 b(an)h(API)h(which)f(we)h(belie)n(v)o(e)e(is)h
(useable,)h(e)o(xtendable)e(and)i(general)f(for)h(imple-)300
1474 y(menting)d(analyses)h(and)g(optimizations.)k(It)d(is)e(widely)h
(being)g(used)f(at)i(McGill)e(Uni)n(v)o(ersity)f(for)i(most)300
1589 y(of)e(our)g(ongoing)f(compiler)g(projects.)30 b(It)23
b(w)o(as)g(released)h(as)f(publicly)f(a)n(v)n(ailable)g(code)i(in)e
(March)i(2000)300 1705 y(and)i(it)g(has)g(also)g(been)h(adopted)f(by)g
(se)n(v)o(eral)f(research)i(groups)f(at)g(other)h(institutions.)32
b(W)-8 b(e)26 b(hope)h(that)300 1820 y(it)32 b(will)g(be)i(adopted)e
(by)h(more)f(research)i(groups)f(which)f(will)g(enable)h(the)g
(widespread)g(sharing)f(of)300 1936 y(code)25 b(and)g(e)o(xperimental)e
(results)h(to)h(further)g(the)f(state)h(of)g(research)h(on)e
(optimizing)f(Ja)n(v)n(a)h(bytecode.)446 2101 y(W)-8
b(e)20 b(are)h(acti)n(v)o(ely)d(engaged)i(in)f(further)h(w)o(ork)f(on)j
(S)t Ft(O)t(O)q(T)i Fy(on)c(man)o(y)f(fronts.)28 b(W)-8
b(e)20 b(ha)n(v)o(e)g(been)g(e)o(xplor)n(-)300 2217 y(ing)30
b(additional)f(optimizations,)g(such)h(as)g(loop)g(in)l(v)n(ariant)f
(remo)o(v)n(al)g(and)h(common)f(sub-e)o(xpression)300
2332 y(elimination)j(with)h(side)h(ef)n(fect)h(information.)57
b(W)-8 b(e)34 b(ha)n(v)o(e)g(also)g(be)o(gun)f(researching)i(the)f(use)
g(of)g(at-)300 2448 y(trib)n(utes)27 b(with)g(stack)g(allocation)g(and)
h(array)g(bounds)f(check)h(elimination,)e(as)i(well)f(as)h(in)l(v)o
(estigating)300 2564 y(the)d(optimization)d(of)27 b(S)t
Ft(O)t(O)q(T)j Fy(itself.)2025 5509 y(104)p eop
%%Page: 105 113
105 112 bop 300 1202 a Fu(Bib)n(liograph)l(y)350 1690
y Fy([1])49 b(Ali-Reza)29 b(Adl-T)-8 b(abatabai,)30 b(Michal)e
(Cierniak,)i(Guei-Y)-11 b(uan)29 b(Lueh,)h(V)-6 b(ishesh)28
b(M.)g(P)o(arikh,)i(and)515 1806 y(James)g(M.)h(Stichnoth.)55
b(F)o(ast)30 b(and)h(ef)n(fecti)n(v)o(e)g(code)g(generation)f(in)h(a)g
(just-in-time)f(Ja)n(v)n(a)g(com-)515 1921 y(piler)-5
b(.)35 b Fz(A)m(CM)25 b(SIGPLAN)g(Notices)p Fy(,)g(33\(5\):280\226290,)
e(May)h(1998.)350 2117 y([2])49 b(Alfred)26 b(V)-13 b(.)26
b(Aho,)f(Ra)n(vi)i(Sethi,)f(and)g(Jef)n(fre)o(y)f(D.)h(Ullman.)38
b Fz(Compiler)o(s)25 b(Principles,)g(T)-9 b(ec)o(hniques)515
2233 y(and)24 b(T)-9 b(ools)p Fy(.)35 b(Addison-W)-8
b(esle)o(y)i(,)23 b(1986.)350 2429 y([3])49 b(Geof)n(f)21
b(A.)h(Cohen,)g(Jef)n(fre)o(y)g(S.)g(Chase,)h(and)e(Da)n(vid)g(L.)h
(Kaminsk)o(y)-6 b(.)26 b(Automatic)21 b(program)g(trans-)515
2545 y(formation)j(with)g(JOIE.)37 b(In)25 b Fz(Pr)l(oceedings)f(of)h
(the)g(USENIX)g(1998)f(Annual)h(T)-9 b(ec)o(hnical)24
b(Confer)n(-)515 2660 y(ence)p Fy(,)h(pages)g(167\226178,)e(Berk)o(ele)
o(y)-6 b(,)25 b(USA,)g(June)f(15\22619)g(1998.)g(USENIX)i(Association.)
350 2857 y([4])49 b(Ron)37 b(Cytron,)i(Jeanne)e(Ferrante,)j(Barry)e(K.)
f(Rosen,)i(Mark)e(K.)f(W)-8 b(e)o(gman,)39 b(and)e(F)-8
b(.)37 b(K)n(enneth)515 2972 y(Zadeck.)65 b(An)34 b(ef)n(\002cient)g
(method)f(of)h(computing)f(static)g(single)g(assignment)g(form.)65
b(In)34 b Fz(16th)515 3088 y(Annual)i(A)m(CM)h(Symposium)f(on)h
(Principles)e(of)i(Pr)l(o)o(gr)o(amming)d(Langua)o(g)o(es)p
Fy(,)39 b(pages)e(25\22635,)515 3203 y(1989.)350 3400
y([5])49 b(DashOPro.)515 3515 y(.)36 b(http://www)-6
b(.preempti)n(v)o(e.com/products)o(.htm)o(l.)350 3711
y([6])49 b(Jef)n(fre)o(y)35 b(Dean,)j(Gre)o(g)d(DeF)o(ouw)-6
b(,)37 b(Da)n(vid)e(Gro)o(v)o(e,)i(V)-11 b(assily)35
b(Litvino)o(v)-6 b(,)35 b(and)g(Craig)h(Chambers.)515
3827 y(V)l(OR)-6 b(TEX:)37 b(An)g(optimizing)e(compiler)h(for)i
(object-oriented)e(languages.)75 b(In)37 b Fz(Pr)l(oceedings)515
3943 y(OOPSLA)21 b('96)g(Confer)l(ence)h(on)f(Object-Oriented)f(Pr)l(o)
o(gr)o(amming)e(Systems,)j(Langua)o(g)o(es,)h(and)515
4058 y(Applications)p Fy(,)32 b(v)n(olume)f(31)h(of)g
Fz(A)m(CM)h(SIGPLAN)g(Notices)p Fy(,)h(pages)f(83\226100.)e(A)l(CM,)h
(October)515 4174 y(1996.)350 4370 y([7])49 b(Jef)n(fre)o(y)35
b(Dean,)j(Da)n(vid)d(Gro)o(v)o(e,)i(and)f(Craig)f(Chambers.)70
b(Optimization)33 b(of)j(object-oriented)515 4486 y(programs)56
b(using)f(static)h(class)h(hierarchy)f(analysis.)136
b(In)57 b(W)-8 b(alter)57 b(G.)f(Olthof)n(f,)64 b(editor)l(,)515
4601 y Fz(ECOOP'95\227Object-Oriented)25 b(Pr)l(o)o(gr)o(amming)o(,)f
(9th)i(Eur)l(opean)f(Confer)l(ence)p Fy(,)i(v)n(olume)f(952)515
4717 y(of)20 b Fz(Lectur)l(e)g(Notes)g(in)g(Computer)f(Science)p
Fy(,)i(pages)f(77\226101,)2662 4701 y(\011)2643 4717
y(Aarhus,)g(Denmark,)h(7\22611)e(August)515 4832 y(1995.)24
b(Springer)-5 b(.)350 5028 y([8])49 b(Robert)c(Fitzgerald,)50
b(T)-8 b(odd)44 b(B.)i(Knoblock,)j(Erik)44 b(Ruf,)51
b(Bjarne)46 b(Steensgaard,)k(and)45 b(Da)n(vid)515 5144
y(T)-8 b(arditi.)49 b(Marmot:)38 b(an)29 b(Optimizing)f(Compiler)g(for)
i(Ja)n(v)n(a.)49 b(Microsoft)28 b(technical)h(report,)i(Mi-)515
5260 y(crosoft)24 b(Research,)i(October)f(1998.)2025
5509 y(105)p eop
%%Page: 106 114
106 113 bop 350 499 a Fy([9])49 b(Fle)o(x)515 615 y(.)36
b(http://www)-6 b(.\003e)o(x-compiler)h(.lcs.mit.edu/.)300
812 y([10])49 b(Etienne)26 b(M.)h(Gagnon,)f(Laurie)h(J.)g(Hendren,)g
(and)g(Guillaume)f(Marceau.)43 b(Ef)n(\002cient)26 b(inference)515
928 y(of)i(static)f(types)h(for)g(ja)n(v)n(a)g(bytecode.)46
b(In)28 b Fz(Static)f(Analysis)g(Symposium)g(2000)p Fy(,)h(Lecture)h
(Notes)515 1043 y(in)24 b(Computer)h(Science,)g(Santa)g(Barbara,)i
(June)d(2000.)300 1241 y([11])49 b(Mark)34 b(Grand.)65
b Fz(P)-8 b(atterns)33 b(in)g(J)m(ava:)49 b(A)34 b(Catalo)o(g)f(of)h
(Reusable)f(Design)h(P)-8 b(atterns)32 b(Illustr)o(ated)515
1356 y(with)24 b(UML)p Fy(,)h(v)n(olume)f(V)-13 b(olume)24
b(2.)36 b(W)l(ile)o(y)-6 b(,)23 b(1998.)300 1553 y([12])49
b(Raji)n(v)31 b(Gupta.)58 b(Optimizing)30 b(array)j(bound)e(checks)h
(using)f(\003o)n(w)h(analysis.)57 b Fz(A)m(CM)33 b(Letter)o(s)e(on)515
1669 y(Pr)l(o)o(gr)o(amming)22 b(Langua)o(g)o(es)i(and)g(Systems)p
Fy(,)g(2\(4\):135\226150,)g(March)h(1993.)300 1866 y([13])49
b(Ja)n(v)n(aClass.)515 1982 y(.)36 b Fw(http://www)-6
b(.inf.fu-berlin.de/)28 b(dahm/Ja)n(v)n(aClass/)f Fy(.)300
2179 y([14])49 b(Compaq)24 b(JT)m(rek.)515 2295 y(.)36
b Fw(http://www)-6 b(.digital.com/ja)n(v)n(a/do)n(wnlo)q(ad/)q(jtre)q
(k)29 b Fy(.)300 2492 y([15])49 b(Han)30 b(Bok)g(Lee)g(and)g(Benjamin)f
(G.)h(Zorn.)52 b(A)30 b(T)-8 b(ool)29 b(for)h(Instrumenting)e(Ja)n(v)n
(a)i(Bytecodes.)52 b(In)515 2607 y Fz(The)25 b(USENIX)g(Symposium)f(on)
g(Internet)h(T)-9 b(ec)o(hnolo)o(gies)23 b(and)i(Systems)p
Fy(,)f(pages)h(73\22682,)e(1997.)300 2805 y([16])49 b(T)m(im)27
b(Lindholm)f(and)j(Frank)g(Y)-10 b(ellin.)46 b Fz(The)29
b(J)m(ava)f(V)-7 b(irtual)27 b(Mac)o(hine)g(Speci\002cation)p
Fy(.)46 b(Addison-)515 2920 y(W)-8 b(esle)o(y)i(,)23
b(1996.)300 3118 y([17])49 b(Ste)n(v)o(en)21 b(S.)h(Muchnick.)28
b Fz(Advanced)22 b(Compiler)f(Design)h(and)f(Implementation)p
Fy(.)28 b(Mor)n(gan)21 b(Kauf-)515 3233 y(mann,)j(1997.)300
3430 y([18])49 b(Gilles)25 b(Muller)l(,)g(B)6 b(\264)-39
b(arbara)27 b(Moura,)e(F)o(abrice)h(Bellard,)h(and)e(Charles)i(Consel.)
38 b(Harissa:)32 b(A)26 b(\003e)o(x-)515 3546 y(ible)e(and)g(ef)n
(\002cient)h(Ja)n(v)n(a)f(en)l(vironment)g(mixing)f(bytecode)h(and)h
(compiled)e(code.)36 b(In)24 b Fz(Pr)l(oceed-)515 3662
y(ings)18 b(of)i(the)f(3r)l(d)g(Confer)l(ence)h(on)g(Object-Oriented)e
(T)-9 b(ec)o(hnolo)o(gies)18 b(and)h(Systems)p Fy(,)h(pages)g(1\22620,)
515 3777 y(Berk)o(ele)o(y)-6 b(,)24 b(June)h(16\22620)f(1997.)g(Usenix)
g(Association.)300 3974 y([19])49 b(T)-8 b(odd)26 b(A.)i(Proebsting,)e
(Gre)o(gg)h(T)-8 b(o)n(wnsend,)27 b(P)o(atrick)g(Bridges,)g(John)g(H.)g
(Hartman,)g(T)m(im)f(Ne)n(w-)515 4090 y(sham,)37 b(and)e(Scott)g(A.)g
(W)-8 b(atterson.)68 b(T)-8 b(oba:)51 b(Ja)n(v)n(a)35
b(for)g(applications:)50 b(A)35 b(w)o(ay)g(ahead)h(of)f(time)515
4206 y(\(W)-12 b(A)h(T\))22 b(compiler)-5 b(.)29 b(In)22
b Fz(Pr)l(oceedings)f(of)g(the)h(3r)l(d)g(Confer)l(ence)h(on)f
(Object-Oriented)f(T)-9 b(ec)o(hnolo-)515 4321 y(gies)24
b(and)h(Systems)p Fy(,)f(pages)g(41\22654,)g(Berk)o(ele)o(y)-6
b(,)25 b(June)f(16\22620)g(1997.)g(Usenix)h(Association.)300
4518 y([20])49 b(V)-11 b(en)26 b(Seshadri.)42 b(IBM)27
b(High)f(Performance)i(Compiler)e(for)h(Ja)n(v)n(a.)41
b(In)27 b Fz(AIXP)-8 b(ert)26 b(Ma)o(gazine)p Fy(,)g(sep)515
4634 y(1997.)300 4831 y([21])49 b(T)-8 b(atiana)19 b(Shpeisman)f(and)h
(Mustaf)o(a)g(T)m(ikir)-5 b(.)21 b(Generating)e(Ef)n(\002cient)g(Stack)
g(Code)h(for)f(Ja)n(v)n(a.)k(T)-7 b(ech-)515 4947 y(nical)24
b(report,)h(Uni)n(v)o(ersity)e(of)h(Maryland,)h(1999.)300
5144 y([22])49 b(Soot)24 b(-)h(a)h(Ja)n(v)n(a)e(Optimization)f(Frame)n
(w)o(ork.)515 5260 y(.)36 b(http://www)-6 b(.sable.mcgill.ca/soot/.)
2025 5509 y(106)p eop
%%Page: 107 115
107 114 bop 300 499 a Fy([23])49 b(4thpass)24 b(SourceGuard.)515
615 y(.)36 b(http://www)-6 b(.4thpass.com/source)o(guard/.)300
813 y([24])49 b(Suif.)36 b(http://www)-6 b(.suif.stanford.edu/.)300
1012 y([25])49 b(SuperCede,)26 b(Inc.)f(SuperCede)h(for)f(Ja)n(v)n(a.)
515 1128 y(.)36 b(http://www)-6 b(.supercede.com/.)300
1326 y([26])49 b(Frank)29 b(T)m(ip,)g(Chris)g(Laf)n(fra,)h(Peter)f(F)-8
b(.)30 b(Sweene)o(y)-6 b(,)29 b(and)g(Da)n(vid)f(Streeter)-5
b(.)49 b(Practical)30 b(Experience)515 1442 y(with)e(an)h(Application)e
(Extractor)i(for)g(Ja)n(v)n(a)f(.)48 b(IBM)29 b(Research)h(Report)f(RC)
h(21451,)f(IBM)g(Re-)515 1557 y(search,)c(1999.)300 1756
y([27])49 b(T)-8 b(o)n(wer)24 b(T)-7 b(echnology)h(.)23
b(T)-8 b(o)n(wer)25 b(J.)515 1871 y(.)36 b(http://www)-6
b(.twr)h(.com/.)300 2070 y([28])49 b(Raja)29 b(V)-11
b(all)6 b(\264)-39 b(ee-Rai,)30 b(Etienne)e(Gagnon,)i(Laurie)e
(Hendren,)i(P)o(atrick)f(Lam,)g(P)o(atrice)g(Pomin)l(ville,)515
2186 y(and)35 b(V)-6 b(ijay)36 b(Sundaresan.)71 b(Optimizing)34
b(Ja)n(v)n(a)h(bytecode)h(using)e(the)i(Soot)g(frame)n(w)o(ork:)52
b(Is)36 b(it)515 2301 y(feasible?)78 b(In)32 b(Da)n(vid)g(A.)g(W)-8
b(att,)33 b(editor)l(,)g Fz(Compiler)f(Construction,)g(9th)f
(International)f(Con-)515 2417 y(fer)l(ence)p Fy(,)37
b(v)n(olume)c(1781)g(of)i Fz(Lectur)l(e)g(Notes)f(in)g(Computer)g
(Science)p Fy(,)i(pages)e(18\22634,)i(Berlin,)515 2532
y(German)o(y)-6 b(,)23 b(March)i(2000.)f(Springer)-5
b(.)2025 5509 y(107)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
